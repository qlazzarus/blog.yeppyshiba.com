---
import { getCollection } from 'astro:content';
import BaseLayout from '@/layouts/BaseLayout.astro';
import { POSTS_PER_PAGE } from '@/consts';
import Pagination from '@/components/Pagination.astro';
import EntryGrid from '@/components/EntryGrid.astro';

const posts = (await getCollection('blog')).sort(
    (a, b) => b.data.date.valueOf() - a.data.date.valueOf(),
);

const totalPages = Math.max(1, Math.ceil(posts.length / POSTS_PER_PAGE));
const pagePosts = posts.slice(0, POSTS_PER_PAGE);

const title = 'Home';
const description = 'Explore posts on page 1';
---

<BaseLayout title={title} description={description}>
    <section>
        <EntryGrid entries={pagePosts} basePath="/article" />
        <div class="mt-6">
            <Pagination currentPage={1} totalPages={totalPages} basePath='/page' />
        </div>
    </section>
</BaseLayout>
