<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/47cbc4e2adbc5db9-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" as="image" href="/images/posts/archive/2434BC4257A04CAC1D.jpg"/><link rel="preload" as="image" href="/images/posts/archive/runner-diagram.png"/><link rel="preload" as="image" href="https://www.docker.com/wp-content/uploads/2013/08/docker-meme.jpg"/><link rel="preload" as="image" href="/images/posts/archive/gitlab_runner_token.png"/><link rel="preload" as="image" href="/images/posts/archive/ci_variables.png"/><link rel="preload" as="image" href="/images/posts/archive/successful_build.png"/><link rel="stylesheet" href="/_next/static/css/acfb4e572a721580.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-914a75f897d55de9.js"/><script src="/_next/static/chunks/4bd1b696-7ca2760f8db741a1.js" async=""></script><script src="/_next/static/chunks/517-d1459610959eed08.js" async=""></script><script src="/_next/static/chunks/main-app-a04bf86129869b80.js" async=""></script><script src="/_next/static/chunks/967-5c5b4170e39d160c.js" async=""></script><script src="/_next/static/chunks/384-e783c629e82d2bf8.js" async=""></script><script src="/_next/static/chunks/app/layout-51091ca60201fe55.js" async=""></script><script src="/_next/static/chunks/337-5cd165e00835bfdf.js" async=""></script><script src="/_next/static/chunks/86-665701a16d36e939.js" async=""></script><script src="/_next/static/chunks/234-4d7c2d5758e6aea9.js" async=""></script><script src="/_next/static/chunks/467-6abad856c7981537.js" async=""></script><script src="/_next/static/chunks/355-bf6d392a8a2d2d59.js" async=""></script><script src="/_next/static/chunks/app/article/%5Bslug%5D/page-e6c964af98a44d22.js" async=""></script><link rel="preload" href="https://www.googletagmanager.com/gtag/js?id=314819162" as="script"/><meta name="next-size-adjust" content=""/><title>gitlab-runnner 를 활용한 docker 배포 - Yeppyshiba Blog</title><meta name="description" content="여기서는 gitlab 과 gitlab-runner (+ nexus) 를 설치하여 나도 자동적으로 빌드와 배포가 되도록 CI (Continuous Integration) / CD (Continuous Deployment) 를 구성 해보았습니다."/><meta name="keywords" content="dev, coding, git, gitlab, gitlab runner, docker, deploy, ci, cd"/><link rel="canonical" href="/article/gitlab-runner-deploy-with-docker"/><meta property="og:title" content="gitlab-runnner 를 활용한 docker 배포"/><meta property="og:description" content="여기서는 gitlab 과 gitlab-runner (+ nexus) 를 설치하여 나도 자동적으로 빌드와 배포가 되도록 CI (Continuous Integration) / CD (Continuous Deployment) 를 구성 해보았습니다."/><meta property="og:url" content="https://blog.yeppyshiba.com/article/gitlab-runner-deploy-with-docker"/><meta property="og:image" content="https://khs9628.github.io/img/infra/logo/GitLab.png"/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="gitlab-runnner 를 활용한 docker 배포"/><meta name="twitter:description" content="여기서는 gitlab 과 gitlab-runner (+ nexus) 를 설치하여 나도 자동적으로 빌드와 배포가 되도록 CI (Continuous Integration) / CD (Continuous Deployment) 를 구성 해보았습니다."/><meta name="twitter:image" content="https://khs9628.github.io/img/infra/logo/GitLab.png"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script><style data-emotion="mui-global 1onrl38">html{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;box-sizing:border-box;-webkit-text-size-adjust:100%;}*,*::before,*::after{box-sizing:inherit;}strong,b{font-weight:700;}body{margin:0;color:var(--mui-palette-text-primary);font-family:'Roboto','Roboto Fallback';font-weight:400;font-size:1rem;line-height:1.5;background-color:var(--mui-palette-background-default);}@media print{body{background-color:var(--mui-palette-common-white);}}body::backdrop{background-color:var(--mui-palette-background-default);}.light{-webkit-print-color-scheme:light;color-scheme:light;}.dark{-webkit-print-color-scheme:dark;color-scheme:dark;}</style><style data-emotion="mui-global 1d59ov3">:root{--mui-spacing:8px;--mui-shape-borderRadius:4px;--mui-shadows-0:none;--mui-shadows-1:0px 4px 16px rgba(0, 0, 0, 0.2);--mui-shadows-2:none;--mui-shadows-3:none;--mui-shadows-4:none;--mui-shadows-5:none;--mui-shadows-6:none;--mui-shadows-7:none;--mui-shadows-8:none;--mui-shadows-9:none;--mui-shadows-10:none;--mui-shadows-11:none;--mui-shadows-12:none;--mui-shadows-13:none;--mui-shadows-14:none;--mui-shadows-15:none;--mui-shadows-16:none;--mui-shadows-17:none;--mui-shadows-18:none;--mui-shadows-19:none;--mui-shadows-20:none;--mui-shadows-21:none;--mui-shadows-22:none;--mui-shadows-23:none;--mui-shadows-24:none;--mui-zIndex-mobileStepper:1000;--mui-zIndex-fab:1050;--mui-zIndex-speedDial:1050;--mui-zIndex-appBar:1100;--mui-zIndex-drawer:1200;--mui-zIndex-modal:1300;--mui-zIndex-snackbar:1400;--mui-zIndex-tooltip:1500;--mui-font-h1:300 6rem/1.167 'Roboto','Roboto Fallback';--mui-font-h2:300 3.75rem/1.2 'Roboto','Roboto Fallback';--mui-font-h3:400 3rem/1.167 'Roboto','Roboto Fallback';--mui-font-h4:400 2.125rem/1.235 'Roboto','Roboto Fallback';--mui-font-h5:400 1.5rem/1.334 'Roboto','Roboto Fallback';--mui-font-h6:500 1.25rem/1.6 'Roboto','Roboto Fallback';--mui-font-subtitle1:400 1rem/1.75 'Roboto','Roboto Fallback';--mui-font-subtitle2:500 0.875rem/1.57 'Roboto','Roboto Fallback';--mui-font-body1:400 1rem/1.5 'Roboto','Roboto Fallback';--mui-font-body2:400 0.875rem/1.43 'Roboto','Roboto Fallback';--mui-font-button:500 0.875rem/1.75 'Roboto','Roboto Fallback';--mui-font-caption:400 0.75rem/1.66 'Roboto','Roboto Fallback';--mui-font-overline:400 0.75rem/2.66 'Roboto','Roboto Fallback';--mui-font-inherit:inherit inherit/inherit inherit;}:root,.light{-webkit-print-color-scheme:light;color-scheme:light;--mui-palette-primary-light:hsl(210, 100%, 80%);--mui-palette-primary-main:hsl(210, 98%, 48%);--mui-palette-primary-dark:hsl(210, 100%, 35%);--mui-palette-primary-contrastText:hsl(210, 100%, 95%);--mui-palette-primary-mainChannel:2 122 242;--mui-palette-primary-lightChannel:153 204 255;--mui-palette-primary-darkChannel:0 89 179;--mui-palette-primary-contrastTextChannel:229 242 255;--mui-palette-common-black:#000;--mui-palette-common-white:#fff;--mui-palette-common-background:#fff;--mui-palette-common-onBackground:#000;--mui-palette-common-backgroundChannel:255 255 255;--mui-palette-common-onBackgroundChannel:0 0 0;--mui-palette-secondary-main:#9c27b0;--mui-palette-secondary-light:#ba68c8;--mui-palette-secondary-dark:#7b1fa2;--mui-palette-secondary-contrastText:#fff;--mui-palette-secondary-mainChannel:156 39 176;--mui-palette-secondary-lightChannel:186 104 200;--mui-palette-secondary-darkChannel:123 31 162;--mui-palette-secondary-contrastTextChannel:255 255 255;--mui-palette-error-main:#d32f2f;--mui-palette-error-light:#ef5350;--mui-palette-error-dark:#c62828;--mui-palette-error-contrastText:#fff;--mui-palette-error-mainChannel:211 47 47;--mui-palette-error-lightChannel:239 83 80;--mui-palette-error-darkChannel:198 40 40;--mui-palette-error-contrastTextChannel:255 255 255;--mui-palette-warning-main:#ed6c02;--mui-palette-warning-light:#ff9800;--mui-palette-warning-dark:#e65100;--mui-palette-warning-contrastText:#fff;--mui-palette-warning-mainChannel:237 108 2;--mui-palette-warning-lightChannel:255 152 0;--mui-palette-warning-darkChannel:230 81 0;--mui-palette-warning-contrastTextChannel:255 255 255;--mui-palette-info-main:#0288d1;--mui-palette-info-light:#03a9f4;--mui-palette-info-dark:#01579b;--mui-palette-info-contrastText:#fff;--mui-palette-info-mainChannel:2 136 209;--mui-palette-info-lightChannel:3 169 244;--mui-palette-info-darkChannel:1 87 155;--mui-palette-info-contrastTextChannel:255 255 255;--mui-palette-success-main:#2e7d32;--mui-palette-success-light:#4caf50;--mui-palette-success-dark:#1b5e20;--mui-palette-success-contrastText:#fff;--mui-palette-success-mainChannel:46 125 50;--mui-palette-success-lightChannel:76 175 80;--mui-palette-success-darkChannel:27 94 32;--mui-palette-success-contrastTextChannel:255 255 255;--mui-palette-grey-50:#fafafa;--mui-palette-grey-100:#f5f5f5;--mui-palette-grey-200:#eeeeee;--mui-palette-grey-300:#e0e0e0;--mui-palette-grey-400:#bdbdbd;--mui-palette-grey-500:#9e9e9e;--mui-palette-grey-600:#757575;--mui-palette-grey-700:#616161;--mui-palette-grey-800:#424242;--mui-palette-grey-900:#212121;--mui-palette-grey-A100:#f5f5f5;--mui-palette-grey-A200:#eeeeee;--mui-palette-grey-A400:#bdbdbd;--mui-palette-grey-A700:#616161;--mui-palette-text-primary:rgba(0, 0, 0, 0.87);--mui-palette-text-secondary:rgba(0, 0, 0, 0.6);--mui-palette-text-disabled:rgba(0, 0, 0, 0.38);--mui-palette-text-primaryChannel:0 0 0;--mui-palette-text-secondaryChannel:0 0 0;--mui-palette-divider:rgba(0, 0, 0, 0.12);--mui-palette-background-paper:#fff;--mui-palette-background-default:#fff;--mui-palette-background-defaultChannel:255 255 255;--mui-palette-background-paperChannel:255 255 255;--mui-palette-action-active:rgba(0, 0, 0, 0.54);--mui-palette-action-hover:rgba(0, 0, 0, 0.04);--mui-palette-action-hoverOpacity:0.04;--mui-palette-action-selected:rgba(0, 0, 0, 0.08);--mui-palette-action-selectedOpacity:0.08;--mui-palette-action-disabled:rgba(0, 0, 0, 0.26);--mui-palette-action-disabledBackground:rgba(0, 0, 0, 0.12);--mui-palette-action-disabledOpacity:0.38;--mui-palette-action-focus:rgba(0, 0, 0, 0.12);--mui-palette-action-focusOpacity:0.12;--mui-palette-action-activatedOpacity:0.12;--mui-palette-action-activeChannel:0 0 0;--mui-palette-action-selectedChannel:0 0 0;--mui-palette-Alert-errorColor:rgb(95, 33, 32);--mui-palette-Alert-infoColor:rgb(1, 67, 97);--mui-palette-Alert-successColor:rgb(30, 70, 32);--mui-palette-Alert-warningColor:rgb(102, 60, 0);--mui-palette-Alert-errorFilledBg:var(--mui-palette-error-main, #d32f2f);--mui-palette-Alert-infoFilledBg:var(--mui-palette-info-main, #0288d1);--mui-palette-Alert-successFilledBg:var(--mui-palette-success-main, #2e7d32);--mui-palette-Alert-warningFilledBg:var(--mui-palette-warning-main, #ed6c02);--mui-palette-Alert-errorFilledColor:#fff;--mui-palette-Alert-infoFilledColor:#fff;--mui-palette-Alert-successFilledColor:#fff;--mui-palette-Alert-warningFilledColor:#fff;--mui-palette-Alert-errorStandardBg:rgb(253, 237, 237);--mui-palette-Alert-infoStandardBg:rgb(229, 246, 253);--mui-palette-Alert-successStandardBg:rgb(237, 247, 237);--mui-palette-Alert-warningStandardBg:rgb(255, 244, 229);--mui-palette-Alert-errorIconColor:var(--mui-palette-error-main, #d32f2f);--mui-palette-Alert-infoIconColor:var(--mui-palette-info-main, #0288d1);--mui-palette-Alert-successIconColor:var(--mui-palette-success-main, #2e7d32);--mui-palette-Alert-warningIconColor:var(--mui-palette-warning-main, #ed6c02);--mui-palette-AppBar-defaultBg:var(--mui-palette-grey-100, #f5f5f5);--mui-palette-Avatar-defaultBg:var(--mui-palette-grey-400, #bdbdbd);--mui-palette-Button-inheritContainedBg:var(--mui-palette-grey-300, #e0e0e0);--mui-palette-Button-inheritContainedHoverBg:var(--mui-palette-grey-A100, #f5f5f5);--mui-palette-Chip-defaultBorder:var(--mui-palette-grey-400, #bdbdbd);--mui-palette-Chip-defaultAvatarColor:var(--mui-palette-grey-700, #616161);--mui-palette-Chip-defaultIconColor:var(--mui-palette-grey-700, #616161);--mui-palette-FilledInput-bg:rgba(0, 0, 0, 0.06);--mui-palette-FilledInput-hoverBg:rgba(0, 0, 0, 0.09);--mui-palette-FilledInput-disabledBg:rgba(0, 0, 0, 0.12);--mui-palette-LinearProgress-primaryBg:hsl(210, 98%, 80.24000000000001%);--mui-palette-LinearProgress-secondaryBg:rgb(217, 172, 224);--mui-palette-LinearProgress-errorBg:rgb(238, 175, 175);--mui-palette-LinearProgress-infoBg:rgb(158, 209, 237);--mui-palette-LinearProgress-successBg:rgb(175, 205, 177);--mui-palette-LinearProgress-warningBg:rgb(248, 199, 158);--mui-palette-Skeleton-bg:rgba(var(--mui-palette-text-primaryChannel, undefined) / 0.11);--mui-palette-Slider-primaryTrack:hsl(210, 98%, 80.24000000000001%);--mui-palette-Slider-secondaryTrack:rgb(217, 172, 224);--mui-palette-Slider-errorTrack:rgb(238, 175, 175);--mui-palette-Slider-infoTrack:rgb(158, 209, 237);--mui-palette-Slider-successTrack:rgb(175, 205, 177);--mui-palette-Slider-warningTrack:rgb(248, 199, 158);--mui-palette-SnackbarContent-bg:rgb(50, 50, 50);--mui-palette-SnackbarContent-color:#fff;--mui-palette-SpeedDialAction-fabHoverBg:rgb(216, 216, 216);--mui-palette-StepConnector-border:var(--mui-palette-grey-400, #bdbdbd);--mui-palette-StepContent-border:var(--mui-palette-grey-400, #bdbdbd);--mui-palette-Switch-defaultColor:var(--mui-palette-common-white, #fff);--mui-palette-Switch-defaultDisabledColor:var(--mui-palette-grey-100, #f5f5f5);--mui-palette-Switch-primaryDisabledColor:hsl(210, 98%, 80.24000000000001%);--mui-palette-Switch-secondaryDisabledColor:rgb(217, 172, 224);--mui-palette-Switch-errorDisabledColor:rgb(238, 175, 175);--mui-palette-Switch-infoDisabledColor:rgb(158, 209, 237);--mui-palette-Switch-successDisabledColor:rgb(175, 205, 177);--mui-palette-Switch-warningDisabledColor:rgb(248, 199, 158);--mui-palette-TableCell-border:rgba(224, 224, 224, 1);--mui-palette-Tooltip-bg:rgba(97, 97, 97, 0.92);--mui-palette-dividerChannel:0 0 0;--mui-opacity-inputPlaceholder:0.42;--mui-opacity-inputUnderline:0.42;--mui-opacity-switchTrackDisabled:0.12;--mui-opacity-switchTrack:0.38;}.dark{-webkit-print-color-scheme:dark;color-scheme:dark;--mui-palette-common-black:#000;--mui-palette-common-white:#fff;--mui-palette-common-background:#000;--mui-palette-common-onBackground:#fff;--mui-palette-common-backgroundChannel:0 0 0;--mui-palette-common-onBackgroundChannel:255 255 255;--mui-palette-primary-main:#90caf9;--mui-palette-primary-light:#e3f2fd;--mui-palette-primary-dark:#42a5f5;--mui-palette-primary-contrastText:rgba(0, 0, 0, 0.87);--mui-palette-primary-mainChannel:144 202 249;--mui-palette-primary-lightChannel:227 242 253;--mui-palette-primary-darkChannel:66 165 245;--mui-palette-primary-contrastTextChannel:0 0 0;--mui-palette-secondary-main:#ce93d8;--mui-palette-secondary-light:#f3e5f5;--mui-palette-secondary-dark:#ab47bc;--mui-palette-secondary-contrastText:rgba(0, 0, 0, 0.87);--mui-palette-secondary-mainChannel:206 147 216;--mui-palette-secondary-lightChannel:243 229 245;--mui-palette-secondary-darkChannel:171 71 188;--mui-palette-secondary-contrastTextChannel:0 0 0;--mui-palette-error-main:#f44336;--mui-palette-error-light:#e57373;--mui-palette-error-dark:#d32f2f;--mui-palette-error-contrastText:#fff;--mui-palette-error-mainChannel:244 67 54;--mui-palette-error-lightChannel:229 115 115;--mui-palette-error-darkChannel:211 47 47;--mui-palette-error-contrastTextChannel:255 255 255;--mui-palette-warning-main:#ffa726;--mui-palette-warning-light:#ffb74d;--mui-palette-warning-dark:#f57c00;--mui-palette-warning-contrastText:rgba(0, 0, 0, 0.87);--mui-palette-warning-mainChannel:255 167 38;--mui-palette-warning-lightChannel:255 183 77;--mui-palette-warning-darkChannel:245 124 0;--mui-palette-warning-contrastTextChannel:0 0 0;--mui-palette-info-main:#29b6f6;--mui-palette-info-light:#4fc3f7;--mui-palette-info-dark:#0288d1;--mui-palette-info-contrastText:rgba(0, 0, 0, 0.87);--mui-palette-info-mainChannel:41 182 246;--mui-palette-info-lightChannel:79 195 247;--mui-palette-info-darkChannel:2 136 209;--mui-palette-info-contrastTextChannel:0 0 0;--mui-palette-success-main:#66bb6a;--mui-palette-success-light:#81c784;--mui-palette-success-dark:#388e3c;--mui-palette-success-contrastText:rgba(0, 0, 0, 0.87);--mui-palette-success-mainChannel:102 187 106;--mui-palette-success-lightChannel:129 199 132;--mui-palette-success-darkChannel:56 142 60;--mui-palette-success-contrastTextChannel:0 0 0;--mui-palette-grey-50:#fafafa;--mui-palette-grey-100:#f5f5f5;--mui-palette-grey-200:#eeeeee;--mui-palette-grey-300:#e0e0e0;--mui-palette-grey-400:#bdbdbd;--mui-palette-grey-500:#9e9e9e;--mui-palette-grey-600:#757575;--mui-palette-grey-700:#616161;--mui-palette-grey-800:#424242;--mui-palette-grey-900:#212121;--mui-palette-grey-A100:#f5f5f5;--mui-palette-grey-A200:#eeeeee;--mui-palette-grey-A400:#bdbdbd;--mui-palette-grey-A700:#616161;--mui-palette-text-primary:#fff;--mui-palette-text-secondary:rgba(255, 255, 255, 0.7);--mui-palette-text-disabled:rgba(255, 255, 255, 0.5);--mui-palette-text-icon:rgba(255, 255, 255, 0.5);--mui-palette-text-primaryChannel:255 255 255;--mui-palette-text-secondaryChannel:255 255 255;--mui-palette-divider:rgba(255, 255, 255, 0.12);--mui-palette-background-paper:#121212;--mui-palette-background-default:#121212;--mui-palette-background-defaultChannel:18 18 18;--mui-palette-background-paperChannel:18 18 18;--mui-palette-action-active:#fff;--mui-palette-action-hover:rgba(255, 255, 255, 0.08);--mui-palette-action-hoverOpacity:0.08;--mui-palette-action-selected:rgba(255, 255, 255, 0.16);--mui-palette-action-selectedOpacity:0.16;--mui-palette-action-disabled:rgba(255, 255, 255, 0.3);--mui-palette-action-disabledBackground:rgba(255, 255, 255, 0.12);--mui-palette-action-disabledOpacity:0.38;--mui-palette-action-focus:rgba(255, 255, 255, 0.12);--mui-palette-action-focusOpacity:0.12;--mui-palette-action-activatedOpacity:0.24;--mui-palette-action-activeChannel:255 255 255;--mui-palette-action-selectedChannel:255 255 255;--mui-palette-Alert-errorColor:rgb(244, 199, 199);--mui-palette-Alert-infoColor:rgb(184, 231, 251);--mui-palette-Alert-successColor:rgb(204, 232, 205);--mui-palette-Alert-warningColor:rgb(255, 226, 183);--mui-palette-Alert-errorFilledBg:var(--mui-palette-error-dark, #d32f2f);--mui-palette-Alert-infoFilledBg:var(--mui-palette-info-dark, #0288d1);--mui-palette-Alert-successFilledBg:var(--mui-palette-success-dark, #388e3c);--mui-palette-Alert-warningFilledBg:var(--mui-palette-warning-dark, #f57c00);--mui-palette-Alert-errorFilledColor:#fff;--mui-palette-Alert-infoFilledColor:#fff;--mui-palette-Alert-successFilledColor:#fff;--mui-palette-Alert-warningFilledColor:rgba(0, 0, 0, 0.87);--mui-palette-Alert-errorStandardBg:rgb(22, 11, 11);--mui-palette-Alert-infoStandardBg:rgb(7, 19, 24);--mui-palette-Alert-successStandardBg:rgb(12, 19, 13);--mui-palette-Alert-warningStandardBg:rgb(25, 18, 7);--mui-palette-Alert-errorIconColor:var(--mui-palette-error-main, #f44336);--mui-palette-Alert-infoIconColor:var(--mui-palette-info-main, #29b6f6);--mui-palette-Alert-successIconColor:var(--mui-palette-success-main, #66bb6a);--mui-palette-Alert-warningIconColor:var(--mui-palette-warning-main, #ffa726);--mui-palette-AppBar-defaultBg:var(--mui-palette-grey-900, #212121);--mui-palette-AppBar-darkBg:var(--mui-palette-background-paper, #121212);--mui-palette-AppBar-darkColor:var(--mui-palette-text-primary, #fff);--mui-palette-Avatar-defaultBg:var(--mui-palette-grey-600, #757575);--mui-palette-Button-inheritContainedBg:var(--mui-palette-grey-800, #424242);--mui-palette-Button-inheritContainedHoverBg:var(--mui-palette-grey-700, #616161);--mui-palette-Chip-defaultBorder:var(--mui-palette-grey-700, #616161);--mui-palette-Chip-defaultAvatarColor:var(--mui-palette-grey-300, #e0e0e0);--mui-palette-Chip-defaultIconColor:var(--mui-palette-grey-300, #e0e0e0);--mui-palette-FilledInput-bg:rgba(255, 255, 255, 0.09);--mui-palette-FilledInput-hoverBg:rgba(255, 255, 255, 0.13);--mui-palette-FilledInput-disabledBg:rgba(255, 255, 255, 0.12);--mui-palette-LinearProgress-primaryBg:rgb(72, 101, 124);--mui-palette-LinearProgress-secondaryBg:rgb(103, 73, 108);--mui-palette-LinearProgress-errorBg:rgb(122, 33, 27);--mui-palette-LinearProgress-infoBg:rgb(20, 91, 123);--mui-palette-LinearProgress-successBg:rgb(51, 93, 53);--mui-palette-LinearProgress-warningBg:rgb(127, 83, 19);--mui-palette-Skeleton-bg:rgba(var(--mui-palette-text-primaryChannel, undefined) / 0.13);--mui-palette-Slider-primaryTrack:rgb(72, 101, 124);--mui-palette-Slider-secondaryTrack:rgb(103, 73, 108);--mui-palette-Slider-errorTrack:rgb(122, 33, 27);--mui-palette-Slider-infoTrack:rgb(20, 91, 123);--mui-palette-Slider-successTrack:rgb(51, 93, 53);--mui-palette-Slider-warningTrack:rgb(127, 83, 19);--mui-palette-SnackbarContent-bg:rgb(250, 250, 250);--mui-palette-SnackbarContent-color:rgba(0, 0, 0, 0.87);--mui-palette-SpeedDialAction-fabHoverBg:rgb(53, 53, 53);--mui-palette-StepConnector-border:var(--mui-palette-grey-600, #757575);--mui-palette-StepContent-border:var(--mui-palette-grey-600, #757575);--mui-palette-Switch-defaultColor:var(--mui-palette-grey-300, #e0e0e0);--mui-palette-Switch-defaultDisabledColor:var(--mui-palette-grey-600, #757575);--mui-palette-Switch-primaryDisabledColor:rgb(64, 90, 112);--mui-palette-Switch-secondaryDisabledColor:rgb(92, 66, 97);--mui-palette-Switch-errorDisabledColor:rgb(109, 30, 24);--mui-palette-Switch-infoDisabledColor:rgb(18, 81, 110);--mui-palette-Switch-successDisabledColor:rgb(45, 84, 47);--mui-palette-Switch-warningDisabledColor:rgb(114, 75, 17);--mui-palette-TableCell-border:rgba(81, 81, 81, 1);--mui-palette-Tooltip-bg:rgba(97, 97, 97, 0.92);--mui-palette-dividerChannel:255 255 255;--mui-opacity-inputPlaceholder:0.5;--mui-opacity-inputUnderline:0.7;--mui-opacity-switchTrackDisabled:0.2;--mui-opacity-switchTrack:0.3;--mui-overlays-0:none;--mui-overlays-1:linear-gradient(rgba(255 255 255 / 0.051), rgba(255 255 255 / 0.051));--mui-overlays-2:linear-gradient(rgba(255 255 255 / 0.069), rgba(255 255 255 / 0.069));--mui-overlays-3:linear-gradient(rgba(255 255 255 / 0.082), rgba(255 255 255 / 0.082));--mui-overlays-4:linear-gradient(rgba(255 255 255 / 0.092), rgba(255 255 255 / 0.092));--mui-overlays-5:linear-gradient(rgba(255 255 255 / 0.101), rgba(255 255 255 / 0.101));--mui-overlays-6:linear-gradient(rgba(255 255 255 / 0.108), rgba(255 255 255 / 0.108));--mui-overlays-7:linear-gradient(rgba(255 255 255 / 0.114), rgba(255 255 255 / 0.114));--mui-overlays-8:linear-gradient(rgba(255 255 255 / 0.119), rgba(255 255 255 / 0.119));--mui-overlays-9:linear-gradient(rgba(255 255 255 / 0.124), rgba(255 255 255 / 0.124));--mui-overlays-10:linear-gradient(rgba(255 255 255 / 0.128), rgba(255 255 255 / 0.128));--mui-overlays-11:linear-gradient(rgba(255 255 255 / 0.132), rgba(255 255 255 / 0.132));--mui-overlays-12:linear-gradient(rgba(255 255 255 / 0.135), rgba(255 255 255 / 0.135));--mui-overlays-13:linear-gradient(rgba(255 255 255 / 0.139), rgba(255 255 255 / 0.139));--mui-overlays-14:linear-gradient(rgba(255 255 255 / 0.142), rgba(255 255 255 / 0.142));--mui-overlays-15:linear-gradient(rgba(255 255 255 / 0.145), rgba(255 255 255 / 0.145));--mui-overlays-16:linear-gradient(rgba(255 255 255 / 0.147), rgba(255 255 255 / 0.147));--mui-overlays-17:linear-gradient(rgba(255 255 255 / 0.15), rgba(255 255 255 / 0.15));--mui-overlays-18:linear-gradient(rgba(255 255 255 / 0.152), rgba(255 255 255 / 0.152));--mui-overlays-19:linear-gradient(rgba(255 255 255 / 0.155), rgba(255 255 255 / 0.155));--mui-overlays-20:linear-gradient(rgba(255 255 255 / 0.157), rgba(255 255 255 / 0.157));--mui-overlays-21:linear-gradient(rgba(255 255 255 / 0.159), rgba(255 255 255 / 0.159));--mui-overlays-22:linear-gradient(rgba(255 255 255 / 0.161), rgba(255 255 255 / 0.161));--mui-overlays-23:linear-gradient(rgba(255 255 255 / 0.163), rgba(255 255 255 / 0.163));--mui-overlays-24:linear-gradient(rgba(255 255 255 / 0.165), rgba(255 255 255 / 0.165));}</style><style data-emotion="mui 1311z1u 1mnez1d uja1mx yqk6l4 1lvtzne drdryf r60kfm iguwhy xljsu8 1fvv1hx 6ki1e 1t6c9ts 1e0kt1a w17fj4 2uchni 14bajpy 1uabrif nlgmj9 14z39eb 18r2op7 1raxvbb rvxo1x gww4bo 1xaymri r92vv6 ade5no 1nf3c94 yv5sv0 1nvar7l m8wt5d l0rc0k fz15h5 146xefr 16cx2wp 16ihh5y kun1yw 1v8thds opyaud 502ms 1renb1b 1r1sdzk 11rftqn oruufx 3c1zt0 hbwrxa qtgrje ds3kc v8vxr3 2qghsv 0 1elvlk4 1rzsytz s4zxv0 lh0r68 y6j1my 1nqz4u4 848oh1 1w3ufwa 1330fmt hvpbdf 14vsv3w dqhe93 ccs6u0 hc3v22 irj99j 1n1o1p6 15ryrsv xq12hq 2ns073 1etjvc6 ew9xcw 11qhvf2 zt7ovo 178ndn6 1oyp1ud">.mui-1311z1u{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;box-sizing:border-box;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;position:fixed;z-index:var(--mui-zIndex-appBar);top:0;left:auto;right:0;--AppBar-background:var(--mui-palette-primary-main);--AppBar-color:var(--mui-palette-primary-contrastText);background-color:var(--AppBar-background);color:var(--AppBar-color);-webkit-transition:background-color 0.3s ease;transition:background-color 0.3s ease;background-color:transparent;}@media print{.mui-1311z1u{position:absolute;}}*:where(.dark) .mui-1311z1u{-webkit-transition:background-color 0.3s ease;transition:background-color 0.3s ease;background-color:transparent;}.mui-1mnez1d{background-color:var(--mui-palette-background-paper);color:var(--mui-palette-text-primary);-webkit-transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;box-shadow:var(--Paper-shadow);background-image:var(--Paper-overlay);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;box-sizing:border-box;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;position:fixed;z-index:var(--mui-zIndex-appBar);top:0;left:auto;right:0;--AppBar-background:var(--mui-palette-primary-main);--AppBar-color:var(--mui-palette-primary-contrastText);background-color:var(--AppBar-background);color:var(--AppBar-color);-webkit-transition:background-color 0.3s ease;transition:background-color 0.3s ease;background-color:transparent;}@media print{.mui-1mnez1d{position:absolute;}}*:where(.dark) .mui-1mnez1d{-webkit-transition:background-color 0.3s ease;transition:background-color 0.3s ease;background-color:transparent;}.mui-uja1mx{width:100%;margin-left:auto;box-sizing:border-box;margin-right:auto;padding-left:calc(2 * var(--mui-spacing));padding-right:calc(2 * var(--mui-spacing));}@media (min-width:600px){.mui-uja1mx{padding-left:calc(3 * var(--mui-spacing));padding-right:calc(3 * var(--mui-spacing));}}@media (min-width:1536px){.mui-uja1mx{max-width:1536px;}}.mui-yqk6l4{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;min-height:56px;}@media (min-width:0px){@media (orientation: landscape){.mui-yqk6l4{min-height:48px;}}}@media (min-width:600px){.mui-yqk6l4{min-height:64px;}}.mui-1lvtzne{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}@media (min-width:0px){.mui-1lvtzne{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}@media (min-width:900px){.mui-1lvtzne{display:none;}}.mui-drdryf{text-align:center;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:1.5rem;padding:8px;border-radius:50%;color:var(--mui-palette-action-active);-webkit-transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;--IconButton-hoverBg:rgba(var(--mui-palette-action-activeChannel) / var(--mui-palette-action-hoverOpacity));margin-left:-12px;color:inherit;padding:12px;font-size:1.75rem;}.mui-drdryf:hover{background-color:var(--IconButton-hoverBg);}@media (hover: none){.mui-drdryf:hover{background-color:transparent;}}.mui-drdryf.Mui-disabled{background-color:transparent;color:var(--mui-palette-action-disabled);}.mui-r60kfm{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;text-align:center;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:1.5rem;padding:8px;border-radius:50%;color:var(--mui-palette-action-active);-webkit-transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;--IconButton-hoverBg:rgba(var(--mui-palette-action-activeChannel) / var(--mui-palette-action-hoverOpacity));margin-left:-12px;color:inherit;padding:12px;font-size:1.75rem;}.mui-r60kfm::-moz-focus-inner{border-style:none;}.mui-r60kfm.Mui-disabled{pointer-events:none;cursor:default;}@media print{.mui-r60kfm{-webkit-print-color-adjust:exact;color-adjust:exact;}}.mui-r60kfm:hover{background-color:var(--IconButton-hoverBg);}@media (hover: none){.mui-r60kfm:hover{background-color:transparent;}}.mui-r60kfm.Mui-disabled{background-color:transparent;color:var(--mui-palette-action-disabled);}.mui-iguwhy{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;fill:currentColor;font-size:1.5rem;}.mui-xljsu8{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-right:calc(2 * var(--mui-spacing));}@media (min-width:0px){.mui-xljsu8{display:none;}}@media (min-width:900px){.mui-xljsu8{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.mui-1fvv1hx{margin:0;font-family:'Roboto','Roboto Fallback';font-weight:500;font-size:1.125rem;line-height:1.6;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}@media (min-width:600px){.mui-1fvv1hx{font-size:1.25rem;}}@media (min-width:900px){.mui-1fvv1hx{font-size:1.25rem;}}@media (min-width:1200px){.mui-1fvv1hx{font-size:1.25rem;}}.mui-6ki1e{margin:0;font-family:'Roboto','Roboto Fallback';font-weight:400;font-size:1rem;line-height:1.5;margin-left:calc(1 * var(--mui-spacing));}.mui-1t6c9ts{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}@media (min-width:0px){.mui-1t6c9ts{display:none;}}@media (min-width:900px){.mui-1t6c9ts{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}.mui-1e0kt1a{font-family:'Roboto','Roboto Fallback';font-weight:500;font-size:0.875rem;line-height:1.75;text-transform:uppercase;min-width:64px;padding:6px 16px;border:0;border-radius:var(--mui-shape-borderRadius);-webkit-transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;padding:6px 8px;color:var(--variant-textColor);background-color:var(--variant-textBg);--variant-textColor:var(--mui-palette-primary-main);--variant-outlinedColor:var(--mui-palette-primary-main);--variant-outlinedBorder:rgba(var(--mui-palette-primary-mainChannel) / 0.5);--variant-containedColor:var(--mui-palette-primary-contrastText);--variant-containedBg:var(--mui-palette-primary-main);padding:4px 5px;font-size:0.8125rem;display:block;text-transform:none;-webkit-text-decoration:none;text-decoration:none;}.mui-1e0kt1a:hover{-webkit-text-decoration:none;text-decoration:none;}.mui-1e0kt1a.Mui-disabled{color:var(--mui-palette-action-disabled);}@media (hover: hover){.mui-1e0kt1a:hover{--variant-containedBg:var(--mui-palette-primary-dark);--variant-textBg:rgba(var(--mui-palette-primary-mainChannel) / var(--mui-palette-action-hoverOpacity));--variant-outlinedBorder:var(--mui-palette-primary-main);--variant-outlinedBg:rgba(var(--mui-palette-primary-mainChannel) / var(--mui-palette-action-hoverOpacity));}}.mui-w17fj4{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;font-family:'Roboto','Roboto Fallback';font-weight:500;font-size:0.875rem;line-height:1.75;text-transform:uppercase;min-width:64px;padding:6px 16px;border:0;border-radius:var(--mui-shape-borderRadius);-webkit-transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;padding:6px 8px;color:var(--variant-textColor);background-color:var(--variant-textBg);--variant-textColor:var(--mui-palette-primary-main);--variant-outlinedColor:var(--mui-palette-primary-main);--variant-outlinedBorder:rgba(var(--mui-palette-primary-mainChannel) / 0.5);--variant-containedColor:var(--mui-palette-primary-contrastText);--variant-containedBg:var(--mui-palette-primary-main);padding:4px 5px;font-size:0.8125rem;display:block;text-transform:none;-webkit-text-decoration:none;text-decoration:none;}.mui-w17fj4::-moz-focus-inner{border-style:none;}.mui-w17fj4.Mui-disabled{pointer-events:none;cursor:default;}@media print{.mui-w17fj4{-webkit-print-color-adjust:exact;color-adjust:exact;}}.mui-w17fj4:hover{-webkit-text-decoration:none;text-decoration:none;}.mui-w17fj4.Mui-disabled{color:var(--mui-palette-action-disabled);}@media (hover: hover){.mui-w17fj4:hover{--variant-containedBg:var(--mui-palette-primary-dark);--variant-textBg:rgba(var(--mui-palette-primary-mainChannel) / var(--mui-palette-action-hoverOpacity));--variant-outlinedBorder:var(--mui-palette-primary-main);--variant-outlinedBg:rgba(var(--mui-palette-primary-mainChannel) / var(--mui-palette-action-hoverOpacity));}}.mui-2uchni{-webkit-box-flex:0;-webkit-flex-grow:0;-ms-flex-positive:0;flex-grow:0;}.mui-14bajpy{text-align:center;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:1.5rem;padding:8px;border-radius:50%;color:var(--mui-palette-action-active);-webkit-transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;--IconButton-hoverBg:rgba(var(--mui-palette-action-activeChannel) / var(--mui-palette-action-hoverOpacity));}.mui-14bajpy:hover{background-color:var(--IconButton-hoverBg);}@media (hover: none){.mui-14bajpy:hover{background-color:transparent;}}.mui-14bajpy.Mui-disabled{background-color:transparent;color:var(--mui-palette-action-disabled);}.mui-1uabrif{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;text-align:center;-webkit-flex:0 0 auto;-ms-flex:0 0 auto;flex:0 0 auto;font-size:1.5rem;padding:8px;border-radius:50%;color:var(--mui-palette-action-active);-webkit-transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;--IconButton-hoverBg:rgba(var(--mui-palette-action-activeChannel) / var(--mui-palette-action-hoverOpacity));}.mui-1uabrif::-moz-focus-inner{border-style:none;}.mui-1uabrif.Mui-disabled{pointer-events:none;cursor:default;}@media print{.mui-1uabrif{-webkit-print-color-adjust:exact;color-adjust:exact;}}.mui-1uabrif:hover{background-color:var(--IconButton-hoverBg);}@media (hover: none){.mui-1uabrif:hover{background-color:transparent;}}.mui-1uabrif.Mui-disabled{background-color:transparent;color:var(--mui-palette-action-disabled);}.mui-nlgmj9{z-index:var(--mui-zIndex-drawer);}.mui-14z39eb{position:fixed;top:0;left:0;height:4px;background-color:var(--mui-palette-primary-main);width:0%;z-index:9999;-webkit-transition:width 0.1s ease-out;transition:width 0.1s ease-out;}.mui-18r2op7{height:25em;position:relative;overflow:hidden;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;text-align:center;margin-bottom:calc(4 * var(--mui-spacing));}.mui-1raxvbb{position:absolute;top:50%;left:50%;z-index:2;-webkit-transform:translate(-50%, -50%);-moz-transform:translate(-50%, -50%);-ms-transform:translate(-50%, -50%);transform:translate(-50%, -50%);}.mui-rvxo1x{margin:0;font-family:'Roboto','Roboto Fallback';font-weight:400;font-size:1.5625rem;line-height:1.235;margin-bottom:0.35em;text-wrap:balance;}@media (min-width:600px){.mui-rvxo1x{font-size:1.8219rem;}}@media (min-width:900px){.mui-rvxo1x{font-size:2.0243rem;}}@media (min-width:1200px){.mui-rvxo1x{font-size:2.0243rem;}}.mui-gww4bo{margin-top:calc(1 * var(--mui-spacing));}.mui-1xaymri{margin:0;font-family:'Roboto','Roboto Fallback';font-weight:400;font-size:0.75rem;line-height:1.66;margin-right:calc(2 * var(--mui-spacing));}.mui-r92vv6{padding-top:calc(4 * var(--mui-spacing));padding-bottom:calc(4 * var(--mui-spacing));}.mui-ade5no{margin:0;font-family:'Roboto','Roboto Fallback';font-weight:300;font-size:2.375rem;line-height:1.2;margin-top:calc(3 * var(--mui-spacing));margin-bottom:calc(3 * var(--mui-spacing));}@media (min-width:600px){.mui-ade5no{font-size:3.125rem;}}@media (min-width:900px){.mui-ade5no{font-size:3.3333rem;}}@media (min-width:1200px){.mui-ade5no{font-size:3.75rem;}}.mui-1nf3c94{margin:0;font-family:'Roboto','Roboto Fallback';font-weight:400;font-size:1rem;line-height:1.5;margin-top:calc(4 * var(--mui-spacing));margin-bottom:calc(4 * var(--mui-spacing));}.mui-yv5sv0{margin-top:calc(4 * var(--mui-spacing));margin-bottom:calc(4 * var(--mui-spacing));}.mui-1nvar7l{max-width:100%;margin-left:auto;margin-right:auto;}.mui-m8wt5d{max-width:100%;display:block;margin-top:calc(2 * var(--mui-spacing));margin-bottom:calc(2 * var(--mui-spacing));margin-left:auto;margin-right:auto;}.mui-l0rc0k{margin:0;font-family:'Roboto','Roboto Fallback';font-weight:400;font-size:0.75rem;line-height:1.66;text-align:var(--Typography-textAlign);margin-top:calc(1 * var(--mui-spacing));}.mui-fz15h5{list-style:none;margin:0;padding:0;position:relative;padding-top:8px;padding-bottom:8px;list-style-type:decimal;padding-left:calc(3 * var(--mui-spacing));}.mui-fz15h5>li{display:-webkit-box;display:-webkit-list-item;display:-ms-list-itembox;display:list-item;}.mui-146xefr{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;-webkit-text-decoration:none;text-decoration:none;width:100%;box-sizing:border-box;text-align:left;padding-top:8px;padding-bottom:8px;padding-left:16px;padding-right:16px;}.mui-16cx2wp{list-style:none;margin:0;padding:0;position:relative;padding-top:8px;padding-bottom:8px;list-style:disc;padding-left:calc(3 * var(--mui-spacing));}.mui-16cx2wp>li{display:-webkit-box;display:-webkit-list-item;display:-ms-list-itembox;display:list-item;}.mui-16ihh5y{margin:0;font-family:'Roboto','Roboto Fallback';font-weight:400;font-size:2rem;line-height:1.167;margin-top:calc(3 * var(--mui-spacing));margin-bottom:calc(3 * var(--mui-spacing));}@media (min-width:600px){.mui-16ihh5y{font-size:2.5707rem;}}@media (min-width:900px){.mui-16ihh5y{font-size:2.7849rem;}}@media (min-width:1200px){.mui-16ihh5y{font-size:2.9991rem;}}.mui-kun1yw{-webkit-text-decoration:underline;text-decoration:underline;text-decoration-color:var(--Link-underlineColor);--Link-underlineColor:rgba(var(--mui-palette-primary-mainChannel) / 0.4);-webkit-text-decoration:none;text-decoration:none;color:palette.link.main;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:calc(0.5 * var(--mui-spacing));-webkit-text-decoration:none;text-decoration:none;}.mui-kun1yw:hover{text-decoration-color:inherit;}.mui-kun1yw:hover{color:palette.link.hover;-webkit-text-decoration:underline;text-decoration:underline;}.mui-kun1yw:visited{color:palette.link.visited;}.mui-1v8thds{margin:0;font:inherit;line-height:inherit;letter-spacing:inherit;color:var(--mui-palette-primary-main);-webkit-text-decoration:underline;text-decoration:underline;text-decoration-color:var(--Link-underlineColor);--Link-underlineColor:rgba(var(--mui-palette-primary-mainChannel) / 0.4);-webkit-text-decoration:none;text-decoration:none;color:palette.link.main;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:calc(0.5 * var(--mui-spacing));-webkit-text-decoration:none;text-decoration:none;}.mui-1v8thds:hover{text-decoration-color:inherit;}.mui-1v8thds:hover{color:palette.link.hover;-webkit-text-decoration:underline;text-decoration:underline;}.mui-1v8thds:visited{color:palette.link.visited;}.mui-opyaud{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:1em;height:1em;display:inline-block;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-transition:fill 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:fill 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;fill:currentColor;font-size:inherit;vertical-align:middle;}.mui-502ms{border-left:4px solid #ccc;padding-left:calc(2 * var(--mui-spacing));margin-left:calc(0 * var(--mui-spacing));margin-top:calc(2 * var(--mui-spacing));margin-bottom:calc(2 * var(--mui-spacing));color:var(--mui-palette-text-secondary);}.mui-1renb1b{position:relative;margin-top:calc(4 * var(--mui-spacing));margin-bottom:calc(4 * var(--mui-spacing));border:1px solid;border-color:var(--mui-palette-grey-300);border-radius:calc(1 * var(--mui-shape-borderRadius));}.mui-1r1sdzk{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:calc(1 * var(--mui-spacing));}.mui-11rftqn{max-width:100%;font-family:'Roboto','Roboto Fallback';font-size:0.8125rem;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;height:32px;color:var(--mui-palette-text-primary);background-color:var(--mui-palette-action-selected);border-radius:16px;white-space:nowrap;-webkit-transition:background-color 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;cursor:unset;outline:0;-webkit-text-decoration:none;text-decoration:none;border:0;padding:0;vertical-align:middle;box-sizing:border-box;height:24px;background-color:var(--mui-palette-primary-main);color:var(--mui-palette-primary-contrastText);background-color:transparent;border:1px solid var(--mui-palette-Chip-defaultBorder);color:var(--mui-palette-primary-main);border:1px solid rgba(var(--mui-palette-primary-mainChannel) / 0.7);}.mui-11rftqn.Mui-disabled{opacity:var(--mui-palette-action-disabledOpacity);pointer-events:none;}.mui-11rftqn .MuiChip-avatar{margin-left:5px;margin-right:-6px;width:24px;height:24px;color:var(--mui-palette-Chip-defaultAvatarColor);font-size:0.75rem;}.mui-11rftqn .MuiChip-avatarColorPrimary{color:var(--mui-palette-primary-contrastText);background-color:var(--mui-palette-primary-dark);}.mui-11rftqn .MuiChip-avatarColorSecondary{color:var(--mui-palette-secondary-contrastText);background-color:var(--mui-palette-secondary-dark);}.mui-11rftqn .MuiChip-avatarSmall{margin-left:4px;margin-right:-4px;width:18px;height:18px;font-size:0.625rem;}.mui-11rftqn .MuiChip-icon{margin-left:5px;margin-right:-6px;}.mui-11rftqn .MuiChip-deleteIcon{-webkit-tap-highlight-color:transparent;color:rgba(var(--mui-palette-text-primaryChannel) / 0.26);font-size:22px;cursor:pointer;margin:0 5px 0 -6px;}.mui-11rftqn .MuiChip-deleteIcon:hover{color:rgba(var(--mui-palette-text-primaryChannel) / 0.4);}.mui-11rftqn .MuiChip-icon{font-size:18px;margin-left:4px;margin-right:-4px;}.mui-11rftqn .MuiChip-deleteIcon{font-size:16px;margin-right:4px;margin-left:-4px;}.mui-11rftqn .MuiChip-deleteIcon{color:rgba(var(--mui-palette-primary-contrastTextChannel) / 0.7);}.mui-11rftqn .MuiChip-deleteIcon:hover,.mui-11rftqn .MuiChip-deleteIcon:active{color:var(--mui-palette-primary-contrastText);}.mui-11rftqn .MuiChip-icon{color:var(--mui-palette-Chip-defaultIconColor);}.mui-11rftqn .MuiChip-icon{color:inherit;}.mui-11rftqn.MuiChip-clickable:hover{background-color:var(--mui-palette-action-hover);}.mui-11rftqn.Mui-focusVisible{background-color:var(--mui-palette-action-focus);}.mui-11rftqn .MuiChip-avatar{margin-left:4px;}.mui-11rftqn .MuiChip-avatarSmall{margin-left:2px;}.mui-11rftqn .MuiChip-icon{margin-left:4px;}.mui-11rftqn .MuiChip-iconSmall{margin-left:2px;}.mui-11rftqn .MuiChip-deleteIcon{margin-right:5px;}.mui-11rftqn .MuiChip-deleteIconSmall{margin-right:3px;}.mui-11rftqn.MuiChip-clickable:hover{background-color:rgba(var(--mui-palette-primary-mainChannel) / var(--mui-palette-action-hoverOpacity));}.mui-11rftqn.Mui-focusVisible{background-color:rgba(var(--mui-palette-primary-mainChannel) / var(--mui-palette-action-focusOpacity));}.mui-11rftqn .MuiChip-deleteIcon{color:rgba(var(--mui-palette-primary-mainChannel) / 0.7);}.mui-11rftqn .MuiChip-deleteIcon:hover,.mui-11rftqn .MuiChip-deleteIcon:active{color:var(--mui-palette-primary-main);}.mui-oruufx{overflow:hidden;text-overflow:ellipsis;padding-left:12px;padding-right:12px;white-space:nowrap;padding-left:11px;padding-right:11px;padding-left:8px;padding-right:8px;padding-left:7px;padding-right:7px;}.mui-3c1zt0{font-family:'Roboto','Roboto Fallback';font-weight:500;font-size:0.875rem;line-height:1.75;text-transform:uppercase;min-width:64px;padding:6px 16px;border:0;border-radius:var(--mui-shape-borderRadius);-webkit-transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;color:var(--variant-containedColor);background-color:var(--variant-containedBg);box-shadow:var(--mui-shadows-2);--variant-textColor:var(--mui-palette-primary-main);--variant-outlinedColor:var(--mui-palette-primary-main);--variant-outlinedBorder:rgba(var(--mui-palette-primary-mainChannel) / 0.5);--variant-containedColor:var(--mui-palette-primary-contrastText);--variant-containedBg:var(--mui-palette-primary-main);padding:4px 10px;font-size:0.8125rem;-webkit-transition:background-color 0.3s,-webkit-transform 0.3s;transition:background-color 0.3s,transform 0.3s;background-color:var(--mui-palette-primary-main);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1);}.mui-3c1zt0:hover{-webkit-text-decoration:none;text-decoration:none;}.mui-3c1zt0.Mui-disabled{color:var(--mui-palette-action-disabled);}.mui-3c1zt0:hover{box-shadow:var(--mui-shadows-4);}@media (hover: none){.mui-3c1zt0:hover{box-shadow:var(--mui-shadows-2);}}.mui-3c1zt0:active{box-shadow:var(--mui-shadows-8);}.mui-3c1zt0.Mui-focusVisible{box-shadow:var(--mui-shadows-6);}.mui-3c1zt0.Mui-disabled{color:var(--mui-palette-action-disabled);box-shadow:var(--mui-shadows-0);background-color:var(--mui-palette-action-disabledBackground);}@media (hover: hover){.mui-3c1zt0:hover{--variant-containedBg:var(--mui-palette-primary-dark);--variant-textBg:rgba(var(--mui-palette-primary-mainChannel) / var(--mui-palette-action-hoverOpacity));--variant-outlinedBorder:var(--mui-palette-primary-main);--variant-outlinedBg:rgba(var(--mui-palette-primary-mainChannel) / var(--mui-palette-action-hoverOpacity));}}.mui-hbwrxa{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;font-family:'Roboto','Roboto Fallback';font-weight:500;font-size:0.875rem;line-height:1.75;text-transform:uppercase;min-width:64px;padding:6px 16px;border:0;border-radius:var(--mui-shape-borderRadius);-webkit-transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;color:var(--variant-containedColor);background-color:var(--variant-containedBg);box-shadow:var(--mui-shadows-2);--variant-textColor:var(--mui-palette-primary-main);--variant-outlinedColor:var(--mui-palette-primary-main);--variant-outlinedBorder:rgba(var(--mui-palette-primary-mainChannel) / 0.5);--variant-containedColor:var(--mui-palette-primary-contrastText);--variant-containedBg:var(--mui-palette-primary-main);padding:4px 10px;font-size:0.8125rem;-webkit-transition:background-color 0.3s,-webkit-transform 0.3s;transition:background-color 0.3s,transform 0.3s;background-color:var(--mui-palette-primary-main);-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);transform:scale(1);}.mui-hbwrxa::-moz-focus-inner{border-style:none;}.mui-hbwrxa.Mui-disabled{pointer-events:none;cursor:default;}@media print{.mui-hbwrxa{-webkit-print-color-adjust:exact;color-adjust:exact;}}.mui-hbwrxa:hover{-webkit-text-decoration:none;text-decoration:none;}.mui-hbwrxa.Mui-disabled{color:var(--mui-palette-action-disabled);}.mui-hbwrxa:hover{box-shadow:var(--mui-shadows-4);}@media (hover: none){.mui-hbwrxa:hover{box-shadow:var(--mui-shadows-2);}}.mui-hbwrxa:active{box-shadow:var(--mui-shadows-8);}.mui-hbwrxa.Mui-focusVisible{box-shadow:var(--mui-shadows-6);}.mui-hbwrxa.Mui-disabled{color:var(--mui-palette-action-disabled);box-shadow:var(--mui-shadows-0);background-color:var(--mui-palette-action-disabledBackground);}@media (hover: hover){.mui-hbwrxa:hover{--variant-containedBg:var(--mui-palette-primary-dark);--variant-textBg:rgba(var(--mui-palette-primary-mainChannel) / var(--mui-palette-action-hoverOpacity));--variant-outlinedBorder:var(--mui-palette-primary-main);--variant-outlinedBg:rgba(var(--mui-palette-primary-mainChannel) / var(--mui-palette-action-hoverOpacity));}}.mui-qtgrje{padding:calc(2 * var(--mui-spacing));overflow-x:auto;font-family:monospace;font-size:0.875rem;text-align:left;margin:calc(0 * var(--mui-spacing));}.mui-ds3kc{display:table-row;}.mui-v8vxr3{display:table-cell;text-align:right;padding-right:calc(2 * var(--mui-spacing));-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;opacity:0.5;}.mui-2qghsv{display:table-cell;}.mui-1elvlk4{margin:0;font-family:'Roboto','Roboto Fallback';font-weight:400;font-size:1.5625rem;line-height:1.235;margin-top:calc(3 * var(--mui-spacing));margin-bottom:calc(3 * var(--mui-spacing));}@media (min-width:600px){.mui-1elvlk4{font-size:1.8219rem;}}@media (min-width:900px){.mui-1elvlk4{font-size:2.0243rem;}}@media (min-width:1200px){.mui-1elvlk4{font-size:2.0243rem;}}.mui-1rzsytz{display:table;width:100%;border-collapse:collapse;border-spacing:0;}.mui-1rzsytz caption{font-family:'Roboto','Roboto Fallback';font-weight:400;font-size:0.875rem;line-height:1.43;padding:calc(2 * var(--mui-spacing));color:var(--mui-palette-text-secondary);text-align:left;caption-side:bottom;}.mui-s4zxv0{display:table-header-group;}.mui-lh0r68{color:inherit;display:table-row;vertical-align:middle;outline:0;}.mui-lh0r68.MuiTableRow-hover:hover{background-color:var(--mui-palette-action-hover);}.mui-lh0r68.Mui-selected{background-color:rgba(var(--mui-palette-primary-mainChannel) / var(--mui-palette-action-selectedOpacity));}.mui-lh0r68.Mui-selected:hover{background-color:rgba(var(--mui-palette-primary-mainChannel) / calc(var(--mui-palette-action-selectedOpacity) + var(--mui-palette-action-hoverOpacity)));}.mui-y6j1my{display:table-row-group;}.mui-1nqz4u4{margin-left:auto;margin-right:auto;width:100%;padding:calc(2 * var(--mui-spacing));}.mui-848oh1{margin:0;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;border-width:0;border-style:solid;border-color:var(--mui-palette-divider);border-bottom-width:thin;margin-top:calc(3 * var(--mui-spacing));margin-bottom:calc(3 * var(--mui-spacing));}.mui-1w3ufwa{margin-bottom:calc(3 * var(--mui-spacing));}.mui-1330fmt{margin-top:calc(1 * var(--mui-spacing));display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;gap:calc(1 * var(--mui-spacing));}.mui-hvpbdf{max-width:100%;font-family:'Roboto','Roboto Fallback';font-size:0.8125rem;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;height:32px;color:var(--mui-palette-text-primary);background-color:var(--mui-palette-action-selected);border-radius:16px;white-space:nowrap;-webkit-transition:background-color 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;cursor:unset;outline:0;-webkit-text-decoration:none;text-decoration:none;border:0;padding:0;vertical-align:middle;box-sizing:border-box;text-transform:lowercase;}.mui-hvpbdf.Mui-disabled{opacity:var(--mui-palette-action-disabledOpacity);pointer-events:none;}.mui-hvpbdf .MuiChip-avatar{margin-left:5px;margin-right:-6px;width:24px;height:24px;color:var(--mui-palette-Chip-defaultAvatarColor);font-size:0.75rem;}.mui-hvpbdf .MuiChip-avatarColorPrimary{color:var(--mui-palette-primary-contrastText);background-color:var(--mui-palette-primary-dark);}.mui-hvpbdf .MuiChip-avatarColorSecondary{color:var(--mui-palette-secondary-contrastText);background-color:var(--mui-palette-secondary-dark);}.mui-hvpbdf .MuiChip-avatarSmall{margin-left:4px;margin-right:-4px;width:18px;height:18px;font-size:0.625rem;}.mui-hvpbdf .MuiChip-icon{margin-left:5px;margin-right:-6px;}.mui-hvpbdf .MuiChip-deleteIcon{-webkit-tap-highlight-color:transparent;color:rgba(var(--mui-palette-text-primaryChannel) / 0.26);font-size:22px;cursor:pointer;margin:0 5px 0 -6px;}.mui-hvpbdf .MuiChip-deleteIcon:hover{color:rgba(var(--mui-palette-text-primaryChannel) / 0.4);}.mui-hvpbdf .MuiChip-icon{color:var(--mui-palette-Chip-defaultIconColor);}.mui-14vsv3w{overflow:hidden;text-overflow:ellipsis;padding-left:12px;padding-right:12px;white-space:nowrap;}.mui-dqhe93{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;gap:calc(1 * var(--mui-spacing));}.mui-ccs6u0{font-family:'Roboto','Roboto Fallback';font-weight:500;font-size:0.875rem;line-height:1.75;text-transform:uppercase;min-width:64px;padding:6px 16px;border:0;border-radius:var(--mui-shape-borderRadius);-webkit-transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;padding:5px 15px;border:1px solid currentColor;border-color:var(--variant-outlinedBorder, currentColor);background-color:var(--variant-outlinedBg);color:var(--variant-outlinedColor);--variant-textColor:var(--mui-palette-primary-main);--variant-outlinedColor:var(--mui-palette-primary-main);--variant-outlinedBorder:rgba(var(--mui-palette-primary-mainChannel) / 0.5);--variant-containedColor:var(--mui-palette-primary-contrastText);--variant-containedBg:var(--mui-palette-primary-main);text-align:left;}.mui-ccs6u0:hover{-webkit-text-decoration:none;text-decoration:none;}.mui-ccs6u0.Mui-disabled{color:var(--mui-palette-action-disabled);}.mui-ccs6u0.Mui-disabled{border:1px solid var(--mui-palette-action-disabledBackground);}@media (hover: hover){.mui-ccs6u0:hover{--variant-containedBg:var(--mui-palette-primary-dark);--variant-textBg:rgba(var(--mui-palette-primary-mainChannel) / var(--mui-palette-action-hoverOpacity));--variant-outlinedBorder:var(--mui-palette-primary-main);--variant-outlinedBg:rgba(var(--mui-palette-primary-mainChannel) / var(--mui-palette-action-hoverOpacity));}}.mui-hc3v22{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;font-family:'Roboto','Roboto Fallback';font-weight:500;font-size:0.875rem;line-height:1.75;text-transform:uppercase;min-width:64px;padding:6px 16px;border:0;border-radius:var(--mui-shape-borderRadius);-webkit-transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;padding:5px 15px;border:1px solid currentColor;border-color:var(--variant-outlinedBorder, currentColor);background-color:var(--variant-outlinedBg);color:var(--variant-outlinedColor);--variant-textColor:var(--mui-palette-primary-main);--variant-outlinedColor:var(--mui-palette-primary-main);--variant-outlinedBorder:rgba(var(--mui-palette-primary-mainChannel) / 0.5);--variant-containedColor:var(--mui-palette-primary-contrastText);--variant-containedBg:var(--mui-palette-primary-main);text-align:left;}.mui-hc3v22::-moz-focus-inner{border-style:none;}.mui-hc3v22.Mui-disabled{pointer-events:none;cursor:default;}@media print{.mui-hc3v22{-webkit-print-color-adjust:exact;color-adjust:exact;}}.mui-hc3v22:hover{-webkit-text-decoration:none;text-decoration:none;}.mui-hc3v22.Mui-disabled{color:var(--mui-palette-action-disabled);}.mui-hc3v22.Mui-disabled{border:1px solid var(--mui-palette-action-disabledBackground);}@media (hover: hover){.mui-hc3v22:hover{--variant-containedBg:var(--mui-palette-primary-dark);--variant-textBg:rgba(var(--mui-palette-primary-mainChannel) / var(--mui-palette-action-hoverOpacity));--variant-outlinedBorder:var(--mui-palette-primary-main);--variant-outlinedBg:rgba(var(--mui-palette-primary-mainChannel) / var(--mui-palette-action-hoverOpacity));}}.mui-irj99j{-webkit-text-decoration:underline;text-decoration:underline;text-decoration-color:var(--Link-underlineColor);--Link-underlineColor:rgba(var(--mui-palette-primary-mainChannel) / 0.4);-webkit-text-decoration:none;text-decoration:none;color:palette.link.main;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;font-family:'Roboto','Roboto Fallback';font-weight:500;font-size:0.875rem;line-height:1.75;text-transform:uppercase;min-width:64px;padding:6px 16px;border:0;border-radius:var(--mui-shape-borderRadius);-webkit-transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;padding:5px 15px;border:1px solid currentColor;border-color:var(--variant-outlinedBorder, currentColor);background-color:var(--variant-outlinedBg);color:var(--variant-outlinedColor);--variant-textColor:var(--mui-palette-primary-main);--variant-outlinedColor:var(--mui-palette-primary-main);--variant-outlinedBorder:rgba(var(--mui-palette-primary-mainChannel) / 0.5);--variant-containedColor:var(--mui-palette-primary-contrastText);--variant-containedBg:var(--mui-palette-primary-main);text-align:left;}.mui-irj99j:hover{text-decoration-color:inherit;}.mui-irj99j:hover{color:palette.link.hover;-webkit-text-decoration:underline;text-decoration:underline;}.mui-irj99j:visited{color:palette.link.visited;}.mui-irj99j::-moz-focus-inner{border-style:none;}.mui-irj99j.Mui-disabled{pointer-events:none;cursor:default;}@media print{.mui-irj99j{-webkit-print-color-adjust:exact;color-adjust:exact;}}.mui-irj99j:hover{-webkit-text-decoration:none;text-decoration:none;}.mui-irj99j.Mui-disabled{color:var(--mui-palette-action-disabled);}.mui-irj99j.Mui-disabled{border:1px solid var(--mui-palette-action-disabledBackground);}@media (hover: hover){.mui-irj99j:hover{--variant-containedBg:var(--mui-palette-primary-dark);--variant-textBg:rgba(var(--mui-palette-primary-mainChannel) / var(--mui-palette-action-hoverOpacity));--variant-outlinedBorder:var(--mui-palette-primary-main);--variant-outlinedBg:rgba(var(--mui-palette-primary-mainChannel) / var(--mui-palette-action-hoverOpacity));}}.mui-1n1o1p6{margin:0;font:inherit;line-height:inherit;letter-spacing:inherit;color:var(--mui-palette-primary-main);-webkit-text-decoration:underline;text-decoration:underline;text-decoration-color:var(--Link-underlineColor);--Link-underlineColor:rgba(var(--mui-palette-primary-mainChannel) / 0.4);-webkit-text-decoration:none;text-decoration:none;color:palette.link.main;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;font-family:'Roboto','Roboto Fallback';font-weight:500;font-size:0.875rem;line-height:1.75;text-transform:uppercase;min-width:64px;padding:6px 16px;border:0;border-radius:var(--mui-shape-borderRadius);-webkit-transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;padding:5px 15px;border:1px solid currentColor;border-color:var(--variant-outlinedBorder, currentColor);background-color:var(--variant-outlinedBg);color:var(--variant-outlinedColor);--variant-textColor:var(--mui-palette-primary-main);--variant-outlinedColor:var(--mui-palette-primary-main);--variant-outlinedBorder:rgba(var(--mui-palette-primary-mainChannel) / 0.5);--variant-containedColor:var(--mui-palette-primary-contrastText);--variant-containedBg:var(--mui-palette-primary-main);text-align:left;}.mui-1n1o1p6:hover{text-decoration-color:inherit;}.mui-1n1o1p6:hover{color:palette.link.hover;-webkit-text-decoration:underline;text-decoration:underline;}.mui-1n1o1p6:visited{color:palette.link.visited;}.mui-1n1o1p6::-moz-focus-inner{border-style:none;}.mui-1n1o1p6.Mui-disabled{pointer-events:none;cursor:default;}@media print{.mui-1n1o1p6{-webkit-print-color-adjust:exact;color-adjust:exact;}}.mui-1n1o1p6:hover{-webkit-text-decoration:none;text-decoration:none;}.mui-1n1o1p6.Mui-disabled{color:var(--mui-palette-action-disabled);}.mui-1n1o1p6.Mui-disabled{border:1px solid var(--mui-palette-action-disabledBackground);}@media (hover: hover){.mui-1n1o1p6:hover{--variant-containedBg:var(--mui-palette-primary-dark);--variant-textBg:rgba(var(--mui-palette-primary-mainChannel) / var(--mui-palette-action-hoverOpacity));--variant-outlinedBorder:var(--mui-palette-primary-main);--variant-outlinedBg:rgba(var(--mui-palette-primary-mainChannel) / var(--mui-palette-action-hoverOpacity));}}.mui-15ryrsv{font-family:'Roboto','Roboto Fallback';font-weight:500;font-size:0.875rem;line-height:1.75;text-transform:uppercase;min-width:64px;padding:6px 16px;border:0;border-radius:var(--mui-shape-borderRadius);-webkit-transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;padding:5px 15px;border:1px solid currentColor;border-color:var(--variant-outlinedBorder, currentColor);background-color:var(--variant-outlinedBg);color:var(--variant-outlinedColor);--variant-textColor:var(--mui-palette-primary-main);--variant-outlinedColor:var(--mui-palette-primary-main);--variant-outlinedBorder:rgba(var(--mui-palette-primary-mainChannel) / 0.5);--variant-containedColor:var(--mui-palette-primary-contrastText);--variant-containedBg:var(--mui-palette-primary-main);margin-left:auto;text-align:right;}.mui-15ryrsv:hover{-webkit-text-decoration:none;text-decoration:none;}.mui-15ryrsv.Mui-disabled{color:var(--mui-palette-action-disabled);}.mui-15ryrsv.Mui-disabled{border:1px solid var(--mui-palette-action-disabledBackground);}@media (hover: hover){.mui-15ryrsv:hover{--variant-containedBg:var(--mui-palette-primary-dark);--variant-textBg:rgba(var(--mui-palette-primary-mainChannel) / var(--mui-palette-action-hoverOpacity));--variant-outlinedBorder:var(--mui-palette-primary-main);--variant-outlinedBg:rgba(var(--mui-palette-primary-mainChannel) / var(--mui-palette-action-hoverOpacity));}}.mui-xq12hq{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;font-family:'Roboto','Roboto Fallback';font-weight:500;font-size:0.875rem;line-height:1.75;text-transform:uppercase;min-width:64px;padding:6px 16px;border:0;border-radius:var(--mui-shape-borderRadius);-webkit-transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;padding:5px 15px;border:1px solid currentColor;border-color:var(--variant-outlinedBorder, currentColor);background-color:var(--variant-outlinedBg);color:var(--variant-outlinedColor);--variant-textColor:var(--mui-palette-primary-main);--variant-outlinedColor:var(--mui-palette-primary-main);--variant-outlinedBorder:rgba(var(--mui-palette-primary-mainChannel) / 0.5);--variant-containedColor:var(--mui-palette-primary-contrastText);--variant-containedBg:var(--mui-palette-primary-main);margin-left:auto;text-align:right;}.mui-xq12hq::-moz-focus-inner{border-style:none;}.mui-xq12hq.Mui-disabled{pointer-events:none;cursor:default;}@media print{.mui-xq12hq{-webkit-print-color-adjust:exact;color-adjust:exact;}}.mui-xq12hq:hover{-webkit-text-decoration:none;text-decoration:none;}.mui-xq12hq.Mui-disabled{color:var(--mui-palette-action-disabled);}.mui-xq12hq.Mui-disabled{border:1px solid var(--mui-palette-action-disabledBackground);}@media (hover: hover){.mui-xq12hq:hover{--variant-containedBg:var(--mui-palette-primary-dark);--variant-textBg:rgba(var(--mui-palette-primary-mainChannel) / var(--mui-palette-action-hoverOpacity));--variant-outlinedBorder:var(--mui-palette-primary-main);--variant-outlinedBg:rgba(var(--mui-palette-primary-mainChannel) / var(--mui-palette-action-hoverOpacity));}}.mui-2ns073{-webkit-text-decoration:underline;text-decoration:underline;text-decoration-color:var(--Link-underlineColor);--Link-underlineColor:rgba(var(--mui-palette-primary-mainChannel) / 0.4);-webkit-text-decoration:none;text-decoration:none;color:palette.link.main;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;font-family:'Roboto','Roboto Fallback';font-weight:500;font-size:0.875rem;line-height:1.75;text-transform:uppercase;min-width:64px;padding:6px 16px;border:0;border-radius:var(--mui-shape-borderRadius);-webkit-transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;padding:5px 15px;border:1px solid currentColor;border-color:var(--variant-outlinedBorder, currentColor);background-color:var(--variant-outlinedBg);color:var(--variant-outlinedColor);--variant-textColor:var(--mui-palette-primary-main);--variant-outlinedColor:var(--mui-palette-primary-main);--variant-outlinedBorder:rgba(var(--mui-palette-primary-mainChannel) / 0.5);--variant-containedColor:var(--mui-palette-primary-contrastText);--variant-containedBg:var(--mui-palette-primary-main);margin-left:auto;text-align:right;}.mui-2ns073:hover{text-decoration-color:inherit;}.mui-2ns073:hover{color:palette.link.hover;-webkit-text-decoration:underline;text-decoration:underline;}.mui-2ns073:visited{color:palette.link.visited;}.mui-2ns073::-moz-focus-inner{border-style:none;}.mui-2ns073.Mui-disabled{pointer-events:none;cursor:default;}@media print{.mui-2ns073{-webkit-print-color-adjust:exact;color-adjust:exact;}}.mui-2ns073:hover{-webkit-text-decoration:none;text-decoration:none;}.mui-2ns073.Mui-disabled{color:var(--mui-palette-action-disabled);}.mui-2ns073.Mui-disabled{border:1px solid var(--mui-palette-action-disabledBackground);}@media (hover: hover){.mui-2ns073:hover{--variant-containedBg:var(--mui-palette-primary-dark);--variant-textBg:rgba(var(--mui-palette-primary-mainChannel) / var(--mui-palette-action-hoverOpacity));--variant-outlinedBorder:var(--mui-palette-primary-main);--variant-outlinedBg:rgba(var(--mui-palette-primary-mainChannel) / var(--mui-palette-action-hoverOpacity));}}.mui-1etjvc6{margin:0;font:inherit;line-height:inherit;letter-spacing:inherit;color:var(--mui-palette-primary-main);-webkit-text-decoration:underline;text-decoration:underline;text-decoration-color:var(--Link-underlineColor);--Link-underlineColor:rgba(var(--mui-palette-primary-mainChannel) / 0.4);-webkit-text-decoration:none;text-decoration:none;color:palette.link.main;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;position:relative;box-sizing:border-box;-webkit-tap-highlight-color:transparent;background-color:transparent;outline:0;border:0;margin:0;border-radius:0;padding:0;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;-moz-appearance:none;-webkit-appearance:none;-webkit-text-decoration:none;text-decoration:none;color:inherit;font-family:'Roboto','Roboto Fallback';font-weight:500;font-size:0.875rem;line-height:1.75;text-transform:uppercase;min-width:64px;padding:6px 16px;border:0;border-radius:var(--mui-shape-borderRadius);-webkit-transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;transition:background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;padding:5px 15px;border:1px solid currentColor;border-color:var(--variant-outlinedBorder, currentColor);background-color:var(--variant-outlinedBg);color:var(--variant-outlinedColor);--variant-textColor:var(--mui-palette-primary-main);--variant-outlinedColor:var(--mui-palette-primary-main);--variant-outlinedBorder:rgba(var(--mui-palette-primary-mainChannel) / 0.5);--variant-containedColor:var(--mui-palette-primary-contrastText);--variant-containedBg:var(--mui-palette-primary-main);margin-left:auto;text-align:right;}.mui-1etjvc6:hover{text-decoration-color:inherit;}.mui-1etjvc6:hover{color:palette.link.hover;-webkit-text-decoration:underline;text-decoration:underline;}.mui-1etjvc6:visited{color:palette.link.visited;}.mui-1etjvc6::-moz-focus-inner{border-style:none;}.mui-1etjvc6.Mui-disabled{pointer-events:none;cursor:default;}@media print{.mui-1etjvc6{-webkit-print-color-adjust:exact;color-adjust:exact;}}.mui-1etjvc6:hover{-webkit-text-decoration:none;text-decoration:none;}.mui-1etjvc6.Mui-disabled{color:var(--mui-palette-action-disabled);}.mui-1etjvc6.Mui-disabled{border:1px solid var(--mui-palette-action-disabledBackground);}@media (hover: hover){.mui-1etjvc6:hover{--variant-containedBg:var(--mui-palette-primary-dark);--variant-textBg:rgba(var(--mui-palette-primary-mainChannel) / var(--mui-palette-action-hoverOpacity));--variant-outlinedBorder:var(--mui-palette-primary-main);--variant-outlinedBg:rgba(var(--mui-palette-primary-mainChannel) / var(--mui-palette-action-hoverOpacity));}}.mui-ew9xcw{padding-top:calc(2 * var(--mui-spacing));padding-bottom:calc(2 * var(--mui-spacing));margin-top:calc(4 * var(--mui-spacing));}.mui-11qhvf2{width:100%;margin-left:auto;box-sizing:border-box;margin-right:auto;padding-left:calc(2 * var(--mui-spacing));padding-right:calc(2 * var(--mui-spacing));display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:calc(2 * var(--mui-spacing));}@media (min-width:600px){.mui-11qhvf2{padding-left:calc(3 * var(--mui-spacing));padding-right:calc(3 * var(--mui-spacing));}}@media (min-width:1200px){.mui-11qhvf2{max-width:1200px;}}@media (min-width:0px){.mui-11qhvf2{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;}}@media (min-width:900px){.mui-11qhvf2{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;}}.mui-zt7ovo{margin:0;font-family:'Roboto','Roboto Fallback';font-weight:400;font-size:0.875rem;line-height:1.43;}.mui-178ndn6{-webkit-text-decoration:none;text-decoration:none;-webkit-text-decoration:none;text-decoration:none;color:palette.link.main;}.mui-178ndn6:hover{-webkit-text-decoration:underline;text-decoration:underline;}.mui-178ndn6:hover{color:palette.link.hover;-webkit-text-decoration:underline;text-decoration:underline;}.mui-178ndn6:visited{color:palette.link.visited;}.mui-1oyp1ud{margin:0;font:inherit;line-height:inherit;letter-spacing:inherit;color:var(--mui-palette-primary-main);-webkit-text-decoration:none;text-decoration:none;-webkit-text-decoration:none;text-decoration:none;color:palette.link.main;}.mui-1oyp1ud:hover{-webkit-text-decoration:underline;text-decoration:underline;}.mui-1oyp1ud:hover{color:palette.link.hover;-webkit-text-decoration:underline;text-decoration:underline;}.mui-1oyp1ud:visited{color:palette.link.visited;}</style></head><body><script>(function() {
try {
  let colorScheme = '';
  const mode = localStorage.getItem('mui-mode') || 'system';
  const dark = localStorage.getItem('mui-color-scheme-dark') || 'dark';
  const light = localStorage.getItem('mui-color-scheme-light') || 'light';
  if (mode === 'system') {
    // handle system mode
    const mql = window.matchMedia('(prefers-color-scheme: dark)');
    if (mql.matches) {
      colorScheme = dark
    } else {
      colorScheme = light
    }
  }
  if (mode === 'light') {
    colorScheme = light;
  }
  if (mode === 'dark') {
    colorScheme = dark;
  }
  if (colorScheme) {
    document.documentElement.classList.remove('%s'.replace('%s', light), '%s'.replace('%s', dark));
      document.documentElement.classList.add('%s'.replace('%s', colorScheme));document.documentElement.setAttribute('.%s', colorScheme);
  }
} catch(e){}})();</script><header class="MuiPaper-root MuiPaper-elevation MuiPaper-elevation4 MuiAppBar-root MuiAppBar-colorPrimary MuiAppBar-positionFixed mui-fixed mui-1mnez1d" style="--Paper-shadow:var(--mui-shadows-4);--Paper-overlay:var(--mui-overlays-4)"><div class="MuiContainer-root MuiContainer-maxWidthXl mui-uja1mx"><div class="MuiToolbar-root MuiToolbar-regular mui-yqk6l4"><div class="MuiBox-root mui-1lvtzne"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-colorInherit MuiIconButton-edgeStart MuiIconButton-sizeLarge mui-r60kfm" tabindex="0" type="button" aria-label="menu"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-iguwhy" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="MenuIcon"><path d="M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"></path></svg></button></div><div class="MuiBox-root mui-xljsu8"><h1 class="MuiTypography-root MuiTypography-h6 MuiTypography-noWrap mui-1fvv1hx"><a style="text-decoration:none;display:flex;align-items:center" href="/"><img alt="Yeppyshiba Blog" loading="lazy" width="24" height="24" decoding="async" data-nimg="1" style="color:transparent" src="/images/akita-inu.png"/><p class="MuiTypography-root MuiTypography-body1 mui-6ki1e">Yeppyshiba Blog</p></a></h1></div><div class="MuiBox-root mui-1t6c9ts"><button class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-textPrimary MuiButton-sizeSmall MuiButton-textSizeSmall MuiButton-colorPrimary MuiButton-root MuiButton-text MuiButton-textPrimary MuiButton-sizeSmall MuiButton-textSizeSmall MuiButton-colorPrimary mui-w17fj4" tabindex="0" type="button">About</button><button class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-textPrimary MuiButton-sizeSmall MuiButton-textSizeSmall MuiButton-colorPrimary MuiButton-root MuiButton-text MuiButton-textPrimary MuiButton-sizeSmall MuiButton-textSizeSmall MuiButton-colorPrimary mui-w17fj4" tabindex="0" type="button">Category</button><button class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-textPrimary MuiButton-sizeSmall MuiButton-textSizeSmall MuiButton-colorPrimary MuiButton-root MuiButton-text MuiButton-textPrimary MuiButton-sizeSmall MuiButton-textSizeSmall MuiButton-colorPrimary mui-w17fj4" tabindex="0" type="button">Tags</button><button class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-textPrimary MuiButton-sizeSmall MuiButton-textSizeSmall MuiButton-colorPrimary MuiButton-root MuiButton-text MuiButton-textPrimary MuiButton-sizeSmall MuiButton-textSizeSmall MuiButton-colorPrimary mui-w17fj4" tabindex="0" type="button">Map</button></div><div class="MuiBox-root mui-2uchni"><a class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeMedium mui-1uabrif" tabindex="0" href="https://github.com/qlazzarus" target="_blank" rel="noopener noreferrer"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-iguwhy" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="GitHubIcon"><path d="M12 1.27a11 11 0 00-3.48 21.46c.55.09.73-.28.73-.55v-1.84c-3.03.64-3.67-1.46-3.67-1.46-.55-1.29-1.28-1.65-1.28-1.65-.92-.65.1-.65.1-.65 1.1 0 1.73 1.1 1.73 1.1.92 1.65 2.57 1.2 3.21.92a2 2 0 01.64-1.47c-2.47-.27-5.04-1.19-5.04-5.5 0-1.1.46-2.1 1.2-2.84a3.76 3.76 0 010-2.93s.91-.28 3.11 1.1c1.8-.49 3.7-.49 5.5 0 2.1-1.38 3.02-1.1 3.02-1.1a3.76 3.76 0 010 2.93c.83.74 1.2 1.74 1.2 2.94 0 4.21-2.57 5.13-5.04 5.4.45.37.82.92.82 2.02v3.03c0 .27.1.64.73.55A11 11 0 0012 1.27"></path></svg></a><a class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeMedium mui-1uabrif" tabindex="0" href="https://www.linkedin.com/in/yeppyshiba/" target="_blank" rel="noopener noreferrer"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-iguwhy" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="LinkedInIcon"><path d="M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77z"></path></svg></a><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-sizeMedium mui-1uabrif" tabindex="0" type="button"><svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium mui-iguwhy" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="LightModeIcon"><path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5M2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1m18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1M11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1m0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1M5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0z"></path></svg></button></div></div></div></header><div class="MuiBox-root mui-14z39eb"></div><div class="MuiBox-root mui-18r2op7"><div class="sc-gtLWhw pndhT"><div class="sc-egkSDF drwBNy"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 24 150 28" preserveAspectRatio="none" class="sc-fAUdSK rWzFW"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0" fill="rgba(255,255,255,0.7)" class="sc-dntaoT hUxImz"></use><use href="#gentle-wave" x="48" y="3" fill="rgba(255,255,255,0.5)" class="sc-dntaoT kWGmyl"></use><use href="#gentle-wave" x="48" y="5" fill="rgba(255,255,255,0.3)" class="sc-dntaoT ccpeNb"></use><use href="#gentle-wave" x="48" y="7" fill="#fff" class="sc-dntaoT dnThny"></use></g></svg></div></div><div class="MuiBox-root mui-1raxvbb"><div class="MuiContainer-root MuiContainer-maxWidthXl mui-uja1mx"><h1 class="MuiTypography-root MuiTypography-h4 MuiTypography-gutterBottom mui-rvxo1x">gitlab-runnner 를 활용한 docker 배포</h1><div class="MuiBox-root mui-gww4bo"><span class="MuiTypography-root MuiTypography-caption mui-1xaymri">4 years ago</span></div></div></div></div><div class="MuiContainer-root MuiContainer-maxWidthXl mui-uja1mx"><div class="MuiBox-root mui-r92vv6"><h2 class="MuiTypography-root MuiTypography-h2 mui-ade5no">서론</h2>
<p class="MuiTypography-root MuiTypography-body1 mui-1nf3c94">jekyll 블로그를 사용하면서 github action 에 대해서 많이 부러움을 느꼈습니다.</p>
<div class="MuiBox-root mui-yv5sv0"><div class="MuiBox-root mui-1nvar7l"><img class="MuiBox-root mui-m8wt5d" src="/images/posts/archive/2434BC4257A04CAC1D.jpg" alt=""/></div></div>
<p class="MuiTypography-root MuiTypography-body1 mui-1nf3c94">여기서는 gitlab 과 gitlab-runner (+ nexus) 를 설치하여 나도 자동적으로 빌드와 배포가 되도록 CI (Continuous Integration) / CD (Continuous Deployment) 를 구성 해보았습니다.</p>
<h2 class="MuiTypography-root MuiTypography-h2 mui-ade5no">Basic Concept</h2>
<div class="MuiBox-root mui-yv5sv0"><div class="MuiBox-root mui-1nvar7l"><img class="MuiBox-root mui-m8wt5d" src="/images/posts/archive/runner-diagram.png" alt="발로 그린 diagram"/><p class="MuiTypography-root MuiTypography-caption MuiTypography-alignCenter mui-l0rc0k" style="--Typography-textAlign:center">발로 그린 diagram</p></div></div>
<p class="MuiTypography-root MuiTypography-body1 mui-1nf3c94">기본 컨셉은 다음과 같습니다! 코드를 보내면 자동으로 도커 이미지를 생성하고 배포 대상 서버에서 컨테이너를 실행!</p>
<ol class="MuiList-root MuiList-padding mui-fz15h5">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-146xefr">gitlab 으로 코드를 커밋</li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-146xefr">build</li>
</ol>
<ul class="MuiList-root MuiList-padding mui-16cx2wp">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-146xefr">CI/CD (gitlab runner) 가 실행됨</li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-146xefr">코드를 도커 이미지 로 빌드하고 사설 도커 저장소 (이하 <em>nexus</em>) 로 배포 진행</li>
</ul>
<ol class="MuiList-root MuiList-padding mui-fz15h5" start="3">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-146xefr">deploy</li>
</ol>
<ul class="MuiList-root MuiList-padding mui-16cx2wp">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-146xefr">대상 원격지 서버로의 SSH 키 등록</li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-146xefr">대상 원격지 서버에 SSH 명령어 전달 (<em>nexus</em> 로 특정 리비전을 가져와서 컨테이너를 실행)</li>
</ul>
<h2 class="MuiTypography-root MuiTypography-h2 mui-ade5no">POC (Proof-Of-Concept)</h2>
<h3 class="MuiTypography-root MuiTypography-h3 mui-16ihh5y">먼저 설치할 것들</h3>
<div class="MuiBox-root mui-yv5sv0">물론 구성을 위해서 아래의 솔루션들이 필요합니다. 이 부분 설치는 별도의 내용을 참조하세요!<br/>
<!-- -->기본적으로 손쉬운 서버 설정을 위해서 빌드서버 / 배포서버 모두 <em>docker engine</em> 이 설치되어 있다고 가정합니다.</div>
<ul class="MuiList-root MuiList-padding mui-16cx2wp">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-146xefr">gitlab 설치</li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-146xefr">sonatype nexus3 설치</li>
</ul>
<h3 class="MuiTypography-root MuiTypography-h3 mui-16ihh5y">sonatype nexus3 설정</h3>
<p class="MuiTypography-root MuiTypography-body1 mui-1nf3c94">아래 문서를 참고 하여, 설치된 sonaytype nexus3 에서 docker 저장소를 설정합니다.</p>
<div class="MuiBox-root mui-yv5sv0"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways mui-1v8thds" href="https://velog.io/@king/private-docker-registry" target="_blank" rel="noopener noreferrer">사내 Docker Registry 만들기 (Nexus3 기반)<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeInherit mui-opyaud" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ExitToAppIcon"><path d="M10.09 15.59 11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"></path></svg></a></div>
<blockquote class="MuiBox-root mui-502ms">
<p class="MuiTypography-root MuiTypography-body1 mui-1nf3c94">nexus docker 로그인 연결을 그냥 admin 으로 진행 하는게 낫습니다.</p>
<p class="MuiTypography-root MuiTypography-body1 mui-1nf3c94">위 블로그의 내용대로 nexus 설정에 다음과 세팅이 필요합니다.</p>
<ul class="MuiList-root MuiList-padding mui-16cx2wp">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-146xefr">realm 에 docker bearer token realm 추가 필요</li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-146xefr">docker-hosted 에 api v1 + 포트 추가 (8082)</li>
</ul>
</blockquote>
<h3 class="MuiTypography-root MuiTypography-h3 mui-16ihh5y">gitlab-runner-network 추가</h3>
<div class="MuiBox-root mui-yv5sv0">빌드서버에서 gitlab 만 네트워크를 분리하기 위하여 아래 명령어를 통해 네트워크를 추가합니다.<br/>
<!-- -->각 컨테이너간 통신은 hostname 으로 호출하게 됩니다.</div>
<pre><div class="MuiBox-root mui-1renb1b"><div class="MuiBox-root mui-1r1sdzk"><div class="MuiChip-root MuiChip-outlined MuiChip-sizeSmall MuiChip-colorPrimary MuiChip-outlinedPrimary mui-11rftqn"><span class="MuiChip-label MuiChip-labelSmall mui-oruufx">bash</span></div><button class="MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeSmall MuiButton-containedSizeSmall MuiButton-colorPrimary MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeSmall MuiButton-containedSizeSmall MuiButton-colorPrimary mui-hbwrxa" tabindex="0" type="button">Copy</button></div><pre class="MuiBox-root mui-qtgrje"><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">1</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">$ sudo docker network create gitlab-runner-net</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">2</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">62322b083c76808fd3502b7388c36e7dca5087059bf688434a7dc7573dba103b</span></span></div></pre></div></pre>
<h3 class="MuiTypography-root MuiTypography-h3 mui-16ihh5y">gitlab-runner 설정값 추가</h3>
<p class="MuiTypography-root MuiTypography-body1 mui-1nf3c94">gitlab runner 기본 설정값을 추가 합니다.</p>
<pre><div class="MuiBox-root mui-1renb1b"><div class="MuiBox-root mui-1r1sdzk"><div class="MuiChip-root MuiChip-outlined MuiChip-sizeSmall MuiChip-colorPrimary MuiChip-outlinedPrimary mui-11rftqn"><span class="MuiChip-label MuiChip-labelSmall mui-oruufx">bash</span></div><button class="MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeSmall MuiButton-containedSizeSmall MuiButton-colorPrimary MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeSmall MuiButton-containedSizeSmall MuiButton-colorPrimary mui-hbwrxa" tabindex="0" type="button">Copy</button></div><pre class="MuiBox-root mui-qtgrje"><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">1</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">$ sudo mkdir -p /etc/srv/gitlab-runner</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">2</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">$ sudo touch /etc/srv/gitlab-runner/config.toml</span></span></div></pre></div></pre>
<h3 class="MuiTypography-root MuiTypography-h3 mui-16ihh5y">gitlab-runner / gitlab-dind 컨테이너 추가</h3>
<p class="MuiTypography-root MuiTypography-body1 mui-1nf3c94">gitlab runner 연결을 위해서 두가지 컨테이너를 추가합니다.</p>
<p class="MuiTypography-root MuiTypography-body1 mui-1nf3c94">다음과 같은 프로세스로 runner 가 실행됩니다.</p>
<ol class="MuiList-root MuiList-padding mui-fz15h5">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-146xefr">gitlab-runner 는 runner 가 실행시 gitlab-dind 컨테이너를 실행시키는 주체 입니다.</li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-146xefr">실행된 gitlab-dind 컨테이너는 도커 이미지를 빌드를 합니다.</li>
</ol>
<div class="MuiBox-root mui-yv5sv0"><div class="MuiBox-root mui-1nvar7l"><img class="MuiBox-root mui-m8wt5d" src="https://www.docker.com/wp-content/uploads/2013/08/docker-meme.jpg" alt="docker-in-docker !?"/><p class="MuiTypography-root MuiTypography-caption MuiTypography-alignCenter mui-l0rc0k" style="--Typography-textAlign:center">docker-in-docker !?</p></div></div>
<pre><div class="MuiBox-root mui-1renb1b"><div class="MuiBox-root mui-1r1sdzk"><div class="MuiChip-root MuiChip-outlined MuiChip-sizeSmall MuiChip-colorPrimary MuiChip-outlinedPrimary mui-11rftqn"><span class="MuiChip-label MuiChip-labelSmall mui-oruufx">bash</span></div><button class="MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeSmall MuiButton-containedSizeSmall MuiButton-colorPrimary MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeSmall MuiButton-containedSizeSmall MuiButton-colorPrimary mui-hbwrxa" tabindex="0" type="button">Copy</button></div><pre class="MuiBox-root mui-qtgrje"><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">1</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">$ sudo docker run -d \</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">2</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">--name gitlab-runner \</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">3</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">--restart always \</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">4</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">--network gitlab-runner-net \</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">5</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">-v /srv/gitlab-runner/config.toml:/etc/gitlab-runner/config.toml \</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">6</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">-e DOCKER_HOST=tcp://gitlab-dind:2375 \</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">7</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">gitlab/gitlab-runner:alpine</span></span></div></pre></div></pre>
<blockquote class="MuiBox-root mui-502ms">
<div class="MuiBox-root mui-yv5sv0">위에서 만들어둔 외부의 config.toml 파일을 매핑시켜 줍니다.<br/>
<!-- -->추후 수정을 용이하게 하기 위함 입니다.</div>
</blockquote>
<pre><div class="MuiBox-root mui-1renb1b"><div class="MuiBox-root mui-1r1sdzk"><div class="MuiChip-root MuiChip-outlined MuiChip-sizeSmall MuiChip-colorPrimary MuiChip-outlinedPrimary mui-11rftqn"><span class="MuiChip-label MuiChip-labelSmall mui-oruufx">bash</span></div><button class="MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeSmall MuiButton-containedSizeSmall MuiButton-colorPrimary MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeSmall MuiButton-containedSizeSmall MuiButton-colorPrimary mui-hbwrxa" tabindex="0" type="button">Copy</button></div><pre class="MuiBox-root mui-qtgrje"><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">1</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">$ sudo docker run -d \</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">2</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">--name gitlab-dind \</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">3</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">--privileged \</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">4</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">--restart always \</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">5</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">--network gitlab-runner-net \</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">6</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">-v /var/lib/docker \</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">7</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">docker:18.09.9-dind</span></span></div></pre></div></pre>
<h3 class="MuiTypography-root MuiTypography-h3 mui-16ihh5y">gitlab-dind 컨테이너 수정</h3>
<div class="MuiBox-root mui-yv5sv0">추가된 nexus 는 https 가 지원되지 않아 insecure registry 로 등록이 필요합니다.
<em>gitlab-dind 컨테이너</em>에 콘솔로 접속하여 수정을 진행합니다.</div>
<pre><div class="MuiBox-root mui-1renb1b"><div class="MuiBox-root mui-1r1sdzk"><div class="MuiChip-root MuiChip-outlined MuiChip-sizeSmall MuiChip-colorPrimary MuiChip-outlinedPrimary mui-11rftqn"><span class="MuiChip-label MuiChip-labelSmall mui-oruufx">bash</span></div><button class="MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeSmall MuiButton-containedSizeSmall MuiButton-colorPrimary MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeSmall MuiButton-containedSizeSmall MuiButton-colorPrimary mui-hbwrxa" tabindex="0" type="button">Copy</button></div><pre class="MuiBox-root mui-qtgrje"><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">1</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">$ echo &quot;{ \&quot;insecure-registries\&quot; : [\&quot;nexus..somewhere.com:8082\&quot;] }&quot; &gt; /etc/docker/daemon.json</span></span></div></pre></div></pre>
<h3 class="MuiTypography-root MuiTypography-h3 mui-16ihh5y">gitlab-runner 등록</h3>
<p class="MuiTypography-root MuiTypography-body1 mui-1nf3c94">이제 gitlab runner 를 gitlab 에 연동 되도록 등록해야 합니다.</p>
<p class="MuiTypography-root MuiTypography-body1 mui-1nf3c94">설정의 Runners 항목을 참조하여 등록 토큰 등을 설정합니다</p>
<div class="MuiBox-root mui-yv5sv0"><div class="MuiBox-root mui-1nvar7l"><img class="MuiBox-root mui-m8wt5d" src="/images/posts/archive/gitlab_runner_token.png" alt=""/></div></div>
<pre><div class="MuiBox-root mui-1renb1b"><div class="MuiBox-root mui-1r1sdzk"><div class="MuiChip-root MuiChip-outlined MuiChip-sizeSmall MuiChip-colorPrimary MuiChip-outlinedPrimary mui-11rftqn"><span class="MuiChip-label MuiChip-labelSmall mui-oruufx">bash</span></div><button class="MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeSmall MuiButton-containedSizeSmall MuiButton-colorPrimary MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeSmall MuiButton-containedSizeSmall MuiButton-colorPrimary mui-hbwrxa" tabindex="0" type="button">Copy</button></div><pre class="MuiBox-root mui-qtgrje"><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">1</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">$ sudo docker run -it --rm \</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">2</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0"> -v /srv/gitlab-runner/config.toml:/etc/gitlab-runner/config.toml \</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">3</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0"> gitlab/gitlab-runner:alpine \</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">4</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0"> register \</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">5</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0"> --executor docker \</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">6</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0"> --docker-image docker:18.09.9 \</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">7</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0"> --docker-volumes /var/run/docker.sock:/var/run/docker.sock</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">8</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">[sudo] password for someone:</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">9</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">Runtime platform arch=amd64 os=linux pid=6 revision=a998cacd version=13.2.2</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">10</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">Running in system-mode.</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">11</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">Please enter the gitlab-ci coordinator URL (e.g. https://gitlab.com/):</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">12</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">http://somewhere.com:8000/</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">13</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">Please enter the gitlab-ci token for this runner:</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">14</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">[gitlab-ci-token]</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">15</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">Please enter the gitlab-ci description for this runner:</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">16</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">[d6cfe8946db3]: Docker Runner</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">17</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">Please enter the gitlab-ci tags for this runner (comma separated):</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">18</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">Registering runner... succeeded runner=Jxyieb2E</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">19</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">Please enter the executor: shell, ssh, virtualbox, docker+machine, custom, docker-ssh, parallels, dockerssh+machine, kubernetes, docker:</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">20</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">[docker]:</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">21</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">Please enter the default Docker image (e.g. ruby:2.6):</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">22</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">[docker:18.09.9]:</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">23</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">Runner registered successfully. Feel free to start it, but if it&#x27;s running already the config should be</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">24</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">automatically reloaded!</span></span></div></pre></div></pre>
<p class="MuiTypography-root MuiTypography-body1 mui-1nf3c94">정상적으로 추가되었다면 ci 설정에서 해당 runner 가 노출되게 됩니다.</p>
<h3 class="MuiTypography-root MuiTypography-h3 mui-16ihh5y">gitlab ci variables 등록</h3>
<h4 class="MuiTypography-root MuiTypography-h4 mui-1elvlk4">ssh 키 생성 (클라이언트)</h4>
<p class="MuiTypography-root MuiTypography-body1 mui-1nf3c94">ssh 키는 server 에 id / password 입력 없이 접속하기 위해서 생성합니다.
여기에서는 ssh private key 만 gitlab 에 저장할 예정이며, public key 는 서버로 전송할 예정입니다.</p>
<p class="MuiTypography-root MuiTypography-body1 mui-1nf3c94">ssh-keygen 명령어로 ssh 키를 생성합니다.</p>
<pre><div class="MuiBox-root mui-1renb1b"><div class="MuiBox-root mui-1r1sdzk"><div class="MuiChip-root MuiChip-outlined MuiChip-sizeSmall MuiChip-colorPrimary MuiChip-outlinedPrimary mui-11rftqn"><span class="MuiChip-label MuiChip-labelSmall mui-oruufx">bash</span></div><button class="MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeSmall MuiButton-containedSizeSmall MuiButton-colorPrimary MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeSmall MuiButton-containedSizeSmall MuiButton-colorPrimary mui-hbwrxa" tabindex="0" type="button">Copy</button></div><pre class="MuiBox-root mui-qtgrje"><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">1</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">$ ssh-keygen</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">2</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">Generating public/private rsa key pair.</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">3</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">Enter file in which to save the key (/root/.ssh/id_rsa):</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">4</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">Created directory &#x27;/root/.ssh&#x27;.</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">5</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">Enter passphrase (empty for no passphrase):</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">6</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">Enter same passphrase again:</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">7</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">Your identification has been saved in /root/.ssh/id_rsa.</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">8</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">Your public key has been saved in /root/.ssh/id_rsa.pub.</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">9</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">The key fingerprint is:</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">10</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">d0:82:24:8e:d7:f1:bb:9b:33:53:96:93:49:da:9b:e3 root@localhost</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">11</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">The key&#x27;s randomart image is:</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">12</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">+---[RSA 2048]----+</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">13</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">|.*++ o.o. |</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">14</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">|.+B + oo. |</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">15</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">| +++ *+. |</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">16</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">| .o.Oo.+E |</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">17</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">| ++B.S. |</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">18</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">| o * =. |</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">19</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">| + = o |</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">20</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">| + = = . |</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">21</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">| + o o |</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">22</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">+----[SHA256]-----+</span></span></div></pre></div></pre>
<p class="MuiTypography-root MuiTypography-body1 mui-1nf3c94">ssh-copy-id 명령어로 ssh 키를 대상 서버로 복사합니다.</p>
<pre><div class="MuiBox-root mui-1renb1b"><div class="MuiBox-root mui-1r1sdzk"><div class="MuiChip-root MuiChip-outlined MuiChip-sizeSmall MuiChip-colorPrimary MuiChip-outlinedPrimary mui-11rftqn"><span class="MuiChip-label MuiChip-labelSmall mui-oruufx">bash</span></div><button class="MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeSmall MuiButton-containedSizeSmall MuiButton-colorPrimary MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeSmall MuiButton-containedSizeSmall MuiButton-colorPrimary mui-hbwrxa" tabindex="0" type="button">Copy</button></div><pre class="MuiBox-root mui-qtgrje"><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">1</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">$ ssh-copy-id someone@somewhere.com</span></span></div></pre></div></pre>
<p class="MuiTypography-root MuiTypography-body1 mui-1nf3c94">ssh 연결을 확인해보면 key 없이 잘 접속 되는 것을 확인됩니다.</p>
<pre><div class="MuiBox-root mui-1renb1b"><div class="MuiBox-root mui-1r1sdzk"><div class="MuiChip-root MuiChip-outlined MuiChip-sizeSmall MuiChip-colorPrimary MuiChip-outlinedPrimary mui-11rftqn"><span class="MuiChip-label MuiChip-labelSmall mui-oruufx">bash</span></div><button class="MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeSmall MuiButton-containedSizeSmall MuiButton-colorPrimary MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeSmall MuiButton-containedSizeSmall MuiButton-colorPrimary mui-hbwrxa" tabindex="0" type="button">Copy</button></div><pre class="MuiBox-root mui-qtgrje"><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">1</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">$ ssh someone@somewhere.com</span></span></div></pre></div></pre>
<p class="MuiTypography-root MuiTypography-body1 mui-1nf3c94">private key 는 gitlab ci 용 변수로 담기 위해서 복사한 후 .ssh 폴더 자체를 삭제합니다.</p>
<pre><div class="MuiBox-root mui-1renb1b"><div class="MuiBox-root mui-1r1sdzk"><div class="MuiChip-root MuiChip-outlined MuiChip-sizeSmall MuiChip-colorPrimary MuiChip-outlinedPrimary mui-11rftqn"><span class="MuiChip-label MuiChip-labelSmall mui-oruufx">bash</span></div><button class="MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeSmall MuiButton-containedSizeSmall MuiButton-colorPrimary MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeSmall MuiButton-containedSizeSmall MuiButton-colorPrimary mui-hbwrxa" tabindex="0" type="button">Copy</button></div><pre class="MuiBox-root mui-qtgrje"><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">1</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">$ cat ~/.ssh/id_rsa</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">2</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">-----BEGIN OPENSSH PRIVATE KEY-----</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">3</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">b3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAABlwAAAAdzc2gtcn</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">4</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">...</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">5</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">u+Hr4KoWBWAJVdAAAAEXJvb3RANmMwNzdhYzZkZDVjAQ==</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">6</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">-----END OPENSSH PRIVATE KEY-----</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">7</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">$ rm -rf ~/.ssh</span></span></div></pre></div></pre>
<h4 class="MuiTypography-root MuiTypography-h4 mui-1elvlk4">sudo 등록 (서버)</h4>
<div class="MuiBox-root mui-yv5sv0">보안상의 이유로 <em>배포할 서버</em>를 접근시에는 root 가 아니라 일반 사용자로 등록했습니다.<br/>
<!-- -->다만 이럴 경우 일반 사용자가 docker 를 실행시킬 권한이 제한됩니다. (root 로 구동됨)</div>
<div class="MuiBox-root mui-yv5sv0">따라서 docker 명령어는 sudo 로 실행해야 하며, 이럴 경우 비밀번호 묻는 프롬프트가 나와서 ssh 명령어를 전달하는 입장에서는 제한이 됩니다.<br/>
<!-- -->그러하므로 visudo 로 비밀번호를 묻지 않도록 제한할 예정입니다.</div>
<p class="MuiTypography-root MuiTypography-body1 mui-1nf3c94">root 로 visudo 를 실행하여 docker 명령어만 패스워드 묻지 않도록 허용 합니다.</p>
<pre><div class="MuiBox-root mui-1renb1b"><div class="MuiBox-root mui-1r1sdzk"><div class="MuiChip-root MuiChip-outlined MuiChip-sizeSmall MuiChip-colorPrimary MuiChip-outlinedPrimary mui-11rftqn"><span class="MuiChip-label MuiChip-labelSmall mui-oruufx">Plain Text</span></div><button class="MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeSmall MuiButton-containedSizeSmall MuiButton-colorPrimary MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeSmall MuiButton-containedSizeSmall MuiButton-colorPrimary mui-hbwrxa" tabindex="0" type="button">Copy</button></div><pre class="MuiBox-root mui-qtgrje"><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">1</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">## Allow root to run any commands anywhere</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">2</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">root ALL=(ALL) ALL</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">3</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">someone ALL= NOPASSWD: /bin/docker</span></span></div></pre></div></pre>
<h4 class="MuiTypography-root MuiTypography-h4 mui-1elvlk4">docker insecure registries 등록 (서버)</h4>
<div class="MuiBox-root mui-yv5sv0">사설 docker registry 를 생성하였기 때문에 gitlab 과 배포할 서버 모두 insecure-registries 로 등록이 필요합니다.<br/>
<!-- -->gitlab-dind 는 이미 등록이 완료되어서 여기에서는 배포할 서버에만 등록해줍니다.</div>
<p class="MuiTypography-root MuiTypography-body1 mui-1nf3c94">/etc/docker/daemon.json 파일을 수정해서 아래의 경로를 추가해줍니다.</p>
<pre><div class="MuiBox-root mui-1renb1b"><div class="MuiBox-root mui-1r1sdzk"><div class="MuiChip-root MuiChip-outlined MuiChip-sizeSmall MuiChip-colorPrimary MuiChip-outlinedPrimary mui-11rftqn"><span class="MuiChip-label MuiChip-labelSmall mui-oruufx">json</span></div><button class="MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeSmall MuiButton-containedSizeSmall MuiButton-colorPrimary MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeSmall MuiButton-containedSizeSmall MuiButton-colorPrimary mui-hbwrxa" tabindex="0" type="button">Copy</button></div><pre class="MuiBox-root mui-qtgrje"><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">1</span><span class="MuiBox-root mui-2qghsv"><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">{</span><span class="token plain MuiBox-root mui-0"></span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">2</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">    </span><span class="token property MuiBox-root mui-0">&quot;insecure-registries&quot;</span><span class="token operator MuiBox-root mui-0" style="color:rgb(0, 0, 0)">:</span><span class="token plain MuiBox-root mui-0"> </span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">[</span><span class="token string MuiBox-root mui-0" style="color:rgb(163, 21, 21)">&quot;nexus.somewhere.com:8082&quot;</span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">]</span><span class="token plain MuiBox-root mui-0"></span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">3</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0"></span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">}</span><span class="token plain MuiBox-root mui-0"></span></span></div></pre></div></pre>
<h4 class="MuiTypography-root MuiTypography-h4 mui-1elvlk4">등록 (gitlab)</h4>
<div class="MuiBox-root mui-yv5sv0">곧 작성할 gitlab-ci.yml 파일에 쓰일 변수들이 있습니다.<br/>
<!-- -->yaml 파일에서 바로 정의될 변수도 있지만, 외부에서 쓰일 변수들 설정이 필요하여 gitlab ci 설정을 들어가도록 하겠습니다</div>
<p class="MuiTypography-root MuiTypography-body1 mui-1nf3c94">설정 → CI / CD → Variables 순서대로 접근합니다.</p>
<div class="MuiBox-root mui-yv5sv0"><div class="MuiBox-root mui-1nvar7l"><img class="MuiBox-root mui-m8wt5d" src="/images/posts/archive/ci_variables.png" alt=""/></div></div>
<p class="MuiTypography-root MuiTypography-body1 mui-1nf3c94">아래는 등록된 모습이며 각각 다음의 내용을 기술합니다.</p>
<table class="MuiTable-root mui-1rzsytz"><thead class="MuiTableHead-root mui-s4zxv0"><tr class="MuiTableRow-root MuiTableRow-head mui-lh0r68"><th>타입</th><th>키</th><th>설명</th><th>예제</th></tr></thead><tbody class="MuiTableBody-root mui-y6j1my"><tr class="MuiTableRow-root mui-lh0r68"><td>Variables</td><td>DOCKER_PRIVATE_HOST</td><td>도커 컨테이너 호스트입니다. nexus3 주소를 입력합니다.</td><td>nexus.somewhere.com:8082</td></tr><tr class="MuiTableRow-root mui-lh0r68"><td>Variables</td><td>DOCKER_PRIVATE_PASSWORD</td><td>nexus 비밀번호 입니다.</td><td>nexus_password</td></tr><tr class="MuiTableRow-root mui-lh0r68"><td>Variables</td><td>DOCKER_PRIVATE_USER</td><td>nexus 아이디 입니다.</td><td>admin</td></tr><tr class="MuiTableRow-root mui-lh0r68"><td>Variables</td><td>PROD_SERVER_IP</td><td>배포할 원격 호스트입니다.</td><td>deploy.com</td></tr><tr class="MuiTableRow-root mui-lh0r68"><td>Variables</td><td>PROD_SERVER_PORT</td><td>접근할 원격 호스트 SSH 포트입니다.</td><td>22</td></tr><tr class="MuiTableRow-root mui-lh0r68"><td>Variables</td><td>PROD_SERVER_USER</td><td>접근할 원격 호스트 유저입니다.</td><td>deployer</td></tr><tr class="MuiTableRow-root mui-lh0r68"><td>Variables</td><td>SSH_PRIVATE_KEY</td><td>생성된 private key 입니다.</td><td>-----BEGIN OPENSSH ... 후략</td></tr></tbody></table>
<h3 class="MuiTypography-root MuiTypography-h3 mui-16ihh5y">gitlab-ci.yml 파일 등록</h3>
<div class="MuiBox-root mui-yv5sv0">gitlab ci 관련해서는 <a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways mui-1v8thds" href="https://velog.io/@wickedev/Gitlab-CICD-%ED%8A%9C%ED%86%A0%EB%A6%AC%EC%96%BC-bljzphditt" target="_blank" rel="noopener noreferrer">이 문서<svg class="MuiSvgIcon-root MuiSvgIcon-fontSizeInherit mui-opyaud" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="ExitToAppIcon"><path d="M10.09 15.59 11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2"></path></svg></a> 를 보시고,<br/>
<!-- -->우선은 commit &amp; push 시 발동하는 파이프라인을 작성하겠습니다.</div>
<p class="MuiTypography-root MuiTypography-body1 mui-1nf3c94">해당 CI 파일은 두가지 스테이지 (build / deploy) 로 나누어져 있으며 각각 하는 역할은 다음과 같습니다.</p>
<ul class="MuiList-root MuiList-padding mui-16cx2wp">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-146xefr">build - 도커 이미지 생성</li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-146xefr">deploy - 원격지 서버로 배포</li>
</ul>
<pre><div class="MuiBox-root mui-1renb1b"><div class="MuiBox-root mui-1r1sdzk"><div class="MuiChip-root MuiChip-outlined MuiChip-sizeSmall MuiChip-colorPrimary MuiChip-outlinedPrimary mui-11rftqn"><span class="MuiChip-label MuiChip-labelSmall mui-oruufx">yaml</span></div><button class="MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeSmall MuiButton-containedSizeSmall MuiButton-colorPrimary MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeSmall MuiButton-containedSizeSmall MuiButton-colorPrimary mui-hbwrxa" tabindex="0" type="button">Copy</button></div><pre class="MuiBox-root mui-qtgrje"><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">1</span><span class="MuiBox-root mui-2qghsv"><span class="token key atrule MuiBox-root mui-0">image</span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">:</span><span class="token plain MuiBox-root mui-0"> monoless/ansible</span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token plain MuiBox-root mui-0">docker</span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">:</span><span class="token plain MuiBox-root mui-0">18.09.9</span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token number MuiBox-root mui-0" style="color:rgb(9, 134, 88)">03</span><span class="token plain MuiBox-root mui-0"></span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">2</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0"></span><span class="token key atrule MuiBox-root mui-0">services</span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">:</span><span class="token plain MuiBox-root mui-0"></span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">3</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0"> </span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token plain MuiBox-root mui-0"> </span><span class="token key atrule MuiBox-root mui-0">name</span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">:</span><span class="token plain MuiBox-root mui-0"> monoless/ansible</span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token plain MuiBox-root mui-0">docker</span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">:</span><span class="token plain MuiBox-root mui-0">18.09.9</span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token plain MuiBox-root mui-0">dind</span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token number MuiBox-root mui-0" style="color:rgb(9, 134, 88)">03</span><span class="token plain MuiBox-root mui-0"></span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">4</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0"> </span><span class="token key atrule MuiBox-root mui-0">command</span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">:</span><span class="token plain MuiBox-root mui-0"> </span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">[</span><span class="token string MuiBox-root mui-0" style="color:rgb(163, 21, 21)">&quot;--insecure-registry=nexus.somwwhere.com:8082&quot;</span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">]</span><span class="token plain MuiBox-root mui-0"></span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">5</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0"></span><span class="token key atrule MuiBox-root mui-0">stages</span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">:</span><span class="token plain MuiBox-root mui-0"></span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">6</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0"> </span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token plain MuiBox-root mui-0"> build</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">7</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0"> </span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token plain MuiBox-root mui-0"> deploy</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">8</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0"></span><span class="token key atrule MuiBox-root mui-0">variables</span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">:</span><span class="token plain MuiBox-root mui-0"></span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">9</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0"> </span><span class="token key atrule MuiBox-root mui-0">IMAGE_NAME</span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">:</span><span class="token plain MuiBox-root mui-0"> $DOCKER_PRIVATE_HOST/hello</span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token plain MuiBox-root mui-0">world</span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">:</span><span class="token plain MuiBox-root mui-0">$CI_PIPELINE_ID</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">10</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0" style="display:inline-block">
</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">11</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0"></span><span class="token key atrule MuiBox-root mui-0">before_script</span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">:</span><span class="token plain MuiBox-root mui-0"></span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">12</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0"> </span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token plain MuiBox-root mui-0"> docker info</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">13</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0" style="display:inline-block">
</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">14</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0"></span><span class="token key atrule MuiBox-root mui-0">cache</span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">:</span><span class="token plain MuiBox-root mui-0"></span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">15</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0"> </span><span class="token key atrule MuiBox-root mui-0">paths</span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">:</span><span class="token plain MuiBox-root mui-0"></span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">16</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0"> </span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token plain MuiBox-root mui-0"> node_modules/</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">17</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0"></span><span class="token key atrule MuiBox-root mui-0">build</span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">:</span><span class="token plain MuiBox-root mui-0"></span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">18</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0"> </span><span class="token key atrule MuiBox-root mui-0">stage</span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">:</span><span class="token plain MuiBox-root mui-0"> build</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">19</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0"> </span><span class="token key atrule MuiBox-root mui-0">script</span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">:</span><span class="token plain MuiBox-root mui-0"></span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">20</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0"> </span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token plain MuiBox-root mui-0"> ls </span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token plain MuiBox-root mui-0">al</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">21</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0"> </span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token plain MuiBox-root mui-0"> docker container ls </span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token plain MuiBox-root mui-0">a</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">22</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0"> </span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token plain MuiBox-root mui-0"> docker build . </span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token plain MuiBox-root mui-0">t $IMAGE_NAME</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">23</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0"> </span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token plain MuiBox-root mui-0"> docker login </span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token plain MuiBox-root mui-0">u $DOCKER_PRIVATE_USER </span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token plain MuiBox-root mui-0">p $DOCKER_PRIVATE_PASSWORD $DOCKER_PRIVATE_HOST</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">24</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0"> </span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token plain MuiBox-root mui-0"> docker push $IMAGE_NAME</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">25</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0"> </span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token plain MuiBox-root mui-0"> docker images </span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">|</span><span class="token plain MuiBox-root mui-0"> grep &#x27;somewhere.com&#x27;</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">26</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0" style="display:inline-block">
</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">27</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0"></span><span class="token key atrule MuiBox-root mui-0">deploy-image</span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">:</span><span class="token plain MuiBox-root mui-0"></span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">28</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0"> </span><span class="token key atrule MuiBox-root mui-0">stage</span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">:</span><span class="token plain MuiBox-root mui-0"> deploy</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">29</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0"> </span><span class="token key atrule MuiBox-root mui-0">before_script</span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">:</span><span class="token plain MuiBox-root mui-0"></span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">30</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0"> </span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token plain MuiBox-root mui-0"> </span><span class="token string MuiBox-root mui-0" style="color:rgb(163, 21, 21)">&#x27;which ssh-agent || (apk update &amp;&amp; apk add openssh-client)&#x27;</span><span class="token plain MuiBox-root mui-0"></span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">31</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0"> </span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token plain MuiBox-root mui-0"> eval $(ssh</span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token plain MuiBox-root mui-0">agent </span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token plain MuiBox-root mui-0">s)</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">32</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0"> </span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token plain MuiBox-root mui-0"> echo &quot;$SSH_PRIVATE_KEY&quot; </span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">|</span><span class="token plain MuiBox-root mui-0"> tr </span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token plain MuiBox-root mui-0">d &#x27;\r&#x27; </span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">|</span><span class="token plain MuiBox-root mui-0"> ssh</span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token plain MuiBox-root mui-0">add </span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token plain MuiBox-root mui-0"> </span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain MuiBox-root mui-0"> /dev/null</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">33</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0"> </span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token plain MuiBox-root mui-0"> mkdir </span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token plain MuiBox-root mui-0">p ~/.ssh</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">34</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0"> </span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token plain MuiBox-root mui-0"> chmod 700 ~/.ssh</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">35</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0"> </span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token plain MuiBox-root mui-0"> ssh</span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token plain MuiBox-root mui-0">keyscan </span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token plain MuiBox-root mui-0">p $PROD_SERVER_PORT $PROD_SERVER_IP </span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">&gt;</span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain MuiBox-root mui-0"> ~/.ssh/known_hosts</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">36</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0"> </span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token plain MuiBox-root mui-0"> chmod 644 ~/.ssh/known_hosts</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">37</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0"> </span><span class="token key atrule MuiBox-root mui-0">script</span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">:</span><span class="token plain MuiBox-root mui-0"></span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">38</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0"> </span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token plain MuiBox-root mui-0"> ssh $PROD_SERVER_USER@$PROD_SERVER_IP </span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token plain MuiBox-root mui-0">p$PROD_SERVER_PORT &quot;sudo docker login \&quot;$</span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">{</span><span class="token plain MuiBox-root mui-0">DOCKER_PRIVATE_HOST</span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">}</span><span class="token plain MuiBox-root mui-0">\&quot; </span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token plain MuiBox-root mui-0"></span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">39</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">u \&quot;$</span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">{</span><span class="token plain MuiBox-root mui-0">DOCKER_PRIVATE_USER</span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">}</span><span class="token plain MuiBox-root mui-0">\&quot; </span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token plain MuiBox-root mui-0">p \&quot;$</span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">{</span><span class="token plain MuiBox-root mui-0">DOCKER_PRIVATE_PASSWORD</span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">}</span><span class="token plain MuiBox-root mui-0">\&quot; </span><span class="token important MuiBox-root mui-0">&amp;&amp;</span><span class="token plain MuiBox-root mui-0"> sudo docker pull $IMAGE_NAME </span><span class="token important MuiBox-root mui-0">&amp;&amp;</span><span class="token plain MuiBox-root mui-0"> sudo docker</span></span></div><div class="token-line MuiBox-root mui-ds3kc" style="color:#000000"><span class="MuiBox-root mui-v8vxr3">40</span><span class="MuiBox-root mui-2qghsv"><span class="token plain MuiBox-root mui-0">stop \$(sudo docker ps </span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token plain MuiBox-root mui-0">aq) </span><span class="token important MuiBox-root mui-0">&amp;&amp;</span><span class="token plain MuiBox-root mui-0"> sudo docker rm \$(sudo docker ps </span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token plain MuiBox-root mui-0">aq) </span><span class="token important MuiBox-root mui-0">&amp;&amp;</span><span class="token plain MuiBox-root mui-0"> sudo docker run </span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token plain MuiBox-root mui-0">d </span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token plain MuiBox-root mui-0">restart=unlessstopped </span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">-</span><span class="token plain MuiBox-root mui-0">p 5000</span><span class="token punctuation MuiBox-root mui-0" style="color:rgb(4, 81, 165)">:</span><span class="token plain MuiBox-root mui-0">5000 $IMAGE_NAME&quot;</span></span></div></pre></div></pre>
<p class="MuiTypography-root MuiTypography-body1 mui-1nf3c94">gitlab-ci.yml 파일이 생성되면, 해당 저장소의 수정이 된 것으로 판단 자동적으로 파이프라인이 실행됩니다.</p>
<p class="MuiTypography-root MuiTypography-body1 mui-1nf3c94">이후 정상적으로 배포된 docker image 와 원격지 서버를 확인 하였습니다.</p>
<div class="MuiBox-root mui-yv5sv0"><div class="MuiBox-root mui-1nvar7l"><img class="MuiBox-root mui-m8wt5d" src="/images/posts/archive/successful_build.png" alt=""/></div></div>
<h2 class="MuiTypography-root MuiTypography-h2 mui-ade5no">결론</h2>
<p class="MuiTypography-root MuiTypography-body1 mui-1nf3c94">지금 작성한 gitlab-ci 코드를 통해서 지속적인 통합과 배포를 구성하였습니다.</p>
<p class="MuiTypography-root MuiTypography-body1 mui-1nf3c94">이점으로는</p>
<ol class="MuiList-root MuiList-padding mui-fz15h5">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-146xefr">코드로 손쉬운 통합이 가능합니다. (다만 gitlab-runner 에 대한 어느정도 학습이 필요합니다.)</li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-146xefr">솔직히 jenkins 보다는 쉬운거 같습니다....</li>
</ol>
<p class="MuiTypography-root MuiTypography-body1 mui-1nf3c94">아쉬운 점으로는</p>
<ol class="MuiList-root MuiList-padding mui-fz15h5">
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-146xefr">테스트/스테이지 환경에 대한 부분은 브렌치를 통해서 구현이 필요할 것 같습니다.</li>
<li class="MuiListItem-root MuiListItem-gutters MuiListItem-padding mui-146xefr">여러 서버로 배포시 대응이 필요합니다.</li>
</ol></div></div><div class="MuiBox-root mui-1nqz4u4"><hr class="MuiDivider-root MuiDivider-fullWidth mui-848oh1"/><div class="MuiBox-root mui-1w3ufwa"><div class="MuiBox-root mui-1330fmt"><a style="text-decoration:none" href="/tag/dev"><div class="MuiChip-root MuiChip-filled MuiChip-sizeMedium MuiChip-colorDefault MuiChip-filledDefault mui-hvpbdf"><span class="MuiChip-label MuiChip-labelMedium mui-14vsv3w">dev</span></div></a><a style="text-decoration:none" href="/tag/coding"><div class="MuiChip-root MuiChip-filled MuiChip-sizeMedium MuiChip-colorDefault MuiChip-filledDefault mui-hvpbdf"><span class="MuiChip-label MuiChip-labelMedium mui-14vsv3w">coding</span></div></a><a style="text-decoration:none" href="/tag/git"><div class="MuiChip-root MuiChip-filled MuiChip-sizeMedium MuiChip-colorDefault MuiChip-filledDefault mui-hvpbdf"><span class="MuiChip-label MuiChip-labelMedium mui-14vsv3w">git</span></div></a><a style="text-decoration:none" href="/tag/gitlab"><div class="MuiChip-root MuiChip-filled MuiChip-sizeMedium MuiChip-colorDefault MuiChip-filledDefault mui-hvpbdf"><span class="MuiChip-label MuiChip-labelMedium mui-14vsv3w">gitlab</span></div></a><a style="text-decoration:none" href="/tag/gitlab-runner"><div class="MuiChip-root MuiChip-filled MuiChip-sizeMedium MuiChip-colorDefault MuiChip-filledDefault mui-hvpbdf"><span class="MuiChip-label MuiChip-labelMedium mui-14vsv3w">gitlab runner</span></div></a><a style="text-decoration:none" href="/tag/docker"><div class="MuiChip-root MuiChip-filled MuiChip-sizeMedium MuiChip-colorDefault MuiChip-filledDefault mui-hvpbdf"><span class="MuiChip-label MuiChip-labelMedium mui-14vsv3w">docker</span></div></a><a style="text-decoration:none" href="/tag/deploy"><div class="MuiChip-root MuiChip-filled MuiChip-sizeMedium MuiChip-colorDefault MuiChip-filledDefault mui-hvpbdf"><span class="MuiChip-label MuiChip-labelMedium mui-14vsv3w">deploy</span></div></a><a style="text-decoration:none" href="/tag/ci"><div class="MuiChip-root MuiChip-filled MuiChip-sizeMedium MuiChip-colorDefault MuiChip-filledDefault mui-hvpbdf"><span class="MuiChip-label MuiChip-labelMedium mui-14vsv3w">ci</span></div></a><a style="text-decoration:none" href="/tag/cd"><div class="MuiChip-root MuiChip-filled MuiChip-sizeMedium MuiChip-colorDefault MuiChip-filledDefault mui-hvpbdf"><span class="MuiChip-label MuiChip-labelMedium mui-14vsv3w">cd</span></div></a></div></div><div class="MuiBox-root mui-dqhe93"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways MuiButtonBase-root MuiButton-root MuiButton-outlined MuiButton-outlinedPrimary MuiButton-sizeMedium MuiButton-outlinedSizeMedium MuiButton-colorPrimary MuiButton-root MuiButton-outlined MuiButton-outlinedPrimary MuiButton-sizeMedium MuiButton-outlinedSizeMedium MuiButton-colorPrimary mui-1n1o1p6" tabindex="0" href="/article/raycasting-pseudo-3d">← <!-- -->울펜슈타인3D 는 과연 어떻게 3d를 구현했을까요?</a><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways MuiButtonBase-root MuiButton-root MuiButton-outlined MuiButton-outlinedPrimary MuiButton-sizeMedium MuiButton-outlinedSizeMedium MuiButton-colorPrimary MuiButton-root MuiButton-outlined MuiButton-outlinedPrimary MuiButton-sizeMedium MuiButton-outlinedSizeMedium MuiButton-colorPrimary mui-1etjvc6" tabindex="0" href="/article/jekyll-with-docker-and-wsl2">jekyll 블로그 wsl2 + docker + vscode 에서 작업하기<!-- --> →</a></div></div><footer class="MuiBox-root mui-ew9xcw"><div class="MuiContainer-root MuiContainer-maxWidthLg mui-11qhvf2"><p class="MuiTypography-root MuiTypography-body2 mui-zt7ovo">© <!-- -->2022-2025<!-- --> <!-- -->Yeppyshiba Blog<!-- -->. All rights reserved.</p><p class="MuiTypography-root MuiTypography-body2 mui-zt7ovo"><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineHover mui-1oyp1ud" href="https://www.flaticon.com/free-icons/akita-inu" target="_blank" rel="noopener noreferrer" title="akita inu icons">Akita inu icons created by tulpahn - Flaticon</a></p></div></footer><script src="/_next/static/chunks/webpack-914a75f897d55de9.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n3:I[5244,[],\"\"]\n4:I[3866,[],\"\"]\n6:I[6213,[],\"OutletBoundary\"]\n8:I[6213,[],\"MetadataBoundary\"]\na:I[6213,[],\"ViewportBoundary\"]\nc:I[4835,[],\"\"]\n:HL[\"/_next/static/media/47cbc4e2adbc5db9-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/_next/static/css/acfb4e572a721580.css\",\"style\"]\n0:{\"P\":null,\"b\":\"gPOSGmSZwUo3g_TWgZ-PP\",\"p\":\"\",\"c\":[\"\",\"article\",\"gitlab-runner-deploy-with-docker\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"article\",{\"children\":[[\"slug\",\"gitlab-runner-deploy-with-docker\",\"d\"],{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/acfb4e572a721580.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],\"$L2\"]}],{\"children\":[\"article\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"article\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[[\"slug\",\"gitlab-runner-deploy-with-docker\",\"d\"],[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"article\",\"children\",\"$0:f:0:1:2:children:2:children:0\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[\"$L5\",null,[\"$\",\"$L6\",null,{\"children\":\"$L7\"}]]}],{},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"n-w_Oym0JEH67sB9QyuhT\",{\"children\":[[\"$\",\"$L8\",null,{\"children\":\"$L9\"}],[\"$\",\"$La\",null,{\"children\":\"$Lb\"}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}]]}],false]],"])</script><script>self.__next_f.push([1,"\"m\":\"$undefined\",\"G\":[\"$c\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"d:I[6269,[\"967\",\"static/chunks/967-5c5b4170e39d160c.js\",\"384\",\"static/chunks/384-e783c629e82d2bf8.js\",\"177\",\"static/chunks/app/layout-51091ca60201fe55.js\"],\"default\"]\ne:I[4527,[\"967\",\"static/chunks/967-5c5b4170e39d160c.js\",\"384\",\"static/chunks/384-e783c629e82d2bf8.js\",\"177\",\"static/chunks/app/layout-51091ca60201fe55.js\"],\"default\"]\nf:I[1392,[\"967\",\"static/chunks/967-5c5b4170e39d160c.js\",\"384\",\"static/chunks/384-e783c629e82d2bf8.js\",\"177\",\"static/chunks/app/layout-51091ca60201fe55.js\"],\"default\"]\n10:I[457,[\"967\",\"static/chunks/967-5c5b4170e39d160c.js\",\"384\",\"static/chunks/384-e783c629e82d2bf8.js\",\"177\",\"static/chunks/app/layout-51091ca60201fe55.js\"],\"default\"]\n11:I[766,[\"967\",\"static/chunks/967-5c5b4170e39d160c.js\",\"384\",\"static/chunks/384-e783c629e82d2bf8.js\",\"177\",\"static/chunks/app/layout-51091ca60201fe55.js\"],\"GoogleAnalytics\"]\n12:I[6336,[\"967\",\"static/chunks/967-5c5b4170e39d160c.js\",\"384\",\"static/chunks/384-e783c629e82d2bf8.js\",\"177\",\"static/chunks/app/layout-51091ca60201fe55.js\"],\"GAPageView\"]\n"])</script><script>self.__next_f.push([1,"2:[\"$\",\"html\",null,{\"lang\":\"en\",\"suppressHydrationWarning\":true,\"children\":[\"$\",\"body\",null,{\"children\":[[[\"$\",\"script\",\"mui-color-scheme-init\",{\"suppressHydrationWarning\":true,\"nonce\":\"$undefined\",\"dangerouslySetInnerHTML\":{\"__html\":\"(function() {\\ntry {\\n  let colorScheme = '';\\n  const mode = localStorage.getItem('mui-mode') || 'system';\\n  const dark = localStorage.getItem('mui-color-scheme-dark') || 'dark';\\n  const light = localStorage.getItem('mui-color-scheme-light') || 'light';\\n  if (mode === 'system') {\\n    // handle system mode\\n    const mql = window.matchMedia('(prefers-color-scheme: dark)');\\n    if (mql.matches) {\\n      colorScheme = dark\\n    } else {\\n      colorScheme = light\\n    }\\n  }\\n  if (mode === 'light') {\\n    colorScheme = light;\\n  }\\n  if (mode === 'dark') {\\n    colorScheme = dark;\\n  }\\n  if (colorScheme) {\\n    document.documentElement.classList.remove('%s'.replace('%s', light), '%s'.replace('%s', dark));\\n      document.documentElement.classList.add('%s'.replace('%s', colorScheme));document.documentElement.setAttribute('.%s', colorScheme);\\n  }\\n} catch(e){}})();\"}}]],[\"$\",\"$Ld\",null,{\"children\":[\"$\",\"$Le\",null,{\"theme\":\"$f\",\"defaultMode\":\"system\",\"children\":[[\"$\",\"$L10\",null,{\"enableColorScheme\":true}],[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[],[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}]}],[\"$\",\"$L11\",null,{\"gaId\":\"314819162\"}],[\"$\",\"$L12\",null,{}]]}]}]\n"])</script><script>self.__next_f.push([1,"13:I[4933,[\"967\",\"static/chunks/967-5c5b4170e39d160c.js\",\"337\",\"static/chunks/337-5cd165e00835bfdf.js\",\"86\",\"static/chunks/86-665701a16d36e939.js\",\"234\",\"static/chunks/234-4d7c2d5758e6aea9.js\",\"467\",\"static/chunks/467-6abad856c7981537.js\",\"355\",\"static/chunks/355-bf6d392a8a2d2d59.js\",\"225\",\"static/chunks/app/article/%5Bslug%5D/page-e6c964af98a44d22.js\"],\"default\"]\n14:I[787,[\"967\",\"static/chunks/967-5c5b4170e39d160c.js\",\"337\",\"static/chunks/337-5cd165e00835bfdf.js\",\"86\",\"static/chunks/86-665701a16d36e939.js\",\"234\",\"static/chunks/234-4d7c2d5758e6aea9.js\",\"467\",\"static/chunks/467-6abad856c7981537.js\",\"355\",\"static/chunks/355-bf6d392a8a2d2d59.js\",\"225\",\"static/chunks/app/article/%5Bslug%5D/page-e6c964af98a44d22.js\"],\"default\"]\n15:I[1309,[\"967\",\"static/chunks/967-5c5b4170e39d160c.js\",\"337\",\"static/chunks/337-5cd165e00835bfdf.js\",\"86\",\"static/chunks/86-665701a16d36e939.js\",\"234\",\"static/chunks/234-4d7c2d5758e6aea9.js\",\"467\",\"static/chunks/467-6abad856c7981537.js\",\"355\",\"static/chunks/355-bf6d392a8a2d2d59.js\",\"225\",\"static/chunks/app/article/%5Bslug%5D/page-e6c964af98a44d22.js\"],\"default\"]\n16:I[9595,[\"967\",\"static/chunks/967-5c5b4170e39d160c.js\",\"337\",\"static/chunks/337-5cd165e00835bfdf.js\",\"86\",\"static/chunks/86-665701a16d36e939.js\",\"234\",\"static/chunks/234-4d7c2d5758e6aea9.js\",\"467\",\"static/chunks/467-6abad856c7981537.js\",\"355\",\"static/chunks/355-bf6d392a8a2d2d59.js\",\"225\",\"static/chunks/app/article/%5Bslug%5D/page-e6c964af98a44d22.js\"],\"default\"]\n19:I[5436,[\"967\",\"static/chunks/967-5c5b4170e39d160c.js\",\"337\",\"static/chunks/337-5cd165e00835bfdf.js\",\"86\",\"static/chunks/86-665701a16d36e939.js\",\"234\",\"static/chunks/234-4d7c2d5758e6aea9.js\",\"467\",\"static/chunks/467-6abad856c7981537.js\",\"355\",\"static/chunks/355-bf6d392a8a2d2d59.js\",\"225\",\"static/chunks/app/article/%5Bslug%5D/page-e6c964af98a44d22.js\"],\"default\"]\n1a:I[7013,[\"967\",\"static/chunks/967-5c5b4170e39d160c.js\",\"337\",\"static/chunks/337-5cd165e00835bfdf.js\",\"86\",\"static/chunks/86-665701a16d36e939.js\",\"234\",\"static/chunks/234-4d7c2d5758e6aea9.js\",\"467\",\"static/chunks/"])</script><script>self.__next_f.push([1,"467-6abad856c7981537.js\",\"355\",\"static/chunks/355-bf6d392a8a2d2d59.js\",\"225\",\"static/chunks/app/article/%5Bslug%5D/page-e6c964af98a44d22.js\"],\"default\"]\n1b:I[8173,[\"967\",\"static/chunks/967-5c5b4170e39d160c.js\",\"337\",\"static/chunks/337-5cd165e00835bfdf.js\",\"86\",\"static/chunks/86-665701a16d36e939.js\",\"234\",\"static/chunks/234-4d7c2d5758e6aea9.js\",\"467\",\"static/chunks/467-6abad856c7981537.js\",\"355\",\"static/chunks/355-bf6d392a8a2d2d59.js\",\"225\",\"static/chunks/app/article/%5Bslug%5D/page-e6c964af98a44d22.js\"],\"\"]\n1c:I[9234,[\"967\",\"static/chunks/967-5c5b4170e39d160c.js\",\"337\",\"static/chunks/337-5cd165e00835bfdf.js\",\"86\",\"static/chunks/86-665701a16d36e939.js\",\"234\",\"static/chunks/234-4d7c2d5758e6aea9.js\",\"467\",\"static/chunks/467-6abad856c7981537.js\",\"355\",\"static/chunks/355-bf6d392a8a2d2d59.js\",\"225\",\"static/chunks/app/article/%5Bslug%5D/page-e6c964af98a44d22.js\"],\"default\"]\n1d:I[2282,[\"967\",\"static/chunks/967-5c5b4170e39d160c.js\",\"337\",\"static/chunks/337-5cd165e00835bfdf.js\",\"86\",\"static/chunks/86-665701a16d36e939.js\",\"234\",\"static/chunks/234-4d7c2d5758e6aea9.js\",\"467\",\"static/chunks/467-6abad856c7981537.js\",\"355\",\"static/chunks/355-bf6d392a8a2d2d59.js\",\"225\",\"static/chunks/app/article/%5Bslug%5D/page-e6c964af98a44d22.js\"],\"default\"]\n1e:I[6656,[\"967\",\"static/chunks/967-5c5b4170e39d160c.js\",\"337\",\"static/chunks/337-5cd165e00835bfdf.js\",\"86\",\"static/chunks/86-665701a16d36e939.js\",\"234\",\"static/chunks/234-4d7c2d5758e6aea9.js\",\"467\",\"static/chunks/467-6abad856c7981537.js\",\"355\",\"static/chunks/355-bf6d392a8a2d2d59.js\",\"225\",\"static/chunks/app/article/%5Bslug%5D/page-e6c964af98a44d22.js\"],\"default\"]\n1f:I[3345,[\"967\",\"static/chunks/967-5c5b4170e39d160c.js\",\"337\",\"static/chunks/337-5cd165e00835bfdf.js\",\"86\",\"static/chunks/86-665701a16d36e939.js\",\"234\",\"static/chunks/234-4d7c2d5758e6aea9.js\",\"467\",\"static/chunks/467-6abad856c7981537.js\",\"355\",\"static/chunks/355-bf6d392a8a2d2d59.js\",\"225\",\"static/chunks/app/article/%5Bslug%5D/page-e6c964af98a44d22.js\"],\"default\"]\n20:I[9561,[\"967\",\"static/chunks/967-5c5b4170e39d160c.js\",\"337\",\"sta"])</script><script>self.__next_f.push([1,"tic/chunks/337-5cd165e00835bfdf.js\",\"86\",\"static/chunks/86-665701a16d36e939.js\",\"234\",\"static/chunks/234-4d7c2d5758e6aea9.js\",\"467\",\"static/chunks/467-6abad856c7981537.js\",\"355\",\"static/chunks/355-bf6d392a8a2d2d59.js\",\"225\",\"static/chunks/app/article/%5Bslug%5D/page-e6c964af98a44d22.js\"],\"default\"]\n17:T2f9e,"])</script><script>self.__next_f.push([1,"\n## 서론\n\njekyll 블로그를 사용하면서 github action 에 대해서 많이 부러움을 느꼈습니다.\n\n![](/images/posts/archive/2434BC4257A04CAC1D.jpg)\n\n여기서는 gitlab 과 gitlab-runner (+ nexus) 를 설치하여 나도 자동적으로 빌드와 배포가 되도록 CI (Continuous Integration) / CD (Continuous Deployment) 를 구성 해보았습니다.\n\n## Basic Concept\n\n![발로 그린 diagram](/images/posts/archive/runner-diagram.png)\n\n기본 컨셉은 다음과 같습니다! 코드를 보내면 자동으로 도커 이미지를 생성하고 배포 대상 서버에서 컨테이너를 실행!\n\n1. gitlab 으로 코드를 커밋\n2. build\n\n- CI/CD (gitlab runner) 가 실행됨\n- 코드를 도커 이미지 로 빌드하고 사설 도커 저장소 (이하 _nexus_) 로 배포 진행\n\n3. deploy\n\n- 대상 원격지 서버로의 SSH 키 등록\n- 대상 원격지 서버에 SSH 명령어 전달 (_nexus_ 로 특정 리비전을 가져와서 컨테이너를 실행)\n\n## POC (Proof-Of-Concept)\n\n### 먼저 설치할 것들\n\n물론 구성을 위해서 아래의 솔루션들이 필요합니다. 이 부분 설치는 별도의 내용을 참조하세요!  \n기본적으로 손쉬운 서버 설정을 위해서 빌드서버 / 배포서버 모두 _docker engine_ 이 설치되어 있다고 가정합니다.\n\n- gitlab 설치\n- sonatype nexus3 설치\n\n### sonatype nexus3 설정\n\n아래 문서를 참고 하여, 설치된 sonaytype nexus3 에서 docker 저장소를 설정합니다.\n\n[사내 Docker Registry 만들기 (Nexus3 기반)](https://velog.io/@king/private-docker-registry)\n\n\u003e nexus docker 로그인 연결을 그냥 admin 으로 진행 하는게 낫습니다.\n\u003e\n\u003e 위 블로그의 내용대로 nexus 설정에 다음과 세팅이 필요합니다.\n\u003e\n\u003e - realm 에 docker bearer token realm 추가 필요\n\u003e - docker-hosted 에 api v1 + 포트 추가 (8082)\n\n### gitlab-runner-network 추가\n\n빌드서버에서 gitlab 만 네트워크를 분리하기 위하여 아래 명령어를 통해 네트워크를 추가합니다.  \n각 컨테이너간 통신은 hostname 으로 호출하게 됩니다.\n\n```bash\n$ sudo docker network create gitlab-runner-net\n62322b083c76808fd3502b7388c36e7dca5087059bf688434a7dc7573dba103b\n```\n\n### gitlab-runner 설정값 추가\n\ngitlab runner 기본 설정값을 추가 합니다.\n\n```bash\n$ sudo mkdir -p /etc/srv/gitlab-runner\n$ sudo touch /etc/srv/gitlab-runner/config.toml\n```\n\n### gitlab-runner / gitlab-dind 컨테이너 추가\n\ngitlab runner 연결을 위해서 두가지 컨테이너를 추가합니다.\n\n다음과 같은 프로세스로 runner 가 실행됩니다.\n\n1. gitlab-runner 는 runner 가 실행시 gitlab-dind 컨테이너를 실행시키는 주체 입니다.\n2. 실행된 gitlab-dind 컨테이너는 도커 이미지를 빌드를 합니다.\n\n![docker-in-docker !?](https://www.docker.com/wp-content/uploads/2013/08/docker-meme.jpg)\n\n```bash\n$ sudo docker run -d \\\n--name gitlab-runner \\\n--restart always \\\n--network gitlab-runner-net \\\n-v /srv/gitlab-runner/config.toml:/etc/gitlab-runner/config.toml \\\n-e DOCKER_HOST=tcp://gitlab-dind:2375 \\\ngitlab/gitlab-runner:alpine\n```\n\n\u003e 위에서 만들어둔 외부의 config.toml 파일을 매핑시켜 줍니다.  \n\u003e 추후 수정을 용이하게 하기 위함 입니다.\n\n```bash\n$ sudo docker run -d \\\n--name gitlab-dind \\\n--privileged \\\n--restart always \\\n--network gitlab-runner-net \\\n-v /var/lib/docker \\\ndocker:18.09.9-dind\n```\n\n### gitlab-dind 컨테이너 수정\n\n추가된 nexus 는 https 가 지원되지 않아 insecure registry 로 등록이 필요합니다.\n*gitlab-dind 컨테이너*에 콘솔로 접속하여 수정을 진행합니다.\n\n```bash\n$ echo \"{ \\\"insecure-registries\\\" : [\\\"nexus..somewhere.com:8082\\\"] }\" \u003e /etc/docker/daemon.json\n```\n\n### gitlab-runner 등록\n\n이제 gitlab runner 를 gitlab 에 연동 되도록 등록해야 합니다.\n\n설정의 Runners 항목을 참조하여 등록 토큰 등을 설정합니다\n\n![](/images/posts/archive/gitlab_runner_token.png)\n\n```bash\n$ sudo docker run -it --rm \\\n -v /srv/gitlab-runner/config.toml:/etc/gitlab-runner/config.toml \\\n gitlab/gitlab-runner:alpine \\\n register \\\n --executor docker \\\n --docker-image docker:18.09.9 \\\n --docker-volumes /var/run/docker.sock:/var/run/docker.sock\n[sudo] password for someone:\nRuntime platform arch=amd64 os=linux pid=6 revision=a998cacd version=13.2.2\nRunning in system-mode.\nPlease enter the gitlab-ci coordinator URL (e.g. https://gitlab.com/):\nhttp://somewhere.com:8000/\nPlease enter the gitlab-ci token for this runner:\n[gitlab-ci-token]\nPlease enter the gitlab-ci description for this runner:\n[d6cfe8946db3]: Docker Runner\nPlease enter the gitlab-ci tags for this runner (comma separated):\nRegistering runner... succeeded runner=Jxyieb2E\nPlease enter the executor: shell, ssh, virtualbox, docker+machine, custom, docker-ssh, parallels, dockerssh+machine, kubernetes, docker:\n[docker]:\nPlease enter the default Docker image (e.g. ruby:2.6):\n[docker:18.09.9]:\nRunner registered successfully. Feel free to start it, but if it's running already the config should be\nautomatically reloaded!\n```\n\n정상적으로 추가되었다면 ci 설정에서 해당 runner 가 노출되게 됩니다.\n\n### gitlab ci variables 등록\n\n#### ssh 키 생성 (클라이언트)\n\nssh 키는 server 에 id / password 입력 없이 접속하기 위해서 생성합니다.\n여기에서는 ssh private key 만 gitlab 에 저장할 예정이며, public key 는 서버로 전송할 예정입니다.\n\nssh-keygen 명령어로 ssh 키를 생성합니다.\n\n```bash\n$ ssh-keygen\nGenerating public/private rsa key pair.\nEnter file in which to save the key (/root/.ssh/id_rsa):\nCreated directory '/root/.ssh'.\nEnter passphrase (empty for no passphrase):\nEnter same passphrase again:\nYour identification has been saved in /root/.ssh/id_rsa.\nYour public key has been saved in /root/.ssh/id_rsa.pub.\nThe key fingerprint is:\nd0:82:24:8e:d7:f1:bb:9b:33:53:96:93:49:da:9b:e3 root@localhost\nThe key's randomart image is:\n+---[RSA 2048]----+\n|.*++ o.o. |\n|.+B + oo. |\n| +++ *+. |\n| .o.Oo.+E |\n| ++B.S. |\n| o * =. |\n| + = o |\n| + = = . |\n| + o o |\n+----[SHA256]-----+\n```\n\nssh-copy-id 명령어로 ssh 키를 대상 서버로 복사합니다.\n\n```bash\n$ ssh-copy-id someone@somewhere.com\n```\n\nssh 연결을 확인해보면 key 없이 잘 접속 되는 것을 확인됩니다.\n\n```bash\n$ ssh someone@somewhere.com\n```\n\nprivate key 는 gitlab ci 용 변수로 담기 위해서 복사한 후 .ssh 폴더 자체를 삭제합니다.\n\n```bash\n$ cat ~/.ssh/id_rsa\n-----BEGIN OPENSSH PRIVATE KEY-----\nb3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAABlwAAAAdzc2gtcn\n...\nu+Hr4KoWBWAJVdAAAAEXJvb3RANmMwNzdhYzZkZDVjAQ==\n-----END OPENSSH PRIVATE KEY-----\n$ rm -rf ~/.ssh\n```\n\n#### sudo 등록 (서버)\n\n보안상의 이유로 *배포할 서버*를 접근시에는 root 가 아니라 일반 사용자로 등록했습니다.  \n다만 이럴 경우 일반 사용자가 docker 를 실행시킬 권한이 제한됩니다. (root 로 구동됨)\n\n따라서 docker 명령어는 sudo 로 실행해야 하며, 이럴 경우 비밀번호 묻는 프롬프트가 나와서 ssh 명령어를 전달하는 입장에서는 제한이 됩니다.  \n그러하므로 visudo 로 비밀번호를 묻지 않도록 제한할 예정입니다.\n\nroot 로 visudo 를 실행하여 docker 명령어만 패스워드 묻지 않도록 허용 합니다.\n\n```\n## Allow root to run any commands anywhere\nroot ALL=(ALL) ALL\nsomeone ALL= NOPASSWD: /bin/docker\n```\n\n#### docker insecure registries 등록 (서버)\n\n사설 docker registry 를 생성하였기 때문에 gitlab 과 배포할 서버 모두 insecure-registries 로 등록이 필요합니다.  \ngitlab-dind 는 이미 등록이 완료되어서 여기에서는 배포할 서버에만 등록해줍니다.\n\n/etc/docker/daemon.json 파일을 수정해서 아래의 경로를 추가해줍니다.\n\n```json\n{\n    \"insecure-registries\": [\"nexus.somewhere.com:8082\"]\n}\n```\n\n#### 등록 (gitlab)\n\n곧 작성할 gitlab-ci.yml 파일에 쓰일 변수들이 있습니다.  \nyaml 파일에서 바로 정의될 변수도 있지만, 외부에서 쓰일 변수들 설정이 필요하여 gitlab ci 설정을 들어가도록 하겠습니다\n\n설정 → CI / CD → Variables 순서대로 접근합니다.\n\n![](/images/posts/archive/ci_variables.png)\n\n아래는 등록된 모습이며 각각 다음의 내용을 기술합니다.\n\n| 타입      | 키                      | 설명                                                  | 예제                        |\n| --------- | ----------------------- | ----------------------------------------------------- | --------------------------- |\n| Variables | DOCKER_PRIVATE_HOST     | 도커 컨테이너 호스트입니다. nexus3 주소를 입력합니다. | nexus.somewhere.com:8082    |\n| Variables | DOCKER_PRIVATE_PASSWORD | nexus 비밀번호 입니다.                                | nexus_password              |\n| Variables | DOCKER_PRIVATE_USER     | nexus 아이디 입니다.                                  | admin                       |\n| Variables | PROD_SERVER_IP          | 배포할 원격 호스트입니다.                             | deploy.com                  |\n| Variables | PROD_SERVER_PORT        | 접근할 원격 호스트 SSH 포트입니다.                    | 22                          |\n| Variables | PROD_SERVER_USER        | 접근할 원격 호스트 유저입니다.                        | deployer                    |\n| Variables | SSH_PRIVATE_KEY         | 생성된 private key 입니다.                            | -----BEGIN OPENSSH ... 후략 |\n\n### gitlab-ci.yml 파일 등록\n\ngitlab ci 관련해서는 [이 문서](https://velog.io/@wickedev/Gitlab-CICD-%ED%8A%9C%ED%86%A0%EB%A6%AC%EC%96%BC-bljzphditt) 를 보시고,  \n우선은 commit \u0026 push 시 발동하는 파이프라인을 작성하겠습니다.\n\n해당 CI 파일은 두가지 스테이지 (build / deploy) 로 나누어져 있으며 각각 하는 역할은 다음과 같습니다.\n\n- build - 도커 이미지 생성\n- deploy - 원격지 서버로 배포\n\n```yaml\nimage: monoless/ansible-docker:18.09.9-03\nservices:\n - name: monoless/ansible-docker:18.09.9-dind-03\n command: [\"--insecure-registry=nexus.somwwhere.com:8082\"]\nstages:\n - build\n - deploy\nvariables:\n IMAGE_NAME: $DOCKER_PRIVATE_HOST/hello-world:$CI_PIPELINE_ID\n\nbefore_script:\n - docker info\n\ncache:\n paths:\n - node_modules/\nbuild:\n stage: build\n script:\n - ls -al\n - docker container ls -a\n - docker build . -t $IMAGE_NAME\n - docker login -u $DOCKER_PRIVATE_USER -p $DOCKER_PRIVATE_PASSWORD $DOCKER_PRIVATE_HOST\n - docker push $IMAGE_NAME\n - docker images | grep 'somewhere.com'\n\ndeploy-image:\n stage: deploy\n before_script:\n - 'which ssh-agent || (apk update \u0026\u0026 apk add openssh-client)'\n - eval $(ssh-agent -s)\n - echo \"$SSH_PRIVATE_KEY\" | tr -d '\\r' | ssh-add - \u003e /dev/null\n - mkdir -p ~/.ssh\n - chmod 700 ~/.ssh\n - ssh-keyscan -p $PROD_SERVER_PORT $PROD_SERVER_IP \u003e\u003e ~/.ssh/known_hosts\n - chmod 644 ~/.ssh/known_hosts\n script:\n - ssh $PROD_SERVER_USER@$PROD_SERVER_IP -p$PROD_SERVER_PORT \"sudo docker login \\\"${DOCKER_PRIVATE_HOST}\\\" -\nu \\\"${DOCKER_PRIVATE_USER}\\\" -p \\\"${DOCKER_PRIVATE_PASSWORD}\\\" \u0026\u0026 sudo docker pull $IMAGE_NAME \u0026\u0026 sudo docker\nstop \\$(sudo docker ps -aq) \u0026\u0026 sudo docker rm \\$(sudo docker ps -aq) \u0026\u0026 sudo docker run -d --restart=unlessstopped -p 5000:5000 $IMAGE_NAME\"\n```\n\ngitlab-ci.yml 파일이 생성되면, 해당 저장소의 수정이 된 것으로 판단 자동적으로 파이프라인이 실행됩니다.\n\n이후 정상적으로 배포된 docker image 와 원격지 서버를 확인 하였습니다.\n\n![](/images/posts/archive/successful_build.png)\n\n## 결론\n\n지금 작성한 gitlab-ci 코드를 통해서 지속적인 통합과 배포를 구성하였습니다.\n\n이점으로는\n\n1. 코드로 손쉬운 통합이 가능합니다. (다만 gitlab-runner 에 대한 어느정도 학습이 필요합니다.)\n2. 솔직히 jenkins 보다는 쉬운거 같습니다....\n\n아쉬운 점으로는\n\n1. 테스트/스테이지 환경에 대한 부분은 브렌치를 통해서 구현이 필요할 것 같습니다.\n2. 여러 서버로 배포시 대응이 필요합니다.\n"])</script><script>self.__next_f.push([1,"18:T59cd,"])</script><script>self.__next_f.push([1,"\"use strict\";\nconst {Fragment: _Fragment, jsx: _jsx, jsxs: _jsxs} = arguments[0];\nconst {useMDXComponents: _provideComponents} = arguments[0];\nfunction _createMdxContent(props) {\n  const _components = {\n    a: \"a\",\n    blockquote: \"blockquote\",\n    br: \"br\",\n    code: \"code\",\n    em: \"em\",\n    h2: \"h2\",\n    h3: \"h3\",\n    h4: \"h4\",\n    img: \"img\",\n    li: \"li\",\n    ol: \"ol\",\n    p: \"p\",\n    pre: \"pre\",\n    table: \"table\",\n    tbody: \"tbody\",\n    td: \"td\",\n    th: \"th\",\n    thead: \"thead\",\n    tr: \"tr\",\n    ul: \"ul\",\n    ..._provideComponents(),\n    ...props.components\n  };\n  return _jsxs(_Fragment, {\n    children: [_jsx(_components.h2, {\n      children: \"서론\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"jekyll 블로그를 사용하면서 github action 에 대해서 많이 부러움을 느꼈습니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/images/posts/archive/2434BC4257A04CAC1D.jpg\",\n        alt: \"\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"여기서는 gitlab 과 gitlab-runner (+ nexus) 를 설치하여 나도 자동적으로 빌드와 배포가 되도록 CI (Continuous Integration) / CD (Continuous Deployment) 를 구성 해보았습니다.\"\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"Basic Concept\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/images/posts/archive/runner-diagram.png\",\n        alt: \"발로 그린 diagram\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"기본 컨셉은 다음과 같습니다! 코드를 보내면 자동으로 도커 이미지를 생성하고 배포 대상 서버에서 컨테이너를 실행!\"\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"gitlab 으로 코드를 커밋\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"build\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"CI/CD (gitlab runner) 가 실행됨\"\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"코드를 도커 이미지 로 빌드하고 사설 도커 저장소 (이하 \", _jsx(_components.em, {\n          children: \"nexus\"\n        }), \") 로 배포 진행\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.ol, {\n      start: \"3\",\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"deploy\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"대상 원격지 서버로의 SSH 키 등록\"\n      }), \"\\n\", _jsxs(_components.li, {\n        children: [\"대상 원격지 서버에 SSH 명령어 전달 (\", _jsx(_components.em, {\n          children: \"nexus\"\n        }), \" 로 특정 리비전을 가져와서 컨테이너를 실행)\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"POC (Proof-Of-Concept)\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"먼저 설치할 것들\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"물론 구성을 위해서 아래의 솔루션들이 필요합니다. 이 부분 설치는 별도의 내용을 참조하세요!\", _jsx(_components.br, {}), \"\\n\", \"기본적으로 손쉬운 서버 설정을 위해서 빌드서버 / 배포서버 모두 \", _jsx(_components.em, {\n        children: \"docker engine\"\n      }), \" 이 설치되어 있다고 가정합니다.\"]\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"gitlab 설치\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"sonatype nexus3 설치\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"sonatype nexus3 설정\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"아래 문서를 참고 하여, 설치된 sonaytype nexus3 에서 docker 저장소를 설정합니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.a, {\n        href: \"https://velog.io/@king/private-docker-registry\",\n        children: \"사내 Docker Registry 만들기 (Nexus3 기반)\"\n      })\n    }), \"\\n\", _jsxs(_components.blockquote, {\n      children: [\"\\n\", _jsx(_components.p, {\n        children: \"nexus docker 로그인 연결을 그냥 admin 으로 진행 하는게 낫습니다.\"\n      }), \"\\n\", _jsx(_components.p, {\n        children: \"위 블로그의 내용대로 nexus 설정에 다음과 세팅이 필요합니다.\"\n      }), \"\\n\", _jsxs(_components.ul, {\n        children: [\"\\n\", _jsx(_components.li, {\n          children: \"realm 에 docker bearer token realm 추가 필요\"\n        }), \"\\n\", _jsx(_components.li, {\n          children: \"docker-hosted 에 api v1 + 포트 추가 (8082)\"\n        }), \"\\n\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"gitlab-runner-network 추가\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"빌드서버에서 gitlab 만 네트워크를 분리하기 위하여 아래 명령어를 통해 네트워크를 추가합니다.\", _jsx(_components.br, {}), \"\\n\", \"각 컨테이너간 통신은 hostname 으로 호출하게 됩니다.\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-bash\",\n        children: \"$ sudo docker network create gitlab-runner-net\\n62322b083c76808fd3502b7388c36e7dca5087059bf688434a7dc7573dba103b\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"gitlab-runner 설정값 추가\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"gitlab runner 기본 설정값을 추가 합니다.\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-bash\",\n        children: \"$ sudo mkdir -p /etc/srv/gitlab-runner\\n$ sudo touch /etc/srv/gitlab-runner/config.toml\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"gitlab-runner / gitlab-dind 컨테이너 추가\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"gitlab runner 연결을 위해서 두가지 컨테이너를 추가합니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"다음과 같은 프로세스로 runner 가 실행됩니다.\"\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"gitlab-runner 는 runner 가 실행시 gitlab-dind 컨테이너를 실행시키는 주체 입니다.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"실행된 gitlab-dind 컨테이너는 도커 이미지를 빌드를 합니다.\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"https://www.docker.com/wp-content/uploads/2013/08/docker-meme.jpg\",\n        alt: \"docker-in-docker !?\"\n      })\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-bash\",\n        children: \"$ sudo docker run -d \\\\\\n--name gitlab-runner \\\\\\n--restart always \\\\\\n--network gitlab-runner-net \\\\\\n-v /srv/gitlab-runner/config.toml:/etc/gitlab-runner/config.toml \\\\\\n-e DOCKER_HOST=tcp://gitlab-dind:2375 \\\\\\ngitlab/gitlab-runner:alpine\\n\"\n      })\n    }), \"\\n\", _jsxs(_components.blockquote, {\n      children: [\"\\n\", _jsxs(_components.p, {\n        children: [\"위에서 만들어둔 외부의 config.toml 파일을 매핑시켜 줍니다.\", _jsx(_components.br, {}), \"\\n\", \"추후 수정을 용이하게 하기 위함 입니다.\"]\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-bash\",\n        children: \"$ sudo docker run -d \\\\\\n--name gitlab-dind \\\\\\n--privileged \\\\\\n--restart always \\\\\\n--network gitlab-runner-net \\\\\\n-v /var/lib/docker \\\\\\ndocker:18.09.9-dind\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"gitlab-dind 컨테이너 수정\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"추가된 nexus 는 https 가 지원되지 않아 insecure registry 로 등록이 필요합니다.\\n\", _jsx(_components.em, {\n        children: \"gitlab-dind 컨테이너\"\n      }), \"에 콘솔로 접속하여 수정을 진행합니다.\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-bash\",\n        children: \"$ echo \\\"{ \\\\\\\"insecure-registries\\\\\\\" : [\\\\\\\"nexus..somewhere.com:8082\\\\\\\"] }\\\" \u003e /etc/docker/daemon.json\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"gitlab-runner 등록\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이제 gitlab runner 를 gitlab 에 연동 되도록 등록해야 합니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"설정의 Runners 항목을 참조하여 등록 토큰 등을 설정합니다\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/images/posts/archive/gitlab_runner_token.png\",\n        alt: \"\"\n      })\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-bash\",\n        children: \"$ sudo docker run -it --rm \\\\\\n -v /srv/gitlab-runner/config.toml:/etc/gitlab-runner/config.toml \\\\\\n gitlab/gitlab-runner:alpine \\\\\\n register \\\\\\n --executor docker \\\\\\n --docker-image docker:18.09.9 \\\\\\n --docker-volumes /var/run/docker.sock:/var/run/docker.sock\\n[sudo] password for someone:\\nRuntime platform arch=amd64 os=linux pid=6 revision=a998cacd version=13.2.2\\nRunning in system-mode.\\nPlease enter the gitlab-ci coordinator URL (e.g. https://gitlab.com/):\\nhttp://somewhere.com:8000/\\nPlease enter the gitlab-ci token for this runner:\\n[gitlab-ci-token]\\nPlease enter the gitlab-ci description for this runner:\\n[d6cfe8946db3]: Docker Runner\\nPlease enter the gitlab-ci tags for this runner (comma separated):\\nRegistering runner... succeeded runner=Jxyieb2E\\nPlease enter the executor: shell, ssh, virtualbox, docker+machine, custom, docker-ssh, parallels, dockerssh+machine, kubernetes, docker:\\n[docker]:\\nPlease enter the default Docker image (e.g. ruby:2.6):\\n[docker:18.09.9]:\\nRunner registered successfully. Feel free to start it, but if it's running already the config should be\\nautomatically reloaded!\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"정상적으로 추가되었다면 ci 설정에서 해당 runner 가 노출되게 됩니다.\"\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"gitlab ci variables 등록\"\n    }), \"\\n\", _jsx(_components.h4, {\n      children: \"ssh 키 생성 (클라이언트)\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ssh 키는 server 에 id / password 입력 없이 접속하기 위해서 생성합니다.\\n여기에서는 ssh private key 만 gitlab 에 저장할 예정이며, public key 는 서버로 전송할 예정입니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ssh-keygen 명령어로 ssh 키를 생성합니다.\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-bash\",\n        children: \"$ ssh-keygen\\nGenerating public/private rsa key pair.\\nEnter file in which to save the key (/root/.ssh/id_rsa):\\nCreated directory '/root/.ssh'.\\nEnter passphrase (empty for no passphrase):\\nEnter same passphrase again:\\nYour identification has been saved in /root/.ssh/id_rsa.\\nYour public key has been saved in /root/.ssh/id_rsa.pub.\\nThe key fingerprint is:\\nd0:82:24:8e:d7:f1:bb:9b:33:53:96:93:49:da:9b:e3 root@localhost\\nThe key's randomart image is:\\n+---[RSA 2048]----+\\n|.*++ o.o. |\\n|.+B + oo. |\\n| +++ *+. |\\n| .o.Oo.+E |\\n| ++B.S. |\\n| o * =. |\\n| + = o |\\n| + = = . |\\n| + o o |\\n+----[SHA256]-----+\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ssh-copy-id 명령어로 ssh 키를 대상 서버로 복사합니다.\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-bash\",\n        children: \"$ ssh-copy-id someone@somewhere.com\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"ssh 연결을 확인해보면 key 없이 잘 접속 되는 것을 확인됩니다.\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-bash\",\n        children: \"$ ssh someone@somewhere.com\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"private key 는 gitlab ci 용 변수로 담기 위해서 복사한 후 .ssh 폴더 자체를 삭제합니다.\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-bash\",\n        children: \"$ cat ~/.ssh/id_rsa\\n-----BEGIN OPENSSH PRIVATE KEY-----\\nb3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAABlwAAAAdzc2gtcn\\n...\\nu+Hr4KoWBWAJVdAAAAEXJvb3RANmMwNzdhYzZkZDVjAQ==\\n-----END OPENSSH PRIVATE KEY-----\\n$ rm -rf ~/.ssh\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h4, {\n      children: \"sudo 등록 (서버)\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"보안상의 이유로 \", _jsx(_components.em, {\n        children: \"배포할 서버\"\n      }), \"를 접근시에는 root 가 아니라 일반 사용자로 등록했습니다.\", _jsx(_components.br, {}), \"\\n\", \"다만 이럴 경우 일반 사용자가 docker 를 실행시킬 권한이 제한됩니다. (root 로 구동됨)\"]\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"따라서 docker 명령어는 sudo 로 실행해야 하며, 이럴 경우 비밀번호 묻는 프롬프트가 나와서 ssh 명령어를 전달하는 입장에서는 제한이 됩니다.\", _jsx(_components.br, {}), \"\\n\", \"그러하므로 visudo 로 비밀번호를 묻지 않도록 제한할 예정입니다.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"root 로 visudo 를 실행하여 docker 명령어만 패스워드 묻지 않도록 허용 합니다.\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        children: \"## Allow root to run any commands anywhere\\nroot ALL=(ALL) ALL\\nsomeone ALL= NOPASSWD: /bin/docker\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h4, {\n      children: \"docker insecure registries 등록 (서버)\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"사설 docker registry 를 생성하였기 때문에 gitlab 과 배포할 서버 모두 insecure-registries 로 등록이 필요합니다.\", _jsx(_components.br, {}), \"\\n\", \"gitlab-dind 는 이미 등록이 완료되어서 여기에서는 배포할 서버에만 등록해줍니다.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"/etc/docker/daemon.json 파일을 수정해서 아래의 경로를 추가해줍니다.\"\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-json\",\n        children: \"{\\n    \\\"insecure-registries\\\": [\\\"nexus.somewhere.com:8082\\\"]\\n}\\n\"\n      })\n    }), \"\\n\", _jsx(_components.h4, {\n      children: \"등록 (gitlab)\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"곧 작성할 gitlab-ci.yml 파일에 쓰일 변수들이 있습니다.\", _jsx(_components.br, {}), \"\\n\", \"yaml 파일에서 바로 정의될 변수도 있지만, 외부에서 쓰일 변수들 설정이 필요하여 gitlab ci 설정을 들어가도록 하겠습니다\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"설정 → CI / CD → Variables 순서대로 접근합니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/images/posts/archive/ci_variables.png\",\n        alt: \"\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"아래는 등록된 모습이며 각각 다음의 내용을 기술합니다.\"\n    }), \"\\n\", _jsxs(_components.table, {\n      children: [_jsx(_components.thead, {\n        children: _jsxs(_components.tr, {\n          children: [_jsx(_components.th, {\n            children: \"타입\"\n          }), _jsx(_components.th, {\n            children: \"키\"\n          }), _jsx(_components.th, {\n            children: \"설명\"\n          }), _jsx(_components.th, {\n            children: \"예제\"\n          })]\n        })\n      }), _jsxs(_components.tbody, {\n        children: [_jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: \"Variables\"\n          }), _jsx(_components.td, {\n            children: \"DOCKER_PRIVATE_HOST\"\n          }), _jsx(_components.td, {\n            children: \"도커 컨테이너 호스트입니다. nexus3 주소를 입력합니다.\"\n          }), _jsx(_components.td, {\n            children: \"nexus.somewhere.com:8082\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: \"Variables\"\n          }), _jsx(_components.td, {\n            children: \"DOCKER_PRIVATE_PASSWORD\"\n          }), _jsx(_components.td, {\n            children: \"nexus 비밀번호 입니다.\"\n          }), _jsx(_components.td, {\n            children: \"nexus_password\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: \"Variables\"\n          }), _jsx(_components.td, {\n            children: \"DOCKER_PRIVATE_USER\"\n          }), _jsx(_components.td, {\n            children: \"nexus 아이디 입니다.\"\n          }), _jsx(_components.td, {\n            children: \"admin\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: \"Variables\"\n          }), _jsx(_components.td, {\n            children: \"PROD_SERVER_IP\"\n          }), _jsx(_components.td, {\n            children: \"배포할 원격 호스트입니다.\"\n          }), _jsx(_components.td, {\n            children: \"deploy.com\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: \"Variables\"\n          }), _jsx(_components.td, {\n            children: \"PROD_SERVER_PORT\"\n          }), _jsx(_components.td, {\n            children: \"접근할 원격 호스트 SSH 포트입니다.\"\n          }), _jsx(_components.td, {\n            children: \"22\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: \"Variables\"\n          }), _jsx(_components.td, {\n            children: \"PROD_SERVER_USER\"\n          }), _jsx(_components.td, {\n            children: \"접근할 원격 호스트 유저입니다.\"\n          }), _jsx(_components.td, {\n            children: \"deployer\"\n          })]\n        }), _jsxs(_components.tr, {\n          children: [_jsx(_components.td, {\n            children: \"Variables\"\n          }), _jsx(_components.td, {\n            children: \"SSH_PRIVATE_KEY\"\n          }), _jsx(_components.td, {\n            children: \"생성된 private key 입니다.\"\n          }), _jsx(_components.td, {\n            children: \"-----BEGIN OPENSSH ... 후략\"\n          })]\n        })]\n      })]\n    }), \"\\n\", _jsx(_components.h3, {\n      children: \"gitlab-ci.yml 파일 등록\"\n    }), \"\\n\", _jsxs(_components.p, {\n      children: [\"gitlab ci 관련해서는 \", _jsx(_components.a, {\n        href: \"https://velog.io/@wickedev/Gitlab-CICD-%ED%8A%9C%ED%86%A0%EB%A6%AC%EC%96%BC-bljzphditt\",\n        children: \"이 문서\"\n      }), \" 를 보시고,\", _jsx(_components.br, {}), \"\\n\", \"우선은 commit \u0026 push 시 발동하는 파이프라인을 작성하겠습니다.\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"해당 CI 파일은 두가지 스테이지 (build / deploy) 로 나누어져 있으며 각각 하는 역할은 다음과 같습니다.\"\n    }), \"\\n\", _jsxs(_components.ul, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"build - 도커 이미지 생성\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"deploy - 원격지 서버로 배포\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.pre, {\n      children: _jsx(_components.code, {\n        className: \"language-yaml\",\n        children: \"image: monoless/ansible-docker:18.09.9-03\\nservices:\\n - name: monoless/ansible-docker:18.09.9-dind-03\\n command: [\\\"--insecure-registry=nexus.somwwhere.com:8082\\\"]\\nstages:\\n - build\\n - deploy\\nvariables:\\n IMAGE_NAME: $DOCKER_PRIVATE_HOST/hello-world:$CI_PIPELINE_ID\\n\\nbefore_script:\\n - docker info\\n\\ncache:\\n paths:\\n - node_modules/\\nbuild:\\n stage: build\\n script:\\n - ls -al\\n - docker container ls -a\\n - docker build . -t $IMAGE_NAME\\n - docker login -u $DOCKER_PRIVATE_USER -p $DOCKER_PRIVATE_PASSWORD $DOCKER_PRIVATE_HOST\\n - docker push $IMAGE_NAME\\n - docker images | grep 'somewhere.com'\\n\\ndeploy-image:\\n stage: deploy\\n before_script:\\n - 'which ssh-agent || (apk update \u0026\u0026 apk add openssh-client)'\\n - eval $(ssh-agent -s)\\n - echo \\\"$SSH_PRIVATE_KEY\\\" | tr -d '\\\\r' | ssh-add - \u003e /dev/null\\n - mkdir -p ~/.ssh\\n - chmod 700 ~/.ssh\\n - ssh-keyscan -p $PROD_SERVER_PORT $PROD_SERVER_IP \u003e\u003e ~/.ssh/known_hosts\\n - chmod 644 ~/.ssh/known_hosts\\n script:\\n - ssh $PROD_SERVER_USER@$PROD_SERVER_IP -p$PROD_SERVER_PORT \\\"sudo docker login \\\\\\\"${DOCKER_PRIVATE_HOST}\\\\\\\" -\\nu \\\\\\\"${DOCKER_PRIVATE_USER}\\\\\\\" -p \\\\\\\"${DOCKER_PRIVATE_PASSWORD}\\\\\\\" \u0026\u0026 sudo docker pull $IMAGE_NAME \u0026\u0026 sudo docker\\nstop \\\\$(sudo docker ps -aq) \u0026\u0026 sudo docker rm \\\\$(sudo docker ps -aq) \u0026\u0026 sudo docker run -d --restart=unlessstopped -p 5000:5000 $IMAGE_NAME\\\"\\n\"\n      })\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"gitlab-ci.yml 파일이 생성되면, 해당 저장소의 수정이 된 것으로 판단 자동적으로 파이프라인이 실행됩니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이후 정상적으로 배포된 docker image 와 원격지 서버를 확인 하였습니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: _jsx(_components.img, {\n        src: \"/images/posts/archive/successful_build.png\",\n        alt: \"\"\n      })\n    }), \"\\n\", _jsx(_components.h2, {\n      children: \"결론\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"지금 작성한 gitlab-ci 코드를 통해서 지속적인 통합과 배포를 구성하였습니다.\"\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"이점으로는\"\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"코드로 손쉬운 통합이 가능합니다. (다만 gitlab-runner 에 대한 어느정도 학습이 필요합니다.)\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"솔직히 jenkins 보다는 쉬운거 같습니다....\"\n      }), \"\\n\"]\n    }), \"\\n\", _jsx(_components.p, {\n      children: \"아쉬운 점으로는\"\n    }), \"\\n\", _jsxs(_components.ol, {\n      children: [\"\\n\", _jsx(_components.li, {\n        children: \"테스트/스테이지 환경에 대한 부분은 브렌치를 통해서 구현이 필요할 것 같습니다.\"\n      }), \"\\n\", _jsx(_components.li, {\n        children: \"여러 서버로 배포시 대응이 필요합니다.\"\n      }), \"\\n\"]\n    })]\n  });\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = {\n    ..._provideComponents(),\n    ...props.components\n  };\n  return MDXLayout ? _jsx(MDXLayout, {\n    ...props,\n    children: _jsx(_createMdxContent, {\n      ...props\n    })\n  }) : _createMdxContent(props);\n}\nreturn {\n  default: MDXContent\n};\n"])</script><script>self.__next_f.push([1,"5:[[\"$\",\"$L13\",null,{}],[\"$\",\"$L14\",null,{}],[\"$\",\"$L15\",null,{\"title\":\"gitlab-runnner 를 활용한 docker 배포\",\"summary\":\"여기서는 gitlab 과 gitlab-runner (+ nexus) 를 설치하여 나도 자동적으로 빌드와 배포가 되도록 CI (Continuous Integration) / CD (Continuous Deployment) 를 구성 해보았습니다.\",\"date\":\"4 years ago\",\"category\":\"coding\"}],[\"$\",\"$L16\",null,{\"post\":{\"slug\":\"gitlab-runner-deploy-with-docker\",\"title\":\"gitlab-runnner 를 활용한 docker 배포\",\"date\":\"$D2020-09-15T21:00:00.000Z\",\"summary\":\"여기서는 gitlab 과 gitlab-runner (+ nexus) 를 설치하여 나도 자동적으로 빌드와 배포가 되도록 CI (Continuous Integration) / CD (Continuous Deployment) 를 구성 해보았습니다.\",\"category\":\"coding\",\"image\":\"https://khs9628.github.io/img/infra/logo/GitLab.png\",\"embeddedImagesLocal\":\"$undefined\",\"tags\":[\"dev\",\"coding\",\"git\",\"gitlab\",\"gitlab runner\",\"docker\",\"deploy\",\"ci\",\"cd\"],\"content\":\"$17\",\"source\":{\"compiledSource\":\"$18\",\"frontmatter\":{},\"scope\":{}},\"roadAddress\":\"$undefined\",\"parcelAddress\":\"$undefined\",\"lat\":\"$undefined\",\"lng\":\"$undefined\",\"viewCount\":10}}],[\"$\",\"$L19\",null,{\"sx\":{\"mx\":\"auto\",\"width\":\"100%\",\"p\":2},\"children\":[[\"$\",\"$L1a\",null,{\"sx\":{\"my\":3}}],[\"$\",\"$L19\",null,{\"sx\":{\"mb\":3},\"children\":[\"$\",\"$L19\",null,{\"sx\":{\"mt\":1,\"display\":\"flex\",\"flexWrap\":\"wrap\",\"gap\":1},\"children\":[[\"$\",\"$L1b\",\"0\",{\"href\":\"/tag/dev\",\"passHref\":true,\"style\":{\"textDecoration\":\"none\"},\"children\":[\"$\",\"$L1c\",null,{\"label\":\"dev\",\"sx\":{\"textTransform\":\"lowercase\"}}]}],[\"$\",\"$L1b\",\"1\",{\"href\":\"/tag/coding\",\"passHref\":true,\"style\":{\"textDecoration\":\"none\"},\"children\":[\"$\",\"$L1c\",null,{\"label\":\"coding\",\"sx\":{\"textTransform\":\"lowercase\"}}]}],[\"$\",\"$L1b\",\"2\",{\"href\":\"/tag/git\",\"passHref\":true,\"style\":{\"textDecoration\":\"none\"},\"children\":[\"$\",\"$L1c\",null,{\"label\":\"git\",\"sx\":{\"textTransform\":\"lowercase\"}}]}],[\"$\",\"$L1b\",\"3\",{\"href\":\"/tag/gitlab\",\"passHref\":true,\"style\":{\"textDecoration\":\"none\"},\"children\":[\"$\",\"$L1c\",null,{\"label\":\"gitlab\",\"sx\":{\"textTransform\":\"lowercase\"}}]}],[\"$\",\"$L1b\",\"4\",{\"href\":\"/tag/gitlab-runner\",\"passHref\":true,\"style\":{\"textDecoration\":\"none\"},\"children\":[\"$\",\"$L1c\",null,{\"label\":\"gitlab runner\",\"sx\":{\"textTransform\":\"lowercase\"}}]}],[\"$\",\"$L1b\",\"5\",{\"href\":\"/tag/docker\",\"passHref\":true,\"style\":{\"textDecoration\":\"none\"},\"children\":[\"$\",\"$L1c\",null,{\"label\":\"docker\",\"sx\":{\"textTransform\":\"lowercase\"}}]}],[\"$\",\"$L1b\",\"6\",{\"href\":\"/tag/deploy\",\"passHref\":true,\"style\":{\"textDecoration\":\"none\"},\"children\":[\"$\",\"$L1c\",null,{\"label\":\"deploy\",\"sx\":{\"textTransform\":\"lowercase\"}}]}],[\"$\",\"$L1b\",\"7\",{\"href\":\"/tag/ci\",\"passHref\":true,\"style\":{\"textDecoration\":\"none\"},\"children\":[\"$\",\"$L1c\",null,{\"label\":\"ci\",\"sx\":{\"textTransform\":\"lowercase\"}}]}],[\"$\",\"$L1b\",\"8\",{\"href\":\"/tag/cd\",\"passHref\":true,\"style\":{\"textDecoration\":\"none\"},\"children\":[\"$\",\"$L1c\",null,{\"label\":\"cd\",\"sx\":{\"textTransform\":\"lowercase\"}}]}]]}]}],[\"$\",\"$L19\",null,{\"sx\":{\"display\":\"flex\",\"justifyContent\":\"space-between\",\"alignItems\":\"center\",\"flexWrap\":\"wrap\",\"gap\":1},\"children\":[[\"$\",\"$L1d\",null,{\"component\":\"$1e\",\"href\":\"/article/raycasting-pseudo-3d\",\"variant\":\"outlined\",\"color\":\"primary\",\"sx\":{\"textAlign\":\"left\"},\"children\":[\"← \",\"울펜슈타인3D 는 과연 어떻게 3d를 구현했을까요?\"]}],[\"$\",\"$L1d\",null,{\"component\":\"$1e\",\"href\":\"/article/jekyll-with-docker-and-wsl2\",\"variant\":\"outlined\",\"color\":\"primary\",\"sx\":{\"ml\":\"auto\",\"textAlign\":\"right\"},\"children\":[\"jekyll 블로그 wsl2 + docker + vscode 에서 작업하기\",\" →\"]}]]}]]}],[\"$\",\"$L19\",null,{\"py\":2,\"mt\":4,\"component\":\"footer\",\"children\":[\"$\",\"$L1f\",null,{\"maxWidth\":\"lg\",\"sx\":{\"display\":\"flex\",\"flexDirection\":{\"xs\":\"column\",\"md\":\"row\"},\"justifyContent\":{\"xs\":\"center\",\"md\":\"space-between\"},\"alignItems\":\"center\",\"gap\":2},\"children\":[[\"$\",\"$L20\",null,{\"variant\":\"body2\",\"children\":[\"© \",\"2022-2025\",\" \",\"Yeppyshiba Blog\",\". All rights reserved.\"]}],[\"$\",\"$L20\",null,{\"variant\":\"body2\",\"children\":[\"$\",\"$L1e\",null,{\"href\":\"https://www.flaticon.com/free-icons/akita-inu\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"title\":\"akita inu icons\",\"underline\":\"hover\",\"color\":\"primary\",\"children\":\"Akita inu icons created by tulpahn - Flaticon\"}]}]]}]}]]\n"])</script><script>self.__next_f.push([1,"b:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\n"])</script><script>self.__next_f.push([1,"9:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"1\",{\"children\":\"gitlab-runnner 를 활용한 docker 배포 - Yeppyshiba Blog\"}],[\"$\",\"meta\",\"2\",{\"name\":\"description\",\"content\":\"여기서는 gitlab 과 gitlab-runner (+ nexus) 를 설치하여 나도 자동적으로 빌드와 배포가 되도록 CI (Continuous Integration) / CD (Continuous Deployment) 를 구성 해보았습니다.\"}],[\"$\",\"meta\",\"3\",{\"name\":\"keywords\",\"content\":\"dev, coding, git, gitlab, gitlab runner, docker, deploy, ci, cd\"}],[\"$\",\"link\",\"4\",{\"rel\":\"canonical\",\"href\":\"/article/gitlab-runner-deploy-with-docker\"}],[\"$\",\"meta\",\"5\",{\"property\":\"og:title\",\"content\":\"gitlab-runnner 를 활용한 docker 배포\"}],[\"$\",\"meta\",\"6\",{\"property\":\"og:description\",\"content\":\"여기서는 gitlab 과 gitlab-runner (+ nexus) 를 설치하여 나도 자동적으로 빌드와 배포가 되도록 CI (Continuous Integration) / CD (Continuous Deployment) 를 구성 해보았습니다.\"}],[\"$\",\"meta\",\"7\",{\"property\":\"og:url\",\"content\":\"https://blog.yeppyshiba.com/article/gitlab-runner-deploy-with-docker\"}],[\"$\",\"meta\",\"8\",{\"property\":\"og:image\",\"content\":\"https://khs9628.github.io/img/infra/logo/GitLab.png\"}],[\"$\",\"meta\",\"9\",{\"property\":\"og:type\",\"content\":\"website\"}],[\"$\",\"meta\",\"10\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"11\",{\"name\":\"twitter:title\",\"content\":\"gitlab-runnner 를 활용한 docker 배포\"}],[\"$\",\"meta\",\"12\",{\"name\":\"twitter:description\",\"content\":\"여기서는 gitlab 과 gitlab-runner (+ nexus) 를 설치하여 나도 자동적으로 빌드와 배포가 되도록 CI (Continuous Integration) / CD (Continuous Deployment) 를 구성 해보았습니다.\"}],[\"$\",\"meta\",\"13\",{\"name\":\"twitter:image\",\"content\":\"https://khs9628.github.io/img/infra/logo/GitLab.png\"}]]\n"])</script><script>self.__next_f.push([1,"7:null\n"])</script></body></html>