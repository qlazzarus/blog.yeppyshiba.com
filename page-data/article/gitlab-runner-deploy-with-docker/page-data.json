{
    "componentChunkName": "component---src-templates-article-template-tsx",
    "path": "/article/gitlab-runner-deploy-with-docker",
    "result": {"data":{"mdx":{"id":"bf0fd944-39f7-5968-9d93-85528f740f91","body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"gitlab-runnner 를 활용한 docker 배포\",\n  \"date\": \"2020-09-15T21:00:00.000Z\",\n  \"category\": \"coding\",\n  \"summary\": \"여기서는 gitlab 과 gitlab-runner (+ nexus) 를 설치하여 나도 자동적으로 빌드와 배포가 되도록 CI (Continuous Integration) / CD (Continuous Deployment) 를 구성 해보았습니다.\",\n  \"image\": \"https://khs9628.github.io/img/infra/logo/GitLab.png\",\n  \"tags\": [\"dev\", \"coding\", \"git\", \"gitlab\", \"gitlab runner\", \"docker\", \"deploy\", \"ci\", \"cd\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h2\", null, \"\\uC11C\\uB860\"), mdx(\"p\", null, \"jekyll \\uBE14\\uB85C\\uADF8\\uB97C \\uC0AC\\uC6A9\\uD558\\uBA74\\uC11C github action \\uC5D0 \\uB300\\uD574\\uC11C \\uB9CE\\uC774 \\uBD80\\uB7EC\\uC6C0\\uC744 \\uB290\\uAF08\\uC2B5\\uB2C8\\uB2E4.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"500px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"93.60000000000001%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAATABQDASIAAhEBAxEB/8QAGQABAAMBAQAAAAAAAAAAAAAAAAMEBQEC/8QAFwEAAwEAAAAAAAAAAAAAAAAAAQIDBP/aAAwDAQACEAMQAAAB0JaHctJVYR5lLDTDL//EABsQAQACAwEBAAAAAAAAAAAAAAEAAhETIQMS/9oACAEBAAEFAqPOz6zDBNjaalQlOp5UJ//EABcRAQADAAAAAAAAAAAAAAAAAAACEBH/2gAIAQMBAT8BalX/xAAbEQACAQUAAAAAAAAAAAAAAAAAAgEQERMhMf/aAAgBAgEBPwGUtqDEovKf/8QAHBAAAgICAwAAAAAAAAAAAAAAABECIgFhEDEy/9oACAEBAAY/At8dZKiKNaJEGeT/xAAaEAEAAwEBAQAAAAAAAAAAAAABABEhQXGB/9oACAEBAAE/IUscZMOjXyHFKzIazKxwHx4xQR7KgI+3UAzV3cIwbs//2gAMAwEAAgADAAAAEJA/Qv/EABoRAAICAwAAAAAAAAAAAAAAAAERABAxUYH/2gAIAQMBAT8QKJbhLcw7X//EABsRAAICAwEAAAAAAAAAAAAAAAABESExQVFh/9oACAECAQE/EGyRnuhQUWk/RI//xAAfEAEBAAMAAgIDAAAAAAAAAAABEQAhMUGBUWFxseH/2gAIAQEAAT8QVtSdOr7zcbXLB1+N8xKbBSIU95RbLU3zrv8AeWGSNNQ/mHDN8IX8ONU439V1gmCezztx7JStrXP/2Q==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n          \", mdx(\"source\", {\n    parentName: \"picture\",\n    \"srcSet\": [\"/static/576148ffe2be43cfa5cfb93d1b8935cb/1e0be/2434BC4257A04CAC1D.webp 250w\", \"/static/576148ffe2be43cfa5cfb93d1b8935cb/b0a15/2434BC4257A04CAC1D.webp 500w\"],\n    \"sizes\": \"(max-width: 500px) 100vw, 500px\",\n    \"type\": \"image/webp\"\n  }), \"\\n          \", mdx(\"source\", {\n    parentName: \"picture\",\n    \"srcSet\": [\"/static/576148ffe2be43cfa5cfb93d1b8935cb/0479a/2434BC4257A04CAC1D.jpg 250w\", \"/static/576148ffe2be43cfa5cfb93d1b8935cb/41099/2434BC4257A04CAC1D.jpg 500w\"],\n    \"sizes\": \"(max-width: 500px) 100vw, 500px\",\n    \"type\": \"image/jpeg\"\n  }), \"\\n          \", mdx(\"img\", {\n    parentName: \"picture\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"src\": \"/static/576148ffe2be43cfa5cfb93d1b8935cb/41099/2434BC4257A04CAC1D.jpg\",\n    \"alt\": \"2434BC4257A04CAC1D\",\n    \"title\": \"2434BC4257A04CAC1D\",\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    }\n  }), \"\\n        \"), \"\\n    \")), mdx(\"p\", null, \"\\uC5EC\\uAE30\\uC11C\\uB294 gitlab \\uACFC gitlab-runner (+ nexus) \\uB97C \\uC124\\uCE58\\uD558\\uC5EC \\uB098\\uB3C4 \\uC790\\uB3D9\\uC801\\uC73C\\uB85C \\uBE4C\\uB4DC\\uC640 \\uBC30\\uD3EC\\uAC00 \\uB418\\uB3C4\\uB85D CI (Continuous Integration) / CD (Continuous Deployment) \\uB97C \\uAD6C\\uC131 \\uD574\\uBCF4\\uC558\\uC2B5\\uB2C8\\uB2E4.\"), mdx(\"h2\", null, \"Basic Concept\"), mdx(\"p\", null, mdx(\"figure\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-figure\",\n    \"style\": {}\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"figure\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"734px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"51.2%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABdUlEQVQoz3VSS0/bQBj0/67KqUKthDj0WqlcEKjAH4Be2grCQ4IIuJSAeQbHCbHX3njX3v1e1TpRCQhGq9W+ZkYz2kjeAnOYjSXnpNQ4UVgq0BPWmqzF6S2zRMwkwlOKhPUMxtAoc5s72/H96Hev6CXmfpCkuTKGs9xpDYH832ceiJyNwTr4ur52evnw5Vdy0q8Oj47+Xsftey41FCVExVNO3ocj31B6S4jEUmowFmcRRKpHTbVjEaZnoyz30e3ut8u7uKgkH4wmP7/n42r4BEnqWn+EVrde/9Hs7rEIADLPFIKzU8dxnokIEFUekUJspfx8Fqt9bRCQ5+sM5Jd5ZzulQNtmZWujd5NaK52D7scPCxdptXE+TAbF/nm3apxSELU5XjcGXm76enl17eoh9U5OumdLnxcP4+LTzt1wXP7pdPqPunFt22/COba11DUZg0RB3desM3SeS83GhnTvkkWEiKwNoyhBKciUH43dpEIPNP0k/wBZ6Dk1Al1FPgAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n          \", mdx(\"source\", {\n    parentName: \"picture\",\n    \"srcSet\": [\"/static/7bfc43e5c013b9947a0a1471118ab649/1e0be/runner-diagram.webp 250w\", \"/static/7bfc43e5c013b9947a0a1471118ab649/b0a15/runner-diagram.webp 500w\", \"/static/7bfc43e5c013b9947a0a1471118ab649/a242a/runner-diagram.webp 734w\"],\n    \"sizes\": \"(max-width: 734px) 100vw, 734px\",\n    \"type\": \"image/webp\"\n  }), \"\\n          \", mdx(\"source\", {\n    parentName: \"picture\",\n    \"srcSet\": [\"/static/7bfc43e5c013b9947a0a1471118ab649/63868/runner-diagram.png 250w\", \"/static/7bfc43e5c013b9947a0a1471118ab649/0b533/runner-diagram.png 500w\", \"/static/7bfc43e5c013b9947a0a1471118ab649/c6d67/runner-diagram.png 734w\"],\n    \"sizes\": \"(max-width: 734px) 100vw, 734px\",\n    \"type\": \"image/png\"\n  }), \"\\n          \", mdx(\"img\", {\n    parentName: \"picture\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"src\": \"/static/7bfc43e5c013b9947a0a1471118ab649/c6d67/runner-diagram.png\",\n    \"alt\": \"발로 그린 diagram\",\n    \"title\": \"발로 그린 diagram\",\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    }\n  }), \"\\n        \"), \"\\n    \"), \"\\n    \", mdx(\"figcaption\", {\n    parentName: \"figure\",\n    \"className\": \"gatsby-resp-image-figcaption\"\n  }, \"\\uBC1C\\uB85C \\uADF8\\uB9B0 diagram\"), \"\\n  \")), mdx(\"p\", null, \"\\uAE30\\uBCF8 \\uCEE8\\uC149\\uC740 \\uB2E4\\uC74C\\uACFC \\uAC19\\uC2B5\\uB2C8\\uB2E4! \\uCF54\\uB4DC\\uB97C \\uBCF4\\uB0B4\\uBA74 \\uC790\\uB3D9\\uC73C\\uB85C \\uB3C4\\uCEE4 \\uC774\\uBBF8\\uC9C0\\uB97C \\uC0DD\\uC131\\uD558\\uACE0 \\uBC30\\uD3EC \\uB300\\uC0C1 \\uC11C\\uBC84\\uC5D0\\uC11C \\uCEE8\\uD14C\\uC774\\uB108\\uB97C \\uC2E4\\uD589!\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"gitlab \\uC73C\\uB85C \\uCF54\\uB4DC\\uB97C \\uCEE4\\uBC0B\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"build\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"CI/CD (gitlab runner) \\uAC00 \\uC2E4\\uD589\\uB428\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\uCF54\\uB4DC\\uB97C \\uB3C4\\uCEE4 \\uC774\\uBBF8\\uC9C0 \\uB85C \\uBE4C\\uB4DC\\uD558\\uACE0 \\uC0AC\\uC124 \\uB3C4\\uCEE4 \\uC800\\uC7A5\\uC18C (\\uC774\\uD558 \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"nexus\"), \") \\uB85C \\uBC30\\uD3EC \\uC9C4\\uD589\")), mdx(\"ol\", {\n    \"start\": 3\n  }, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"deploy\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\uB300\\uC0C1 \\uC6D0\\uACA9\\uC9C0 \\uC11C\\uBC84\\uB85C\\uC758 SSH \\uD0A4 \\uB4F1\\uB85D\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"\\uB300\\uC0C1 \\uC6D0\\uACA9\\uC9C0 \\uC11C\\uBC84\\uC5D0 SSH \\uBA85\\uB839\\uC5B4 \\uC804\\uB2EC (\", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"nexus\"), \" \\uB85C \\uD2B9\\uC815 \\uB9AC\\uBE44\\uC804\\uC744 \\uAC00\\uC838\\uC640\\uC11C \\uCEE8\\uD14C\\uC774\\uB108\\uB97C \\uC2E4\\uD589)\")), mdx(\"h2\", null, \"POC (Proof-Of-Concept)\"), mdx(\"h3\", null, \"\\uBA3C\\uC800 \\uC124\\uCE58\\uD560 \\uAC83\\uB4E4\"), mdx(\"p\", null, \"\\uBB3C\\uB860 \\uAD6C\\uC131\\uC744 \\uC704\\uD574\\uC11C \\uC544\\uB798\\uC758 \\uC194\\uB8E8\\uC158\\uB4E4\\uC774 \\uD544\\uC694\\uD569\\uB2C8\\uB2E4. \\uC774 \\uBD80\\uBD84 \\uC124\\uCE58\\uB294 \\uBCC4\\uB3C4\\uC758 \\uB0B4\\uC6A9\\uC744 \\uCC38\\uC870\\uD558\\uC138\\uC694!\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"\\uAE30\\uBCF8\\uC801\\uC73C\\uB85C \\uC190\\uC26C\\uC6B4 \\uC11C\\uBC84 \\uC124\\uC815\\uC744 \\uC704\\uD574\\uC11C \\uBE4C\\uB4DC\\uC11C\\uBC84 / \\uBC30\\uD3EC\\uC11C\\uBC84 \\uBAA8\\uB450 \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"docker engine\"), \" \\uC774 \\uC124\\uCE58\\uB418\\uC5B4 \\uC788\\uB2E4\\uACE0 \\uAC00\\uC815\\uD569\\uB2C8\\uB2E4.\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"gitlab \\uC124\\uCE58\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"sonatype nexus3 \\uC124\\uCE58\")), mdx(\"h3\", null, \"sonatype nexus3 \\uC124\\uC815\"), mdx(\"p\", null, \"\\uC544\\uB798 \\uBB38\\uC11C\\uB97C \\uCC38\\uACE0 \\uD558\\uC5EC, \\uC124\\uCE58\\uB41C sonaytype nexus3 \\uC5D0\\uC11C docker \\uC800\\uC7A5\\uC18C\\uB97C \\uC124\\uC815\\uD569\\uB2C8\\uB2E4.\"), mdx(\"p\", null, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://velog.io/@king/private-docker-registry\"\n  }, \"\\uC0AC\\uB0B4 Docker Registry \\uB9CC\\uB4E4\\uAE30 (Nexus3 \\uAE30\\uBC18)\")), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"nexus docker \\uB85C\\uADF8\\uC778 \\uC5F0\\uACB0\\uC744 \\uADF8\\uB0E5 admin \\uC73C\\uB85C \\uC9C4\\uD589 \\uD558\\uB294\\uAC8C \\uB0AB\\uC2B5\\uB2C8\\uB2E4.\"), mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"\\uC704 \\uBE14\\uB85C\\uADF8\\uC758 \\uB0B4\\uC6A9\\uB300\\uB85C nexus \\uC124\\uC815\\uC5D0 \\uB2E4\\uC74C\\uACFC \\uC138\\uD305\\uC774 \\uD544\\uC694\\uD569\\uB2C8\\uB2E4.\"), mdx(\"ul\", {\n    parentName: \"blockquote\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"realm \\uC5D0 docker bearer token realm \\uCD94\\uAC00 \\uD544\\uC694\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"docker-hosted \\uC5D0 api v1 + \\uD3EC\\uD2B8 \\uCD94\\uAC00 (8082)\"))), mdx(\"h3\", null, \"gitlab-runner-network \\uCD94\\uAC00\"), mdx(\"p\", null, \"\\uBE4C\\uB4DC\\uC11C\\uBC84\\uC5D0\\uC11C gitlab \\uB9CC \\uB124\\uD2B8\\uC6CC\\uD06C\\uB97C \\uBD84\\uB9AC\\uD558\\uAE30 \\uC704\\uD558\\uC5EC \\uC544\\uB798 \\uBA85\\uB839\\uC5B4\\uB97C \\uD1B5\\uD574 \\uB124\\uD2B8\\uC6CC\\uD06C\\uB97C \\uCD94\\uAC00\\uD569\\uB2C8\\uB2E4.\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"\\uAC01 \\uCEE8\\uD14C\\uC774\\uB108\\uAC04 \\uD1B5\\uC2E0\\uC740 hostname \\uC73C\\uB85C \\uD638\\uCD9C\\uD558\\uAC8C \\uB429\\uB2C8\\uB2E4.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"$ sudo docker network create gitlab-runner-net\\n62322b083c76808fd3502b7388c36e7dca5087059bf688434a7dc7573dba103b\\n\")), mdx(\"h3\", null, \"gitlab-runner \\uC124\\uC815\\uAC12 \\uCD94\\uAC00\"), mdx(\"p\", null, \"gitlab runner \\uAE30\\uBCF8 \\uC124\\uC815\\uAC12\\uC744 \\uCD94\\uAC00 \\uD569\\uB2C8\\uB2E4.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"$ sudo mkdir -p /etc/srv/gitlab-runner\\n$ sudo touch /etc/srv/gitlab-runner/config.toml\\n\")), mdx(\"h3\", null, \"gitlab-runner / gitlab-dind \\uCEE8\\uD14C\\uC774\\uB108 \\uCD94\\uAC00\"), mdx(\"p\", null, \"gitlab runner \\uC5F0\\uACB0\\uC744 \\uC704\\uD574\\uC11C \\uB450\\uAC00\\uC9C0 \\uCEE8\\uD14C\\uC774\\uB108\\uB97C \\uCD94\\uAC00\\uD569\\uB2C8\\uB2E4.\"), mdx(\"p\", null, \"\\uB2E4\\uC74C\\uACFC \\uAC19\\uC740 \\uD504\\uB85C\\uC138\\uC2A4\\uB85C runner \\uAC00 \\uC2E4\\uD589\\uB429\\uB2C8\\uB2E4.\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"gitlab-runner \\uB294 runner \\uAC00 \\uC2E4\\uD589\\uC2DC gitlab-dind \\uCEE8\\uD14C\\uC774\\uB108\\uB97C \\uC2E4\\uD589\\uC2DC\\uD0A4\\uB294 \\uC8FC\\uCCB4 \\uC785\\uB2C8\\uB2E4.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"\\uC2E4\\uD589\\uB41C gitlab-dind \\uCEE8\\uD14C\\uC774\\uB108\\uB294 \\uB3C4\\uCEE4 \\uC774\\uBBF8\\uC9C0\\uB97C \\uBE4C\\uB4DC\\uB97C \\uD569\\uB2C8\\uB2E4.\")), mdx(\"p\", null, mdx(\"img\", {\n    parentName: \"p\",\n    \"src\": \"https://www.docker.com/wp-content/uploads/2013/08/docker-meme.jpg\",\n    \"alt\": \"docker-in-docker !?\"\n  })), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"$ sudo docker run -d \\\\\\n--name gitlab-runner \\\\\\n--restart always \\\\\\n--network gitlab-runner-net \\\\\\n-v /srv/gitlab-runner/config.toml:/etc/gitlab-runner/config.toml \\\\\\n-e DOCKER_HOST=tcp://gitlab-dind:2375 \\\\\\ngitlab/gitlab-runner:alpine\\n\")), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"\\uC704\\uC5D0\\uC11C \\uB9CC\\uB4E4\\uC5B4\\uB454 \\uC678\\uBD80\\uC758 config.toml \\uD30C\\uC77C\\uC744 \\uB9E4\\uD551\\uC2DC\\uCF1C \\uC90D\\uB2C8\\uB2E4.\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"\\uCD94\\uD6C4 \\uC218\\uC815\\uC744 \\uC6A9\\uC774\\uD558\\uAC8C \\uD558\\uAE30 \\uC704\\uD568 \\uC785\\uB2C8\\uB2E4.\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"$ sudo docker run -d \\\\\\n--name gitlab-dind \\\\\\n--privileged \\\\\\n--restart always \\\\\\n--network gitlab-runner-net \\\\\\n-v /var/lib/docker \\\\\\ndocker:18.09.9-dind\\n\")), mdx(\"h3\", null, \"gitlab-dind \\uCEE8\\uD14C\\uC774\\uB108 \\uC218\\uC815\"), mdx(\"p\", null, \"\\uCD94\\uAC00\\uB41C nexus \\uB294 https \\uAC00 \\uC9C0\\uC6D0\\uB418\\uC9C0 \\uC54A\\uC544 insecure registry \\uB85C \\uB4F1\\uB85D\\uC774 \\uD544\\uC694\\uD569\\uB2C8\\uB2E4.\\n\", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"gitlab-dind \\uCEE8\\uD14C\\uC774\\uB108\"), \"\\uC5D0 \\uCF58\\uC194\\uB85C \\uC811\\uC18D\\uD558\\uC5EC \\uC218\\uC815\\uC744 \\uC9C4\\uD589\\uD569\\uB2C8\\uB2E4.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"$ echo \\\"{ \\\\\\\"insecure-registries\\\\\\\" : [\\\\\\\"nexus..somewhere.com:8082\\\\\\\"] }\\\" > /etc/docker/daemon.json\\n\")), mdx(\"h3\", null, \"gitlab-runner \\uB4F1\\uB85D\"), mdx(\"p\", null, \"\\uC774\\uC81C gitlab runner \\uB97C gitlab \\uC5D0 \\uC5F0\\uB3D9 \\uB418\\uB3C4\\uB85D \\uB4F1\\uB85D\\uD574\\uC57C \\uD569\\uB2C8\\uB2E4.\"), mdx(\"p\", null, \"\\uC124\\uC815\\uC758 Runners \\uD56D\\uBAA9\\uC744 \\uCC38\\uC870\\uD558\\uC5EC \\uB4F1\\uB85D \\uD1A0\\uD070 \\uB4F1\\uC744 \\uC124\\uC815\\uD569\\uB2C8\\uB2E4\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"430px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"68.80000000000001%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABr0lEQVQoz52RT3PaMBDF+TYF66+lwfJKxsGWDbIlY4aQdgiJ0za5Zabf/9jBpCGdpD3kd1gdpKf3dncipcQYE0IoPRUyghDCIwSfL8n5wBgRQtgIpXQihNBaG2OUUkmSKJUC6KIss0W2WGTaGK11mqZGGwDI8yul1Oh0YsIY213vD4fD7eHrt/3u/ngc7o5PT483N7vhYfg+3A93Q7/pf/54vB8enp9/9V2IoujFWUoZRYgzzueLSGREZliaiAOS+XT6ZTqdRbNZFEWzEYwRfcNJTAgBAOe3levrJnT727rp2m67ds4H79auCz503lb2NfBFTClljBmt8zzXANYWRqurPNdmbN5ky6Ko61Vlbdu2CKFz5ouzlLKuK+dcCF3wfrVeex+sLZdFsXINpCnnPI7jJEnemr84CyGKZWHLZWXLTJvK2rIobFkG730IjNI/q8IfxH79jzF6fsEYj2Mxn8+VUqeo9AMuYtAQutC2zfV+t+n7EHzbtv22EyL+e0zvxJRSKaXWWgMYY1JIAUClCgDi+L9ijDGADt2madpxQk4KjhB63+Q/nT/BhHP+afFvgwGzHgNXPHgAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n          \", mdx(\"source\", {\n    parentName: \"picture\",\n    \"srcSet\": [\"/static/5aca155eb115b912453443526b7e3c5b/1e0be/gitlab_runner_token.webp 250w\", \"/static/5aca155eb115b912453443526b7e3c5b/866c5/gitlab_runner_token.webp 430w\"],\n    \"sizes\": \"(max-width: 430px) 100vw, 430px\",\n    \"type\": \"image/webp\"\n  }), \"\\n          \", mdx(\"source\", {\n    parentName: \"picture\",\n    \"srcSet\": [\"/static/5aca155eb115b912453443526b7e3c5b/63868/gitlab_runner_token.png 250w\", \"/static/5aca155eb115b912453443526b7e3c5b/05ed2/gitlab_runner_token.png 430w\"],\n    \"sizes\": \"(max-width: 430px) 100vw, 430px\",\n    \"type\": \"image/png\"\n  }), \"\\n          \", mdx(\"img\", {\n    parentName: \"picture\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"src\": \"/static/5aca155eb115b912453443526b7e3c5b/05ed2/gitlab_runner_token.png\",\n    \"alt\": \"gitlab runner token\",\n    \"title\": \"gitlab runner token\",\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    }\n  }), \"\\n        \"), \"\\n    \")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"$ sudo docker run -it --rm \\\\\\n -v /srv/gitlab-runner/config.toml:/etc/gitlab-runner/config.toml \\\\\\n gitlab/gitlab-runner:alpine \\\\\\n register \\\\\\n --executor docker \\\\\\n --docker-image docker:18.09.9 \\\\\\n --docker-volumes /var/run/docker.sock:/var/run/docker.sock\\n[sudo] password for someone:\\nRuntime platform arch=amd64 os=linux pid=6 revision=a998cacd version=13.2.2\\nRunning in system-mode.\\nPlease enter the gitlab-ci coordinator URL (e.g. https://gitlab.com/):\\nhttp://somewhere.com:8000/\\nPlease enter the gitlab-ci token for this runner:\\n[gitlab-ci-token]\\nPlease enter the gitlab-ci description for this runner:\\n[d6cfe8946db3]: Docker Runner\\nPlease enter the gitlab-ci tags for this runner (comma separated):\\nRegistering runner... succeeded runner=Jxyieb2E\\nPlease enter the executor: shell, ssh, virtualbox, docker+machine, custom, docker-ssh, parallels, dockerssh+machine, kubernetes, docker:\\n[docker]:\\nPlease enter the default Docker image (e.g. ruby:2.6):\\n[docker:18.09.9]:\\nRunner registered successfully. Feel free to start it, but if it's running already the config should be\\nautomatically reloaded!\\n\")), mdx(\"p\", null, \"\\uC815\\uC0C1\\uC801\\uC73C\\uB85C \\uCD94\\uAC00\\uB418\\uC5C8\\uB2E4\\uBA74 ci \\uC124\\uC815\\uC5D0\\uC11C \\uD574\\uB2F9 runner \\uAC00 \\uB178\\uCD9C\\uB418\\uAC8C \\uB429\\uB2C8\\uB2E4.\"), mdx(\"h3\", null, \"gitlab ci variables \\uB4F1\\uB85D\"), mdx(\"h4\", null, \"ssh \\uD0A4 \\uC0DD\\uC131 (\\uD074\\uB77C\\uC774\\uC5B8\\uD2B8)\"), mdx(\"p\", null, \"ssh \\uD0A4\\uB294 server \\uC5D0 id / password \\uC785\\uB825 \\uC5C6\\uC774 \\uC811\\uC18D\\uD558\\uAE30 \\uC704\\uD574\\uC11C \\uC0DD\\uC131\\uD569\\uB2C8\\uB2E4.\\n\\uC5EC\\uAE30\\uC5D0\\uC11C\\uB294 ssh private key \\uB9CC gitlab \\uC5D0 \\uC800\\uC7A5\\uD560 \\uC608\\uC815\\uC774\\uBA70, public key \\uB294 \\uC11C\\uBC84\\uB85C \\uC804\\uC1A1\\uD560 \\uC608\\uC815\\uC785\\uB2C8\\uB2E4.\"), mdx(\"p\", null, \"ssh-keygen \\uBA85\\uB839\\uC5B4\\uB85C ssh \\uD0A4\\uB97C \\uC0DD\\uC131\\uD569\\uB2C8\\uB2E4.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"$ ssh-keygen\\nGenerating public/private rsa key pair.\\nEnter file in which to save the key (/root/.ssh/id_rsa):\\nCreated directory '/root/.ssh'.\\nEnter passphrase (empty for no passphrase):\\nEnter same passphrase again:\\nYour identification has been saved in /root/.ssh/id_rsa.\\nYour public key has been saved in /root/.ssh/id_rsa.pub.\\nThe key fingerprint is:\\nd0:82:24:8e:d7:f1:bb:9b:33:53:96:93:49:da:9b:e3 root@localhost\\nThe key's randomart image is:\\n+---[RSA 2048]----+\\n|.*++ o.o. |\\n|.+B + oo. |\\n| +++ *+. |\\n| .o.Oo.+E |\\n| ++B.S. |\\n| o * =. |\\n| + = o |\\n| + = = . |\\n| + o o |\\n+----[SHA256]-----+\\n\")), mdx(\"p\", null, \"ssh-copy-id \\uBA85\\uB839\\uC5B4\\uB85C ssh \\uD0A4\\uB97C \\uB300\\uC0C1 \\uC11C\\uBC84\\uB85C \\uBCF5\\uC0AC\\uD569\\uB2C8\\uB2E4.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"$ ssh-copy-id someone@somewhere.com\\n\")), mdx(\"p\", null, \"ssh \\uC5F0\\uACB0\\uC744 \\uD655\\uC778\\uD574\\uBCF4\\uBA74 key \\uC5C6\\uC774 \\uC798 \\uC811\\uC18D \\uB418\\uB294 \\uAC83\\uC744 \\uD655\\uC778\\uB429\\uB2C8\\uB2E4.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"$ ssh someone@somewhere.com\\n\")), mdx(\"p\", null, \"private key \\uB294 gitlab ci \\uC6A9 \\uBCC0\\uC218\\uB85C \\uB2F4\\uAE30 \\uC704\\uD574\\uC11C \\uBCF5\\uC0AC\\uD55C \\uD6C4 .ssh \\uD3F4\\uB354 \\uC790\\uCCB4\\uB97C \\uC0AD\\uC81C\\uD569\\uB2C8\\uB2E4.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"$ cat ~/.ssh/id_rsa\\n-----BEGIN OPENSSH PRIVATE KEY-----\\nb3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAABlwAAAAdzc2gtcn\\n...\\nu+Hr4KoWBWAJVdAAAAEXJvb3RANmMwNzdhYzZkZDVjAQ==\\n-----END OPENSSH PRIVATE KEY-----\\n$ rm -rf ~/.ssh\\n\")), mdx(\"h4\", null, \"sudo \\uB4F1\\uB85D (\\uC11C\\uBC84)\"), mdx(\"p\", null, \"\\uBCF4\\uC548\\uC0C1\\uC758 \\uC774\\uC720\\uB85C \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"\\uBC30\\uD3EC\\uD560 \\uC11C\\uBC84\"), \"\\uB97C \\uC811\\uADFC\\uC2DC\\uC5D0\\uB294 root \\uAC00 \\uC544\\uB2C8\\uB77C \\uC77C\\uBC18 \\uC0AC\\uC6A9\\uC790\\uB85C \\uB4F1\\uB85D\\uD588\\uC2B5\\uB2C8\\uB2E4.\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"\\uB2E4\\uB9CC \\uC774\\uB7F4 \\uACBD\\uC6B0 \\uC77C\\uBC18 \\uC0AC\\uC6A9\\uC790\\uAC00 docker \\uB97C \\uC2E4\\uD589\\uC2DC\\uD0AC \\uAD8C\\uD55C\\uC774 \\uC81C\\uD55C\\uB429\\uB2C8\\uB2E4. (root \\uB85C \\uAD6C\\uB3D9\\uB428)\"), mdx(\"p\", null, \"\\uB530\\uB77C\\uC11C docker \\uBA85\\uB839\\uC5B4\\uB294 sudo \\uB85C \\uC2E4\\uD589\\uD574\\uC57C \\uD558\\uBA70, \\uC774\\uB7F4 \\uACBD\\uC6B0 \\uBE44\\uBC00\\uBC88\\uD638 \\uBB3B\\uB294 \\uD504\\uB86C\\uD504\\uD2B8\\uAC00 \\uB098\\uC640\\uC11C ssh \\uBA85\\uB839\\uC5B4\\uB97C \\uC804\\uB2EC\\uD558\\uB294 \\uC785\\uC7A5\\uC5D0\\uC11C\\uB294 \\uC81C\\uD55C\\uC774 \\uB429\\uB2C8\\uB2E4.\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"\\uADF8\\uB7EC\\uD558\\uBBC0\\uB85C visudo \\uB85C \\uBE44\\uBC00\\uBC88\\uD638\\uB97C \\uBB3B\\uC9C0 \\uC54A\\uB3C4\\uB85D \\uC81C\\uD55C\\uD560 \\uC608\\uC815\\uC785\\uB2C8\\uB2E4.\"), mdx(\"p\", null, \"root \\uB85C visudo \\uB97C \\uC2E4\\uD589\\uD558\\uC5EC docker \\uBA85\\uB839\\uC5B4\\uB9CC \\uD328\\uC2A4\\uC6CC\\uB4DC \\uBB3B\\uC9C0 \\uC54A\\uB3C4\\uB85D \\uD5C8\\uC6A9 \\uD569\\uB2C8\\uB2E4.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"## Allow root to run any commands anywhere\\nroot ALL=(ALL) ALL\\nsomeone ALL= NOPASSWD: /bin/docker\\n\")), mdx(\"h4\", null, \"docker insecure registries \\uB4F1\\uB85D (\\uC11C\\uBC84)\"), mdx(\"p\", null, \"\\uC0AC\\uC124 docker registry \\uB97C \\uC0DD\\uC131\\uD558\\uC600\\uAE30 \\uB54C\\uBB38\\uC5D0 gitlab \\uACFC \\uBC30\\uD3EC\\uD560 \\uC11C\\uBC84 \\uBAA8\\uB450 insecure-registries \\uB85C \\uB4F1\\uB85D\\uC774 \\uD544\\uC694\\uD569\\uB2C8\\uB2E4.\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"gitlab-dind \\uB294 \\uC774\\uBBF8 \\uB4F1\\uB85D\\uC774 \\uC644\\uB8CC\\uB418\\uC5B4\\uC11C \\uC5EC\\uAE30\\uC5D0\\uC11C\\uB294 \\uBC30\\uD3EC\\uD560 \\uC11C\\uBC84\\uC5D0\\uB9CC \\uB4F1\\uB85D\\uD574\\uC90D\\uB2C8\\uB2E4.\"), mdx(\"p\", null, \"/etc/docker/daemon.json \\uD30C\\uC77C\\uC744 \\uC218\\uC815\\uD574\\uC11C \\uC544\\uB798\\uC758 \\uACBD\\uB85C\\uB97C \\uCD94\\uAC00\\uD574\\uC90D\\uB2C8\\uB2E4.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"{\\n  \\\"insecure-registries\\\": [\\\"nexus.somewhere.com:8082\\\"]\\n}\\n\")), mdx(\"h4\", null, \"\\uB4F1\\uB85D (gitlab)\"), mdx(\"p\", null, \"\\uACE7 \\uC791\\uC131\\uD560 gitlab-ci.yml \\uD30C\\uC77C\\uC5D0 \\uC4F0\\uC77C \\uBCC0\\uC218\\uB4E4\\uC774 \\uC788\\uC2B5\\uB2C8\\uB2E4.\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"yaml \\uD30C\\uC77C\\uC5D0\\uC11C \\uBC14\\uB85C \\uC815\\uC758\\uB420 \\uBCC0\\uC218\\uB3C4 \\uC788\\uC9C0\\uB9CC, \\uC678\\uBD80\\uC5D0\\uC11C \\uC4F0\\uC77C \\uBCC0\\uC218\\uB4E4 \\uC124\\uC815\\uC774 \\uD544\\uC694\\uD558\\uC5EC gitlab ci \\uC124\\uC815\\uC744 \\uB4E4\\uC5B4\\uAC00\\uB3C4\\uB85D \\uD558\\uACA0\\uC2B5\\uB2C8\\uB2E4\"), mdx(\"p\", null, \"\\uC124\\uC815 \\u2192 CI / CD \\u2192 Variables \\uC21C\\uC11C\\uB300\\uB85C \\uC811\\uADFC\\uD569\\uB2C8\\uB2E4.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"890px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"76.8%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACGUlEQVQoz4WQS2/VMBCF8xMolWhXlZBgA/FrZjxjJzdObujr3rxuN+xQKQip5W/wx1GSUrXdcGRFtqPj853JRELf75vzHRATAiIgLGvZADgER8ueEB//IhCCtSYLIV7vh+t9142HfT/u+6kbxl03dMO068Z+POyHqRtudv3UD9Mw3nT9tB+mfrqJ5SaLTIfLerqsD9fNeJEOV9vpKk1X9XiRhvPNeJHaKjSbchuhEdNGaIJtgm0LKL3OGvfhlxzd8fEdv72vTh7S6e/69KFavulkuTm5r97dlme35dlDOvkpx9/90Q//5iudZuQZiAG9Q/9ZGaWtti4UG2Vcrm2urTKuqhv0UmwSEqOX1LToOVc6Q8QYJEZJVZWqjfek8py9F2bvyWhtjXHOGqMBnNbKE5VlgQAxhMw5R0hEJCLMLCKI6JxDAOecXmSM0Vpba5VSAM5775xj5ozml2Z9adu23VZVBQDMHGNk5tVprdVaA4BSiplTnWbeGF8kiwg4l+c5LPp/MiKGEGKMKSVmzvPcGEOPnf3qXF9Zk4moKAuYO8cMAIRZQljhV0Ii8t4T0XOzc24xY4wBwIUQZjN7XkvGGGe2JeQJ+6nzP2wIIcyRIgu2SIgx1akoyrWeiMwDE1nNAPACu4jgYB4YAKyEMUYkUkqthKteJWutkUhYwFj2PtNaq2dax/vq+Dhza1LTbIv06Vv9/s/u4+/tXxrcvvEIsRj6AAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n          \", mdx(\"source\", {\n    parentName: \"picture\",\n    \"srcSet\": [\"/static/fe4cadfc4f337a9f9d2d10caceaa65fc/1e0be/ci_variables.webp 250w\", \"/static/fe4cadfc4f337a9f9d2d10caceaa65fc/b0a15/ci_variables.webp 500w\", \"/static/fe4cadfc4f337a9f9d2d10caceaa65fc/8d1ba/ci_variables.webp 890w\"],\n    \"sizes\": \"(max-width: 890px) 100vw, 890px\",\n    \"type\": \"image/webp\"\n  }), \"\\n          \", mdx(\"source\", {\n    parentName: \"picture\",\n    \"srcSet\": [\"/static/fe4cadfc4f337a9f9d2d10caceaa65fc/63868/ci_variables.png 250w\", \"/static/fe4cadfc4f337a9f9d2d10caceaa65fc/0b533/ci_variables.png 500w\", \"/static/fe4cadfc4f337a9f9d2d10caceaa65fc/4ef49/ci_variables.png 890w\"],\n    \"sizes\": \"(max-width: 890px) 100vw, 890px\",\n    \"type\": \"image/png\"\n  }), \"\\n          \", mdx(\"img\", {\n    parentName: \"picture\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"src\": \"/static/fe4cadfc4f337a9f9d2d10caceaa65fc/4ef49/ci_variables.png\",\n    \"alt\": \"ci variables\",\n    \"title\": \"ci variables\",\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    }\n  }), \"\\n        \"), \"\\n    \")), mdx(\"p\", null, \"\\uC544\\uB798\\uB294 \\uB4F1\\uB85D\\uB41C \\uBAA8\\uC2B5\\uC774\\uBA70 \\uAC01\\uAC01 \\uB2E4\\uC74C\\uC758 \\uB0B4\\uC6A9\\uC744 \\uAE30\\uC220\\uD569\\uB2C8\\uB2E4.\"), mdx(\"table\", null, mdx(\"thead\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"thead\"\n  }, mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"\\uD0C0\\uC785\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"\\uD0A4\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"\\uC124\\uBA85\"), mdx(\"th\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"\\uC608\\uC81C\"))), mdx(\"tbody\", {\n    parentName: \"table\"\n  }, mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Variables\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"DOCKER_PRIVATE_HOST\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"\\uB3C4\\uCEE4 \\uCEE8\\uD14C\\uC774\\uB108 \\uD638\\uC2A4\\uD2B8\\uC785\\uB2C8\\uB2E4. nexus3 \\uC8FC\\uC18C\\uB97C \\uC785\\uB825\\uD569\\uB2C8\\uB2E4.\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"nexus.somewhere.com:8082\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Variables\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"DOCKER_PRIVATE_PASSWORD\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"nexus \\uBE44\\uBC00\\uBC88\\uD638 \\uC785\\uB2C8\\uB2E4.\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"nexus_password\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Variables\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"DOCKER_PRIVATE_USER\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"nexus \\uC544\\uC774\\uB514 \\uC785\\uB2C8\\uB2E4.\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"admin\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Variables\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"PROD_SERVER_IP\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"\\uBC30\\uD3EC\\uD560 \\uC6D0\\uACA9 \\uD638\\uC2A4\\uD2B8\\uC785\\uB2C8\\uB2E4.\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"deploy.com\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Variables\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"PROD_SERVER_PORT\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"\\uC811\\uADFC\\uD560 \\uC6D0\\uACA9 \\uD638\\uC2A4\\uD2B8 SSH \\uD3EC\\uD2B8\\uC785\\uB2C8\\uB2E4.\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"22\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Variables\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"PROD_SERVER_USER\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"\\uC811\\uADFC\\uD560 \\uC6D0\\uACA9 \\uD638\\uC2A4\\uD2B8 \\uC720\\uC800\\uC785\\uB2C8\\uB2E4.\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"deployer\")), mdx(\"tr\", {\n    parentName: \"tbody\"\n  }, mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"Variables\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"SSH_PRIVATE_KEY\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"\\uC0DD\\uC131\\uB41C private key \\uC785\\uB2C8\\uB2E4.\"), mdx(\"td\", {\n    parentName: \"tr\",\n    \"align\": null\n  }, \"-----BEGIN OPENSSH ... \\uD6C4\\uB7B5\")))), mdx(\"h3\", null, \"gitlab-ci.yml \\uD30C\\uC77C \\uB4F1\\uB85D\"), mdx(\"p\", null, \"gitlab ci \\uAD00\\uB828\\uD574\\uC11C\\uB294 \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://velog.io/@wickedev/Gitlab-CICD-%ED%8A%9C%ED%86%A0%EB%A6%AC%EC%96%BC-bljzphditt\"\n  }, \"\\uC774 \\uBB38\\uC11C\"), \" \\uB97C \\uBCF4\\uC2DC\\uACE0,\", mdx(\"br\", {\n    parentName: \"p\"\n  }), \"\\n\", \"\\uC6B0\\uC120\\uC740 commit & push \\uC2DC \\uBC1C\\uB3D9\\uD558\\uB294 \\uD30C\\uC774\\uD504\\uB77C\\uC778\\uC744 \\uC791\\uC131\\uD558\\uACA0\\uC2B5\\uB2C8\\uB2E4.\"), mdx(\"p\", null, \"\\uD574\\uB2F9 CI \\uD30C\\uC77C\\uC740 \\uB450\\uAC00\\uC9C0 \\uC2A4\\uD14C\\uC774\\uC9C0 (build / deploy) \\uB85C \\uB098\\uB204\\uC5B4\\uC838 \\uC788\\uC73C\\uBA70 \\uAC01\\uAC01 \\uD558\\uB294 \\uC5ED\\uD560\\uC740 \\uB2E4\\uC74C\\uACFC \\uAC19\\uC2B5\\uB2C8\\uB2E4.\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"build - \\uB3C4\\uCEE4 \\uC774\\uBBF8\\uC9C0 \\uC0DD\\uC131\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"deploy - \\uC6D0\\uACA9\\uC9C0 \\uC11C\\uBC84\\uB85C \\uBC30\\uD3EC\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-yaml\"\n  }, \"image: monoless/ansible-docker:18.09.9-03\\nservices:\\n - name: monoless/ansible-docker:18.09.9-dind-03\\n command: [\\\"--insecure-registry=nexus.somwwhere.com:8082\\\"]\\nstages:\\n - build\\n - deploy\\nvariables:\\n IMAGE_NAME: $DOCKER_PRIVATE_HOST/hello-world:$CI_PIPELINE_ID\\n\\nbefore_script:\\n - docker info\\n\\ncache:\\n paths:\\n - node_modules/\\nbuild:\\n stage: build\\n script:\\n - ls -al\\n - docker container ls -a\\n - docker build . -t $IMAGE_NAME\\n - docker login -u $DOCKER_PRIVATE_USER -p $DOCKER_PRIVATE_PASSWORD $DOCKER_PRIVATE_HOST\\n - docker push $IMAGE_NAME\\n - docker images | grep 'somewhere.com'\\n\\ndeploy-image:\\n stage: deploy\\n before_script:\\n - 'which ssh-agent || (apk update && apk add openssh-client)'\\n - eval $(ssh-agent -s)\\n - echo \\\"$SSH_PRIVATE_KEY\\\" | tr -d '\\\\r' | ssh-add - > /dev/null\\n - mkdir -p ~/.ssh\\n - chmod 700 ~/.ssh\\n - ssh-keyscan -p $PROD_SERVER_PORT $PROD_SERVER_IP >> ~/.ssh/known_hosts\\n - chmod 644 ~/.ssh/known_hosts\\n script:\\n - ssh $PROD_SERVER_USER@$PROD_SERVER_IP -p$PROD_SERVER_PORT \\\"sudo docker login \\\\\\\"${DOCKER_PRIVATE_HOST}\\\\\\\" -\\nu \\\\\\\"${DOCKER_PRIVATE_USER}\\\\\\\" -p \\\\\\\"${DOCKER_PRIVATE_PASSWORD}\\\\\\\" && sudo docker pull $IMAGE_NAME && sudo docker\\nstop \\\\$(sudo docker ps -aq) && sudo docker rm \\\\$(sudo docker ps -aq) && sudo docker run -d --restart=unlessstopped -p 5000:5000 $IMAGE_NAME\\\"\\n\")), mdx(\"p\", null, \"gitlab-ci.yml \\uD30C\\uC77C\\uC774 \\uC0DD\\uC131\\uB418\\uBA74, \\uD574\\uB2F9 \\uC800\\uC7A5\\uC18C\\uC758 \\uC218\\uC815\\uC774 \\uB41C \\uAC83\\uC73C\\uB85C \\uD310\\uB2E8 \\uC790\\uB3D9\\uC801\\uC73C\\uB85C \\uD30C\\uC774\\uD504\\uB77C\\uC778\\uC774 \\uC2E4\\uD589\\uB429\\uB2C8\\uB2E4.\"), mdx(\"p\", null, \"\\uC774\\uD6C4 \\uC815\\uC0C1\\uC801\\uC73C\\uB85C \\uBC30\\uD3EC\\uB41C docker image \\uC640 \\uC6D0\\uACA9\\uC9C0 \\uC11C\\uBC84\\uB97C \\uD655\\uC778 \\uD558\\uC600\\uC2B5\\uB2C8\\uB2E4.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"552px\"\n    }\n  }, \"\\n      \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"94.8%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAIAAAAf7rriAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACWUlEQVQ4y41TiU7bQBTMz5Qc9t7rvZ+9u3HiQBIIlKMCVKlC6v9/QrVOigApVUcry/us8bxrJlzL7n6YAW37dHf7fXt1tdlshmFIOaeCnGLqvF2th5QSRgh/wARTQrSY4jkTXGvDOZeykVIyxqSUWmnVKMHLJ6UU+YyJVupwffv4+LRer4bh8uX5eRjWy76/3u+DD1VVjRoEjZrvtJOyEGK73+1vDimn3W57d7jpV8tl3w/rdSObxWJRF1TjqRFCx+dJGSEkhBBSaqMRlXNEOeNaKetcCMFa5wucD8E5b4zxPijVHBOZEEoBoHOQLGjfNQZCCCml1WrVL5ddF1NKMaWclymmFtqcl8F7zrkQYoIJBuP1Uy/eBooxY5RSijF+L/Jje49XQggbMSGUeO30fZa/VpwyOkblGYz1nV6KMiHEWCOYothKCzkngJYQQv8DI1lrqS0zQSoLEJz3tCTAGWPin5hgjEMIEEIL0HWtc8H7ANC2bQsA7NiDc8oYY1kqaWwZi/NWgREheGvLVL407AtK2inGnLPzTklO/GaaXrloVNOMy0DJeUwwIRBC7GIIwVktYLOIT4123lmE0XE9z5MxBmillFVVldnWC1bPcKHVxtqcl5zzc/xCdsapRtV1PUZojcqGlLXlInWRc37873GxP1sSoR+/f+ZhZZUWQjDGY4zW2sVsvn24Obw8GGXaMgVnjIkxog+WLsZ4envtN4PVehwtAwCt9Xw2v7zd3b08BhdijG3baq0A4BMZYzz9dlEtqvfY6MFSwnw6m11MS7bVyY9/7X0i/wHxA+1jC2mHDgAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"picture\", {\n    parentName: \"span\"\n  }, \"\\n          \", mdx(\"source\", {\n    parentName: \"picture\",\n    \"srcSet\": [\"/static/341bc710dfaca4a7e0744f9d8a81c250/1e0be/successful_build.webp 250w\", \"/static/341bc710dfaca4a7e0744f9d8a81c250/b0a15/successful_build.webp 500w\", \"/static/341bc710dfaca4a7e0744f9d8a81c250/dd35b/successful_build.webp 552w\"],\n    \"sizes\": \"(max-width: 552px) 100vw, 552px\",\n    \"type\": \"image/webp\"\n  }), \"\\n          \", mdx(\"source\", {\n    parentName: \"picture\",\n    \"srcSet\": [\"/static/341bc710dfaca4a7e0744f9d8a81c250/63868/successful_build.png 250w\", \"/static/341bc710dfaca4a7e0744f9d8a81c250/0b533/successful_build.png 500w\", \"/static/341bc710dfaca4a7e0744f9d8a81c250/08c0b/successful_build.png 552w\"],\n    \"sizes\": \"(max-width: 552px) 100vw, 552px\",\n    \"type\": \"image/png\"\n  }), \"\\n          \", mdx(\"img\", {\n    parentName: \"picture\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"src\": \"/static/341bc710dfaca4a7e0744f9d8a81c250/08c0b/successful_build.png\",\n    \"alt\": \"successful build\",\n    \"title\": \"successful build\",\n    \"loading\": \"lazy\",\n    \"decoding\": \"async\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    }\n  }), \"\\n        \"), \"\\n    \")), mdx(\"h2\", null, \"\\uACB0\\uB860\"), mdx(\"p\", null, \"\\uC9C0\\uAE08 \\uC791\\uC131\\uD55C gitlab-ci \\uCF54\\uB4DC\\uB97C \\uD1B5\\uD574\\uC11C \\uC9C0\\uC18D\\uC801\\uC778 \\uD1B5\\uD569\\uACFC \\uBC30\\uD3EC\\uB97C \\uAD6C\\uC131\\uD558\\uC600\\uC2B5\\uB2C8\\uB2E4.\"), mdx(\"p\", null, \"\\uC774\\uC810\\uC73C\\uB85C\\uB294\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"\\uCF54\\uB4DC\\uB85C \\uC190\\uC26C\\uC6B4 \\uD1B5\\uD569\\uC774 \\uAC00\\uB2A5\\uD569\\uB2C8\\uB2E4. (\\uB2E4\\uB9CC gitlab-runner \\uC5D0 \\uB300\\uD55C \\uC5B4\\uB290\\uC815\\uB3C4 \\uD559\\uC2B5\\uC774 \\uD544\\uC694\\uD569\\uB2C8\\uB2E4.)\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"\\uC194\\uC9C1\\uD788 jenkins \\uBCF4\\uB2E4\\uB294 \\uC26C\\uC6B4\\uAC70 \\uAC19\\uC2B5\\uB2C8\\uB2E4....\")), mdx(\"p\", null, \"\\uC544\\uC26C\\uC6B4 \\uC810\\uC73C\\uB85C\\uB294\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"\\uD14C\\uC2A4\\uD2B8/\\uC2A4\\uD14C\\uC774\\uC9C0 \\uD658\\uACBD\\uC5D0 \\uB300\\uD55C \\uBD80\\uBD84\\uC740 \\uBE0C\\uB80C\\uCE58\\uB97C \\uD1B5\\uD574\\uC11C \\uAD6C\\uD604\\uC774 \\uD544\\uC694\\uD560 \\uAC83 \\uAC19\\uC2B5\\uB2C8\\uB2E4.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"\\uC5EC\\uB7EC \\uC11C\\uBC84\\uB85C \\uBC30\\uD3EC\\uC2DC \\uB300\\uC751\\uC774 \\uD544\\uC694\\uD569\\uB2C8\\uB2E4.\")));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"title":"gitlab-runnner 를 활용한 docker 배포","date":"2020-09-15T21:00:00.000Z","image":"https://khs9628.github.io/img/infra/logo/GitLab.png","category":"coding","tags":["dev","coding","git","gitlab","gitlab runner","docker","deploy","ci","cd"],"summary":"여기서는 gitlab 과 gitlab-runner (+ nexus) 를 설치하여 나도 자동적으로 빌드와 배포가 되도록 CI (Continuous Integration) / CD (Continuous Deployment) 를 구성 해보았습니다."}}},"pageContext":{"id":"bf0fd944-39f7-5968-9d93-85528f740f91","next":{"id":"f91744b5-ebd4-5953-83d7-58306aeca763","frontmatter":{"title":"jekyll 블로그 wsl2 + docker + vscode 에서 작업하기","date":"2020-07-15T07:08:00.000Z","category":"coding","image":"https://images.velog.io/images/foreverchoi0706/post/4e2a22b7-0b84-438f-aac9-040922930912/075c8694.jpeg","tags":["dev","coding","jekyll","wsl2","docker","windows","linux","vscode"]},"slug":"jekyll-with-docker-and-wsl2"},"previous":{"id":"3ddacdc1-787e-557f-9fea-0be9e8ded353","frontmatter":{"title":"울펜슈타인3D 는 과연 어떻게 3d를 구현했을까요?","date":"2020-12-09T04:00:00.000Z","category":"coding","image":"https://i.ytimg.com/vi/4JWoNrjUMLA/maxresdefault.jpg","tags":["dev","coding","game","wolfenstain","raycasting","3d"]},"slug":"raycasting-pseudo-3d"}}},
    "staticQueryHashes": ["3764592887"]}